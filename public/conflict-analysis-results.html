<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="AI-Powered Conflict Resolution Analysis Results - Articulaition"
    />
    <title>Conflict Resolution Analysis Results - Articulaition</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/base.css" />

    <style>
      /* ==========================================================================
         SOPHISTICATED CONFLICT RESOLUTION DESIGN SYSTEM
         ========================================================================== */
      :root {
        /* Conflict Resolution Color Palette - Professional & Calming */
        --voice-primary: #6366f1;
        --voice-secondary: #8b5cf6;
        --voice-accent: #06b6d4;
        --voice-warm: #f59e0b;
        --voice-success: #10b981;
        --voice-neural: #64748b;
        --voice-dark: #2d3748;
        --voice-light: #f7fafc;
        --voice-bg-primary: #fafbfc;
        --voice-bg-secondary: #f4f6f8;
        --voice-glass: rgba(255, 255, 255, 0.85);
        --voice-glass-border: rgba(255, 255, 255, 0.3);
        --voice-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
        --voice-shadow-lg: 0 35px 60px -12px rgba(0, 0, 0, 0.12);
        --voice-text-primary: #1a202c;
        --voice-text-secondary: #4a5568;
        --voice-text-muted: #718096;
        
        /* Conflict Resolution Accent Colors */
        --conflict-primary: #dc2626;
        --conflict-secondary: #ef4444;
        --conflict-success: #10b981;
        --conflict-warning: #f59e0b;
        --conflict-light: rgba(220, 38, 38, 0.05);
        
        /* Typography */
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        
        /* Spacing */
        --space-1: 0.25rem;
        --space-2: 0.5rem;
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-8: 2rem;
        
        /* Radius */
        --radius: 0.75rem;
        --radius-sm: 0.5rem;
        --radius-lg: 1rem;
        
        /* Glass Morphism Shadows */
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      /* ==========================================================================
         BASE STYLES WITH SOPHISTICATED BACKGROUND
         ========================================================================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: var(--font-sans);
        background: linear-gradient(135deg, #fafbfc 0%, #f4f6f8 25%, #edf2f7 50%, #e2e8f0 75%, #cbd5e0 100%);
        color: var(--voice-text-primary);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Background Effects */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.03) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.025) 0%, transparent 50%),
          radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.02) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(220, 38, 38, 0.015) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      /* Animation Classes */
      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }

      .slide-up {
        animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(30px);
      }

      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      @keyframes fadeIn {
        to { opacity: 1; }
      }
      @keyframes slideUp {
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes scaleIn {
        to { opacity: 1; transform: scale(1); }
      }

      .delay-100 { animation-delay: 0.1s; }
      .delay-200 { animation-delay: 0.2s; }
      .delay-300 { animation-delay: 0.3s; }
      .delay-400 { animation-delay: 0.4s; }

      /* Background Effects */
      .dashboard-container {
        background: linear-gradient(135deg, #fef7f7 0%, #fef2f2 100%);
        position: relative;
        min-height: 100vh;
      }

      .dashboard-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 20%,
            rgba(220, 38, 38, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(220, 38, 38, 0.025) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 20% 80%,
            rgba(16, 185, 129, 0.02) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(245, 158, 11, 0.015) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      /* Animation Classes */
      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }

      .slide-up {
        animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(30px);
      }

      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }
      @keyframes slideUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes scaleIn {
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .delay-100 {
        animation-delay: 0.1s;
      }
      .delay-200 {
        animation-delay: 0.2s;
      }
      .delay-300 {
        animation-delay: 0.3s;
      }
      .delay-400 {
        animation-delay: 0.4s;
      }
      .delay-500 {
        animation-delay: 0.5s;
      }

      /* ==========================================================================
         TOP NAVIGATION WITH GLASS MORPHISM
         ========================================================================== */
      .top-nav {
        padding: 1.5rem 2.5rem;
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--voice-shadow);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo-section img {
        height: 36px;
        filter: none;
        transition: transform 0.3s ease;
      }

      .logo-section:hover img {
        transform: scale(1.05);
      }

      /* Navigation Branding with Shiny Effect */
      .nav-orange {
          background: linear-gradient(
              145deg,
              #ff934d 0%,
              #ffb366 30%,
              #ff7f50 60%,
              #ff934d 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(255, 147, 77, 0.3));
      }

      .nav-blue {
          background: linear-gradient(
              145deg,
              #4a90e2 0%,
              #6bb6ff 30%,
              #4f94e8 60%,
              #4a90e2 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(74, 144, 226, 0.3));
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-link {
        color: var(--voice-text-secondary);
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link.active {
        color: var(--voice-primary);
        background: transparent;
        border: none;
        border-bottom: 2px solid #4a90e2;
        border-radius: 0;
        padding-bottom: 0.4rem;
      }

      .nav-link:hover:not(.active) {
        color: var(--voice-text-primary);
        background: rgba(0, 0, 0, 0.05);
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--primary-red),
          var(--conflict-coral)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, var(--primary-red), var(--conflict-coral));
        color: white;
        text-decoration: none;
        border-radius: 12px;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }

      .back-btn:hover {
        background: linear-gradient(135deg, var(--conflict-coral), var(--primary-red));
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      /* ==========================================================================
         MAIN CONTENT LAYOUT
         ========================================================================== */
      .main-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 3rem 2rem;
        position: relative;
        z-index: 2;
      }

      /* Breadcrumb */
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 2rem;
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      .breadcrumb a {
        color: var(--text-muted);
        text-decoration: none;
      }

      .breadcrumb a:hover {
        color: var(--text-secondary);
      }

      .breadcrumb .current {
        color: var(--text-primary);
        font-weight: 500;
      }

      /* Page Title Section */
      .page-title-section {
        text-align: center;
        margin-bottom: 3rem;
      }

      .title-with-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .title-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          var(--primary-red),
          var(--conflict-coral)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
      }

      .page-description {
        color: var(--text-secondary);
        font-size: 1.125rem;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
      }

      /* Analysis Grid */
      .analysis-container {
        display: grid;
        grid-template-columns: 1fr 600px;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      /* ==========================================================================
         LEFT PANEL - TRANSCRIPT
         ========================================================================== */
      .transcript-panel {
        background: white;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow);
        border: 1px solid var(--gray-200);
        overflow: hidden;
        height: fit-content;
        min-height: 600px;
      }

      .transcript-header {
        padding: var(--space-5);
        border-bottom: 1px solid var(--gray-200);
        background: var(--gray-50);
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .transcript-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
        margin: 0;
      }

      .transcript-content {
        padding: var(--space-6);
        max-height: 70vh;
        overflow-y: auto;
      }

      .transcript-text {
        line-height: 1.8;
        color: var(--gray-700);
        background: var(--conflict-light);
        padding: var(--space-6);
        border-radius: var(--radius);
        border-left: 4px solid var(--primary);
        font-size: 0.95rem;
      }

      /* ==========================================================================
         UNIFIED ANALYSIS PANEL WITH GLASS MORPHISM
         ========================================================================== */
      .unified-analysis-panel {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        overflow: hidden;
        height: fit-content;
        min-height: 600px;
        transition: all 0.3s ease;
        position: relative;
      }

      .unified-analysis-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .unified-analysis-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg), 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      .unified-tab-header {
        display: flex;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(15px);
        position: relative;
        z-index: 2;
      }
      
      .unified-tab-btn {
        flex: 1;
        padding: var(--space-4) var(--space-5);
        background: none;
        border: none;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-2);
        border-radius: 12px 12px 0 0;
      }
      
      .unified-tab-btn:hover:not(.active) {
        background: rgba(99, 102, 241, 0.05);
        color: var(--voice-text-primary);
        transform: translateY(-1px);
      }
      
      .unified-tab-btn.active {
        background: rgba(99, 102, 241, 0.1);
        color: var(--voice-primary);
        border-bottom: 3px solid var(--voice-primary);
        transform: translateY(-1px);
      }

      .unified-tab-btn.active::before {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        border-radius: 2px 2px 0 0;
      }

      .unified-tab-content {
        padding: var(--space-6);
        height: 450px;
        overflow-y: auto;
        overflow-x: hidden;
        position: relative;
      }

      /* Custom scrollbar for unified content */
      .unified-tab-content::-webkit-scrollbar {
        width: 6px;
      }

      .unified-tab-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.3);
      }

      .unified-tab-pane {
        display: none;
      }

      .unified-tab-pane.active {
        display: block;
      }

      .panel-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-6);
      }

      .panel-actions h3 {
        margin: 0;
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .copy-btn {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-3);
        background: var(--gray-100);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius);
        font-size: 0.875rem;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s;
      }

      .copy-btn:hover {
        background: var(--gray-200);
        color: var(--gray-900);
      }

      /* ==========================================================================
         MISSING UTILITY CLASSES
         ========================================================================== */
      .flex { display: flex; }
      .items-center { align-items: center; }
      .gap-3 { gap: 0.75rem; }
      .gap-4 { gap: 1rem; }
      .relative { position: relative; }
      .group:hover .group-hover\\:scale-105 { transform: scale(1.05); }
      .h-9 { height: 2.25rem; }
      .w-auto { width: auto; }
      .font-semibold { font-weight: 600; }
      .text-lg { font-size: 1.125rem; }
      .tracking-tight { letter-spacing: -0.025em; }
      .transition-transform { transition: transform 0.3s ease; }

      .analysis-info {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.25rem;
      }

      .analysis-badge {
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .user-menu-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .user-menu-btn:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-1px);
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      /* Glass Effect */
      .glass-intense {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      /* ==========================================================================
         PAGE HEADER
         ========================================================================== */
      .page-header {
        background: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        padding: var(--space-4) var(--space-8);
      }
      
      .header-content h1 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: var(--space-2);
      }

      /* ==========================================================================
         MAIN LAYOUT
         ========================================================================== */
      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-8);
      }
      
      /* Score Section at Top with Glass Morphism */
      .score-section {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        padding: var(--space-6) var(--space-8);
        margin-bottom: var(--space-6);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .score-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(220, 38, 38, 0.02) 0%, transparent 100%);
        pointer-events: none;
      }
      
      .score-header {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-4);
        position: relative;
        z-index: 2;
      }
      
      .score-display {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-6);
      }
      
      .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--conflict-primary) 0%, var(--conflict-secondary) 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.25rem;
        font-weight: 800;
        box-shadow: 0 25px 50px -12px rgba(220, 38, 38, 0.4), 0 15px 25px -8px rgba(220, 38, 38, 0.25);
        flex-shrink: 0;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        border: 4px solid rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 2;
      }

      .score-circle::before {
        content: '';
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        border-radius: 50%;
        background: linear-gradient(135deg, rgba(220, 38, 38, 0.2) 0%, rgba(239, 68, 68, 0.1) 100%);
        z-index: -1;
        transition: all 0.4s ease;
      }
      
      .score-circle:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 35px 70px -12px rgba(220, 38, 38, 0.5), 0 20px 35px -8px rgba(220, 38, 38, 0.35);
      }

      .score-circle:hover::before {
        transform: scale(1.1);
        opacity: 0.8;
      }
      
      .score-details {
        text-align: left;
        position: relative;
        z-index: 2;
      }
      
      .score-label {
        font-size: 1rem;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-2);
        font-weight: 600;
      }
      
      .score-value {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--voice-text-primary);
        margin-bottom: var(--space-3);
        line-height: 1;
      }
      
      .score-description {
        font-size: 1rem;
        color: var(--voice-text-secondary);
        font-weight: 500;
        padding: var(--space-2) var(--space-4);
        background: linear-gradient(135deg, #fef2f2, #fee2e2);
        border-radius: 8px;
        border: 1px solid #fecaca;
      }
      
      /* Analysis Panels Layout */
      .analysis-panels {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-6);
        height: calc(100vh - 320px);
      }

      /* ==========================================================================
         TRANSCRIPT PANEL WITH GLASS MORPHISM
         ========================================================================== */
      .transcript-panel {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
      }

      .transcript-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .transcript-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg), 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      .transcript-header {
        padding: var(--space-5) var(--space-6);
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(15px);
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .transcript-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .transcript-content {
        flex: 1;
        padding: var(--space-6);
        overflow-y: auto;
        position: relative;
        z-index: 2;
      }

      /* ==========================================================================
         LOADING STATES
         ========================================================================== */
      .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--space-8);
        color: var(--gray-500);
      }
      
      .spinner {
        width: 24px;
        height: 24px;
        border: 2px solid var(--gray-200);
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: var(--space-3);
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* ==========================================================================
         INSIGHT CARDS
         ========================================================================== */
      .insight-card-modern {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 16px;
        margin-bottom: var(--space-5);
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }

      .insight-card-modern:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .insight-header-modern {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-5);
        background: rgba(255, 255, 255, 0.5);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .insight-icon-modern {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        color: white;
        flex-shrink: 0;
        box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
      }

      .insight-icon-modern.excellent {
        background: linear-gradient(135deg, #10b981, #059669);
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
      }

      .insight-icon-modern.good {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
      }

      .insight-icon-modern.needs-improvement {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
      }

      .insight-title-modern {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .insight-content-modern {
        padding: var(--space-5);
        line-height: 1.7;
        color: var(--voice-text-secondary);
      }

      /* ==========================================================================
         METRIC CARDS
         ========================================================================== */
      .metrics-grid {
        display: grid;
        gap: var(--space-4);
      }

      .metric-card {
        background: var(--conflict-light);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius);
        padding: var(--space-4);
        border-left: 4px solid var(--primary);
        transition: all 0.2s ease;
      }

      .metric-card:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }

      .metric-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-3);
      }

      .metric-name {
        font-weight: 600;
        color: var(--gray-900);
        font-size: 0.9rem;
      }

      .metric-score {
        font-weight: 600;
        font-size: 0.875rem;
        padding: var(--space-1) var(--space-2);
        border-radius: var(--radius-sm);
        background: white;
      }

      .metric-details {
        margin: var(--space-2) 0;
        font-size: 0.8rem;
        color: var(--gray-600);
      }

      .metric-bar {
        height: 6px;
        background: var(--gray-200);
        border-radius: 3px;
        overflow: hidden;
        margin-top: var(--space-2);
      }

      .metric-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.3s ease;
      }

      /* ==========================================================================
         QUALITATIVE CATEGORIES
         ========================================================================== */
      .categories-grid {
        display: grid;
        gap: var(--space-4);
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }

      .category-card {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 12px;
        padding: var(--space-5);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .category-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
      }

      .category-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.95);
      }

      .category-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-3);
      }

      .category-name {
        font-weight: 600;
        color: var(--voice-text-primary);
        font-size: 0.95rem;
      }

      .category-score {
        font-weight: 700;
        font-size: 1rem;
        padding: var(--space-2) var(--space-3);
        border-radius: 8px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
      }

      .category-score::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }

      .category-factors {
        margin: var(--space-3) 0;
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-2);
      }

      .factor-tag {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.06));
        color: var(--voice-primary);
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid rgba(99, 102, 241, 0.15);
        transition: all 0.2s ease;
        text-transform: capitalize;
        letter-spacing: 0.025em;
      }

      .factor-tag:hover {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.12), rgba(139, 92, 246, 0.1));
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2);
      }

      .category-bar {
        height: 8px;
        background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        border-radius: 12px;
        overflow: hidden;
        margin-top: var(--space-3);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .category-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
        animation: barShimmer 3s ease-in-out infinite;
      }

      @keyframes barShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      .category-fill {
        height: 100%;
        border-radius: 12px;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        background: linear-gradient(135deg, var(--voice-primary) 0%, var(--voice-secondary) 50%, var(--voice-accent) 100%);
        box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
        position: relative;
        overflow: hidden;
      }

      .category-fill::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
        animation: fillShimmer 2s ease-in-out infinite;
      }

      @keyframes fillShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      /* ==========================================================================
         NEXT STEPS SECTION
         ========================================================================== */
      .next-steps-section {
        grid-column: 1 / -1;
        margin-top: var(--space-8);
      }

      .next-steps {
        border-left-color: var(--success) !important;
      }

      .next-steps .insight-icon-modern {
        background: var(--success);
      }

      .roadmap-phase {
        margin: var(--space-6) 0;
        padding: var(--space-4);
        border-radius: var(--radius);
        border-left: 4px solid;
      }

      .phase-foundation {
        background: #eff6ff;
        border-left-color: #3b82f6;
      }

      .phase-integration {
        background: #f0fdf4;
        border-left-color: #10b981;
      }

      .phase-mastery {
        background: #fef3c7;
        border-left-color: #f59e0b;
      }

      .phase-title {
        font-weight: 600;
        margin-bottom: var(--space-2);
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }

      .phase-focus {
        font-weight: 600;
        margin-bottom: var(--space-2);
      }

      .phase-actions {
        margin: var(--space-3) 0;
        font-size: 0.9rem;
      }

      .phase-actions ul {
        margin: var(--space-2) 0 0 0;
        padding-left: 1.5rem;
      }

      .phase-actions li {
        margin-bottom: var(--space-1);
      }

      .success-metric {
        margin-top: var(--space-2);
        font-size: 0.9rem;
        font-weight: 500;
      }

      /* ==========================================================================
         RESPONSIVE DESIGN
         ========================================================================== */
      @media (max-width: 1024px) {
        .analysis-container {
          grid-template-columns: 1fr;
          gap: var(--space-6);
        }
        
        .transcript-panel,
        .unified-analysis-panel {
          height: auto;
          min-height: 400px;
        }
        
        .top-nav {
          padding: var(--space-4) var(--space-5);
        }
        
        .logo-text {
          font-size: 1.25rem;
        }
      }

      @media (max-width: 768px) {
        .analysis-container {
          padding: var(--space-4);
        }
        
        .unified-tab-btn {
          font-size: 0.8rem;
          padding: var(--space-3) var(--space-4);
        }
        
        .unified-tab-btn span {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Top Navigation -->
    <nav class="top-nav fade-in delay-100">
      <div class="logo-section">
        <a href="index.html" class="flex items-center gap-3 group">
          <img src="images/tree-logo.svg" alt="Tree Logo" class="h-9 w-auto group-hover:scale-105 transition-transform">
          <span class="font-semibold text-lg tracking-tight nav-brand-text">
              <span class="nav-orange">articul</span><span class="nav-blue">ai</span><span class="nav-orange">tion</span><span class="nav-orange">.com</span>
          </span>
        </a>
        <div class="nav-links">
          <a href="dashboard.html" class="nav-link">Home</a>
          <a href="professional-communication.html" class="nav-link">Professional Communication</a>
          <a href="personal-communication.html" class="nav-link active">Personal Communication</a>
          <a href="improvement-hub.html" class="nav-link">Improvement Hub</a>
          <a href="pricing.html" class="nav-link">Pricing</a>
        </div>
      </div>

      <div class="flex items-center gap-4">
        <!-- Analysis Results Info -->
        <div class="analysis-info">
          <span class="analysis-badge" id="analysisTypeBadge">Conflict Resolution</span>
        </div>
        
        <!-- User Dropdown -->
        <div class="relative">
          <button
            class="flex items-center gap-3 px-4 py-2 rounded-xl bg-white bg-opacity-10 hover:bg-opacity-15 transition-all"
            id="userMenuBtn"
          >
            <div
              id="userAvatar"
              style="
                width: 32px;
                height: 32px;
                background: linear-gradient(135deg, #dc2626, #ef4444);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: 700;
                font-size: 14px;
              "
            >
              U
            </div>
            <div style="display: flex; flex-direction: column; flex: 1; margin-left: 8px;">
              <span
                id="userName"
                style="
                  color: var(--voice-text-primary);
                  font-weight: 500;
                  font-size: 14px;
                  line-height: 1.2;
                "
                >Account</span
              >
              <span
                id="userPlan"
                style="
                  background: linear-gradient(135deg, #10b981, #06b6d4);
                  color: white;
                  padding: 2px 8px;
                  border-radius: 12px;
                  font-size: 10px;
                  font-weight: 600;
                  width: fit-content;
                  margin-top: 2px;
                "
                >Free Plan</span
              >
            </div>
            <i
              data-lucide="chevron-down"
              style="
                width: 16px;
                height: 16px;
                color: var(--voice-text-secondary);
              "
            ></i>
          </button>
          <div
            class="absolute right-0 top-full mt-2 w-48 glass-intense rounded-xl shadow-2xl border border-black border-opacity-10 hidden"
            id="userDropdown"
          >
            <a
              href="#"
              class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10 rounded-t-xl"
              style="color: var(--voice-text-primary); font-weight: 400"
            >
              <i data-lucide="user" style="width: 16px; height: 16px"></i>
              <span style="font-size: 14px">Profile Settings</span>
            </a>
            <a
              href="#"
              class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10"
              style="color: var(--voice-text-primary); font-weight: 400"
            >
              <i
                data-lucide="credit-card"
                style="width: 16px; height: 16px"
              ></i>
              <span style="font-size: 14px">Billing & Plans</span>
            </a>
            <a
              href="#"
              class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10"
              style="color: var(--voice-text-primary); font-weight: 400"
            >
              <i data-lucide="settings" style="width: 16px; height: 16px"></i>
              <span style="font-size: 14px">Preferences</span>
            </a>
            <hr style="border-color: rgba(0, 0, 0, 0.1); margin: 8px 0" />
            <button
              class="flex items-center gap-3 px-4 py-3 hover:bg-red-500 hover:bg-opacity-20 w-full text-left text-red-400 rounded-b-xl"
              id="logoutBtn"
              style="font-weight: 400"
            >
              <i
                data-lucide="log-out"
                style="width: 16px; height: 16px"
              ></i>
              <span style="font-size: 14px">Sign Out</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header slide-up delay-200">
      <div class="header-content">
        <h1 id="resultsTitle">Conflict Resolution Analysis Results</h1>
      </div>
    </header>

    <main class="main-container">
      <!-- Score Section at Top -->
      <div class="score-section scale-in delay-300">
        <div class="score-header">Conflict Resolution Effectiveness Score</div>
        <div class="score-display">
          <div class="score-circle" id="scoreCircle">--</div>
          <div class="score-details">
            <div class="score-label">Conflict Resolution Mastery</div>
            <div class="score-value" id="scoreText">Analyzing...</div>
            <div class="score-description" id="scoreDescription">
              Building your personalized conflict resolution development plan...
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Panels Layout -->
      <div class="analysis-panels">
        <!-- Left Panel: Transcript -->
        <div class="transcript-panel slide-up delay-400">
        <div class="transcript-header">
          <i data-lucide="file-text" style="color: var(--primary);"></i>
          <h2 class="transcript-title">Your Conversation</h2>
        </div>
        <div class="transcript-content">
          <div id="transcriptContent">
            <div class="loading-state">
              <div class="spinner"></div>
              <p>Transcribing your conflict resolution conversation...</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Right Panel: Unified Analysis with 3 Tabs -->
      <div class="unified-analysis-panel slide-up delay-500">
        <!-- Tab Navigation -->
        <div class="unified-tab-header">
          <button class="unified-tab-btn active" data-tab="insights">
            <i data-lucide="lightbulb"></i>
            <span>Insights</span>
          </button>
          <button class="unified-tab-btn" data-tab="quantitative">
            <i data-lucide="bar-chart-2"></i>
            <span>Quantitative</span>
          </button>
          <button class="unified-tab-btn" data-tab="qualitative">
            <i data-lucide="pie-chart"></i>
            <span>Qualitative</span>
          </button>
        </div>
        
        <!-- Tab Content -->
        <div class="unified-tab-content">
          <!-- Insights Tab -->
          <div class="unified-tab-pane active" id="insights-pane">
            <div class="panel-actions">
              <h3>Conflict Resolution Insights</h3>
              <button class="copy-btn" onclick="copyAnalysis()">
                <i data-lucide="copy"></i>
                Copy Feedback
              </button>
            </div>
            <div id="detailedAnalysisContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Analyzing your conflict resolution approach...</p>
              </div>
            </div>
          </div>
          
          <!-- Quantitative Tab -->
          <div class="unified-tab-pane" id="quantitative-pane">
            <div class="panel-actions">
              <h3>Communication Metrics</h3>
              <button class="copy-btn" onclick="copyQuantitative()">
                <i data-lucide="copy"></i>
                Copy Data
              </button>
            </div>
            <div id="quantitativeContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Measuring communication control and pacing...</p>
              </div>
            </div>
          </div>
          
          <!-- Qualitative Tab -->
          <div class="unified-tab-pane" id="qualitative-pane">
            <div class="panel-actions">
              <h3>De-escalation Skills</h3>
              <button class="copy-btn" onclick="copyQualitative()">
                <i data-lucide="copy"></i>
                Copy Analysis
              </button>
            </div>
            <div id="qualitativeContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Evaluating resolution and empathy techniques...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Enhanced Next Steps Section -->
      <div class="next-steps-section">
        <div class="insight-card-modern next-steps" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);">
          <div class="insight-header-modern">
            <div class="insight-icon-modern" style="background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary)); animation: pulse 2s infinite;">
              <i data-lucide="target"></i>
            </div>
            <h3 class="insight-title-modern" style="font-size: 1.5rem; color: var(--voice-text-primary); font-weight: 700;">Your Next Steps</h3>
          </div>
          <div class="insight-content-modern">
            <!-- Hero Message -->
            <div style="margin-bottom: 3rem; text-align: center; padding: 2.5rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
              <div style="max-width: 600px; margin: 0 auto;">
                <h4 style="font-size: 2.25rem; font-weight: 800; background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0 0 1rem 0; line-height: 1.2;">
                  Transform Your Communication
                </h4>
                <p style="color: var(--voice-text-secondary); line-height: 1.8; margin: 0; font-size: 1.125rem; font-weight: 400;">
                  You've unlocked professional insights that transform how you communicate. Choose your growth path and turn these discoveries into <strong style="color: var(--voice-primary);">exponential progress</strong>.
                </p>
              </div>
            </div>
            
            
            <!-- Premium Pricing Section -->
            <div style="background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.98)); padding: 2rem; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.8); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.06); backdrop-filter: blur(10px); margin-bottom: 2rem; position: relative; overflow: hidden;">
              
              <!-- Collapsible Header -->
              <div style="position: relative; z-index: 1; cursor: pointer;" onclick="togglePricingSection()">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                  <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255, 255, 255, 0.8); padding: 0.5rem 1rem; border-radius: 50px; border: 1px solid rgba(0, 0, 0, 0.1);">
                      <i data-lucide="rocket" style="width: 16px; height: 16px; color: var(--voice-primary);"></i>
                      <span style="font-size: 0.875rem; font-weight: 600; color: var(--voice-primary);">Choose Your Growth Path</span>
                    </div>
                    <div>
                      <h4 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0; line-height: 1.2;">Plans Built for Every Stage</h4>
                      <p style="font-size: 0.875rem; color: var(--voice-text-secondary); margin: 0.25rem 0 0 0; font-weight: 400;" id="pricingSubtitle">View Our Improvement Plans</p>
                    </div>
                  </div>
                  <button style="background: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease;" id="pricingToggleBtn" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.boxShadow='none'">
                    <i data-lucide="chevron-down" style="width: 20px; height: 20px; transition: transform 0.3s ease;" id="pricingToggleIcon"></i>
                  </button>
                </div>
              </div>
              
              <!-- Collapsible Content -->
              <div id="pricingContent" style="display: none; opacity: 0; transition: all 0.4s ease; margin-top: 2rem;">
                <p style="font-size: 1rem; color: var(--voice-text-secondary); margin: 0.5rem auto 2rem; font-weight: 400; text-align: center; max-width: 500px;">From first insights to complete mastery—grow at your pace with tools designed for real results.</p>
              
              <!-- Premium Pricing Grid -->
              <div style="position: relative; z-index: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1400px; margin: 0 auto;">
                
                <!-- Essential Plan -->
                <div style="background: white; border: 2px solid rgba(0, 0, 0, 0.06); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(99, 102, 241, 0.15)'; this.style.borderColor='rgba(99, 102, 241, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(0, 0, 0, 0.06)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(99, 102, 241, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="play" style="width: 14px; height: 14px; color: var(--voice-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--voice-primary); text-transform: uppercase; letter-spacing: 0.5px;">Essential</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Start Your Growth</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Perfect for building steady confidence in how you express yourself.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$9.99</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);">/month</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What's included:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--voice-success);"></i>
                        </div>
                        <span>10 detailed audio analyses per month</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--voice-success);"></i>
                        </div>
                        <span>Monthly improvement catalog with drills</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--voice-success);"></i>
                        </div>
                        <span>Email support</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--voice-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);" onmouseover="this.style.background='#5145db'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.35)'" onmouseout="this.style.background='var(--voice-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(99, 102, 241, 0.25)'">Get Started</button>
                </div>
                
                <!-- Max Growth Plan -->
                <div style="background: linear-gradient(135deg, white, #fafbff); border: 3px solid var(--voice-primary); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; transform: scale(1.05); box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15);" onmouseover="this.style.transform='translateY(-12px) scale(1.08)'; this.style.boxShadow='0 30px 60px rgba(99, 102, 241, 0.25)'" onmouseout="this.style.transform='translateY(0) scale(1.05)'; this.style.boxShadow='0 20px 40px rgba(99, 102, 241, 0.15)'">
                  <!-- Popular Badge -->
                  <div style="position: absolute; top: -1px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.625rem; font-weight: 600; box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3); text-transform: uppercase; letter-spacing: 0.5px;">
                    <i data-lucide="star" style="width: 10px; height: 10px; margin-right: 0.2rem;"></i>Popular
                  </div>
                  
                  <div style="margin-bottom: 2rem; margin-top: 1rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05)); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="zap" style="width: 14px; height: 14px; color: var(--voice-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--voice-primary); text-transform: uppercase; letter-spacing: 0.5px;">Max Growth</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Complete Transformation</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">For serious communicators ready to unlock their full potential with unlimited practice and expert guidance.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$15.99</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);">/month</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Everything in Essential, plus:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="infinity" style="width: 12px; height: 12px; color: var(--voice-primary);"></i>
                        </div>
                        <span><strong>Unlimited</strong> audio analysis</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="users" style="width: 12px; height: 12px; color: var(--voice-primary);"></i>
                        </div>
                        <span>Weekly expert review sessions</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="sparkles" style="width: 12px; height: 12px; color: var(--voice-primary);"></i>
                        </div>
                        <span>Full access to Improvement Hub</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="clock" style="width: 12px; height: 12px; color: var(--voice-primary);"></i>
                        </div>
                        <span>Early access to new tools</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary)); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 30px rgba(99, 102, 241, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(99, 102, 241, 0.4)'">Start Free Trial</button>
                </div>
                
                <!-- Enterprise Plan -->
                <div style="background: white; border: 2px solid rgba(107, 114, 128, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(107, 114, 128, 0.15)'; this.style.borderColor='rgba(107, 114, 128, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(107, 114, 128, 0.15)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(107, 114, 128, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="building" style="width: 14px; height: 14px; color: var(--voice-text-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--voice-text-primary); text-transform: uppercase; letter-spacing: 0.5px;">Enterprise</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Scale Your Team</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Custom solutions for teams, coaches, and organizations building communication excellence.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">Custom</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);"> pricing</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Enterprise features:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="chart-line" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Custom team dashboards & analytics</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="users-2" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Group metrics & shared insights</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="headphones" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Dedicated support & onboarding</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--voice-text-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(107, 114, 128, 0.25);" onmouseover="this.style.background='#1f2937'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(107, 114, 128, 0.35)'" onmouseout="this.style.background='var(--voice-text-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(107, 114, 128, 0.25)'">Contact Sales</button>
                </div>
                
                <!-- One-Time Plan -->
                <div style="background: white; border: 2px solid rgba(139, 92, 246, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(139, 92, 246, 0.15)'; this.style.borderColor='rgba(139, 92, 246, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(139, 92, 246, 0.15)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(139, 92, 246, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="file-text" style="width: 14px; height: 14px; color: var(--voice-secondary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--voice-secondary); text-transform: uppercase; letter-spacing: 0.5px;">One-Time</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Personal Blueprint</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">A comprehensive communication analysis and personalized improvement plan delivered as a PDF.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$30</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);"> one-time</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What you get:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="search" style="width: 12px; height: 12px; color: var(--voice-secondary);"></i>
                        </div>
                        <span>Deep analysis of vocal patterns & delivery</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="target" style="width: 12px; height: 12px; color: var(--voice-secondary);"></i>
                        </div>
                        <span>Targeted breakdown of specific issues</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="download" style="width: 12px; height: 12px; color: var(--voice-secondary);"></i>
                        </div>
                        <span>Lifetime PDF access—yours forever</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--voice-secondary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);" onmouseover="this.style.background='#7c3aed'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(139, 92, 246, 0.35)'" onmouseout="this.style.background='var(--voice-secondary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.25)'">Get My Report</button>
                </div>
                
              </div>
              
              </div>
            </div>
            
            <!-- Enhanced Action Section -->
            <div style="margin-top: 3rem; text-align: center; padding: 3rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
              <div style="max-width: 600px; margin: 0 auto 2rem;">
                <h4 style="font-size: 1.5rem; font-weight: 700; color: var(--voice-text-primary); margin: 0 0 0.75rem 0;">Ready to Continue Your Growth?</h4>
                <p style="color: var(--voice-text-secondary); line-height: 1.6; margin: 0; font-size: 1rem;">Keep building on these insights or explore more tools to accelerate your communication mastery.</p>
              </div>
              
              <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; max-width: 500px; margin: 0 auto;">
                <button onclick="window.location.href='conflict-analysis.html'" 
                  style="background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary)); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); flex: 1; min-width: 200px;"
                  onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.4)'"
                  onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)'">
                  <i data-lucide="mic" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                  Practice Again
                </button>
                <button onclick="window.location.href='improvement-hub.html'" 
                  style="background: white; color: var(--voice-primary); border: 2px solid var(--voice-primary); padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; flex: 1; min-width: 200px;"
                  onmouseover="this.style.background='var(--voice-primary)'; this.style.color='white'; this.style.transform='translateY(-2px)'"
                  onmouseout="this.style.background='white'; this.style.color='var(--voice-primary)'; this.style.transform='translateY(0)'">
                  <i data-lucide="sparkles" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                  Explore Improvement Hub
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // CRITICAL: Set up Gemini API key for transcription
      window.GEMINI_API_KEY = "AIzaSyBGvwarFw2FbxgxOMnFchyji6G-zYkrgV8";
      console.log("🔑 Gemini API key configured for conflict resolution analysis");

      // Conflict Resolution Metrics Configuration
      const conflictMetrics = {
        quantitative: {
          'Speech Rate': { weight: 0.15, optimal: { min: 110, max: 150 } },
          'Talk/Listen Ratio': { weight: 0.25, optimal: { min: 45, max: 55 } },
          'Filler Words': { weight: 0.10, optimal: { min: 0, max: 2 } },
          'Questions Asked': { weight: 0.15, optimal: { min: 3, max: 8 } },
          'Response Time': { weight: 0.15, optimal: { min: 2, max: 4 } },
          'Solution Words': { weight: 0.10, optimal: { min: 3, max: 10 } },
          'Conversation Length': { weight: 0.10, optimal: { min: 300, max: 1200 } }
        },
        qualitative: {
          'Emotional Regulation': { weight: 0.25, factors: ['calm tone', 'controlled emotion', 'measured responses'] },
          'Empathy & Understanding': { weight: 0.25, factors: ['perspective taking', 'validation', 'compassion'] },
          'Solution Focus': { weight: 0.25, factors: ['constructive approach', 'forward thinking', 'compromise'] },
          'Communication Clarity': { weight: 0.25, factors: ['clear expression', 'specific language', 'understanding'] }
        }
      };

      // Unified tab switching functionality
      function initializeUnifiedTabSwitching() {
        const tabButtons = document.querySelectorAll('.unified-tab-btn');
        const tabPanes = document.querySelectorAll('.unified-tab-pane');
        
        tabButtons.forEach(button => {
          button.addEventListener('click', () => {
            const targetTab = button.dataset.tab;
            
            // Update active tab button
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Update active tab pane
            tabPanes.forEach(pane => pane.classList.remove('active'));
            document.getElementById(targetTab + '-pane').classList.add('active');
          });
        });
      }

      // Transcribe audio using Gemini AI
      async function transcribeAudioWithGemini(audioFile) {
        try {
          console.log("🎤 Transcribing conflict resolution audio with Gemini...");
          
          // Get API key from config
          const apiKey = window.API_CONFIG?.gemini || window.GEMINI_API_KEY;
          if (!apiKey || apiKey === 'YOUR_GEMINI_API_KEY_HERE') {
            throw new Error("Gemini API key not configured");
          }
          
          const arrayBuffer = await audioFile.arrayBuffer();
          const base64Audio = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [
                  {
                    text: "Please transcribe this conflict resolution conversation audio file accurately. Return only the transcribed text without any additional commentary."
                  },
                  {
                    inline_data: {
                      mime_type: audioFile.type,
                      data: base64Audio
                    }
                  }
                ]
              }],
              generationConfig: {
                temperature: 0.1,
                maxOutputTokens: 8000,
                topP: 0.8,
                topK: 40
              }
            })
          });

          // Check for HTTP errors
          if (!response.ok) {
            const errorText = await response.text();
            console.error(`❌ Gemini API error: ${response.status} - ${response.statusText}`, errorText);
            
            // Handle specific error cases
            if (response.status === 503) {
              throw new Error("Gemini service is temporarily unavailable. Please try again in a few moments.");
            } else if (response.status === 429) {
              throw new Error("Rate limit exceeded. Please try again later.");
            } else if (response.status === 401) {
              throw new Error("Invalid API key. Please check your Gemini API configuration.");
            } else {
              throw new Error(`Gemini API error: ${response.status} - ${response.statusText}`);
            }
          }

          const data = await response.json();
          
          if (data.candidates && data.candidates[0] && data.candidates[0].content) {
            const transcript = data.candidates[0].content.parts[0].text;
            console.log("✅ Conflict resolution transcription successful");
            return transcript;
          } else {
            console.error("❌ Invalid Gemini API response structure:", data);
            throw new Error("No transcription received from Gemini");
          }
        } catch (error) {
          console.error("❌ Transcription error:", error);
          
          // Provide fallback demo transcript for development/testing
          if (error.message.includes("503") || error.message.includes("service unavailable")) {
            console.log("🔄 Providing fallback demo transcript due to service unavailability");
            return getConflictDemoTranscript();
          }
          
          throw new Error(`Transcription failed: ${error.message}`);
        }
      }

      // Fallback demo transcript for conflict resolution conversations
      function getConflictDemoTranscript() {
        return `Look, I need to talk to you about what happened in the meeting yesterday. I felt like you interrupted me several times and didn't let me finish my thoughts.

I appreciate you bringing this up. I wasn't aware that I was interrupting you. Can you help me understand when specifically this happened?

Well, when I was explaining the budget concerns, you jumped in with your solution before I could finish laying out all the issues. And then later when I was talking about the timeline, you cut me off again.

You're right, and I apologize for that. I think I was so focused on trying to help solve the problems that I didn't realize I was cutting you off. That wasn't fair to you.

I understand you want to help, but it makes me feel like my input isn't valued when I can't finish my thoughts. It's been happening in several meetings lately.

I can see how frustrating that must be. You put a lot of thought into your presentations, and I should be giving you the space to share them fully. How can I do better going forward?

I think if you could just wait until I finish a point before jumping in, that would help a lot. Maybe we could use some kind of signal if I'm not done yet?

That's a great idea. What if you hold up your hand slightly when you're still speaking? That way I'll know to wait. And I'll make a conscious effort to pause and really listen before responding.

I think that could work. I also want to say that I do value your input - I just need to be able to get my thoughts out first. Your solutions are usually really helpful.

Thank you for saying that, and thank you for having the courage to bring this up. I really want us to work well together, and I'm committed to being more mindful about this.`;
      }

      // Analyze conflict resolution using specific metrics
      async function analyzeConflictResolution(transcript) {
        try {
          console.log("🧠 Analyzing conflict resolution conversation...");
          
          const quantitativeScores = await calculateQuantitativeMetrics(transcript, conflictMetrics.quantitative);
          const qualitativeScores = await calculateQualitativeMetrics(transcript, conflictMetrics.qualitative);
          const overallScore = calculateOverallScore(quantitativeScores, qualitativeScores);
          const insights = await generateConflictInsights(transcript, quantitativeScores, qualitativeScores);
          
          return {
            transcript: transcript,
            analysisType: "conflict",
            quantitativeScores: quantitativeScores,
            qualitativeScores: qualitativeScores,
            overallScore: overallScore,
            insights: insights
          };
        } catch (error) {
          console.error("❌ Conflict resolution analysis error:", error);
          throw new Error(`Analysis failed: ${error.message}`);
        }
      }

      // Calculate quantitative metrics for conflict resolution
      async function calculateQuantitativeMetrics(transcript, quantitativeConfig) {
        const words = transcript.split(/\s+/).filter(word => word.length > 0);
        const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
        
        const metrics = {};
        
        // Speech Rate (slower for conflict resolution)
        const estimatedDurationMinutes = words.length / 130; // Slower pace
        metrics['Speech Rate'] = Math.round(words.length / estimatedDurationMinutes);
        
        // Talk/Listen Ratio (balanced for conflict resolution)
        metrics['Talk/Listen Ratio'] = 50; // Equal listening and speaking
        
        // Filler Words (should be minimal for clarity)
        const fillerWords = ['um', 'uh', 'like', 'you know', 'so', 'well'];
        metrics['Filler Words'] = words.filter(word => 
          fillerWords.includes(word.toLowerCase())
        ).length;
        
        // Questions Asked (important for understanding)
        metrics['Questions Asked'] = (transcript.match(/\?/g) || []).length;
        
        // Response Time (thoughtful pauses)
        metrics['Response Time'] = 3; // Default for thoughtful responses
        
        // Solution Words
        const solutionWords = ['solution', 'resolve', 'fix', 'improve', 'better', 'help', 'work together', 'compromise', 'understand'];
        metrics['Solution Words'] = words.filter(word => 
          solutionWords.some(sol => word.toLowerCase().includes(sol))
        ).length;
        
        // Conversation Length
        metrics['Conversation Length'] = Math.round(words.length * 0.5); // Slower pace
        
        return metrics;
      }

      // Calculate qualitative metrics using AI analysis
      async function calculateQualitativeMetrics(transcript, qualitativeConfig) {
        try {
          const prompt = `Analyze this conflict resolution conversation transcript for de-escalation skills. Rate each factor from 1-10:

Emotional Regulation: Evaluate based on calm tone, controlled emotion, measured responses
Empathy & Understanding: Evaluate based on perspective taking, validation, compassion
Solution Focus: Evaluate based on constructive approach, forward thinking, compromise
Communication Clarity: Evaluate based on clear expression, specific language, understanding

Transcript: "${transcript}"

Provide scores in this exact format:
Emotional Regulation: [score 1-10]
Empathy & Understanding: [score 1-10]
Solution Focus: [score 1-10]
Communication Clarity: [score 1-10]`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          const analysisText = data.candidates[0].content.parts[0].text;
          
          const scores = {};
          Object.keys(qualitativeConfig).forEach(metric => {
            const match = analysisText.match(new RegExp(`${metric}:\\s*(\\d+)`, 'i'));
            scores[metric] = match ? parseInt(match[1]) : 3; // More realistic default of 3/10
          });
          
          return scores;
        } catch (error) {
          console.error("Error calculating qualitative metrics:", error);
          const defaultScores = {};
          Object.keys(qualitativeConfig).forEach(metric => {
            defaultScores[metric] = 3; // More realistic default of 3/10
          });
          return defaultScores;
        }
      }

      // Calculate overall score
      function calculateOverallScore(quantitativeScores, qualitativeScores) {
        const qualitativeWeight = 0.7; // More weight on qualitative for conflict resolution
        const quantitativeWeight = 0.3;
        
        const qualitativeValues = Object.values(qualitativeScores);
        const qualitativeAvg = qualitativeValues.reduce((a, b) => a + b, 0) / qualitativeValues.length;
        
        // Calculate quantitative average from actual metrics
        const quantitativeMetrics = Object.entries(quantitativeScores).map(([metric, value]) => {
          const config = conflictMetrics.quantitative[metric];
          if (!config) return 5; // Default middle score
          
          const { optimal } = config;
          // Score based on how close to optimal range
          if (value >= optimal.min && value <= optimal.max) {
            return 8; // Great score
          } else if (value < optimal.min) {
            return Math.max(3, 8 - ((optimal.min - value) / optimal.min) * 5);
          } else {
            return Math.max(3, 8 - ((value - optimal.max) / optimal.max) * 5);
          }
        });
        
        const quantitativeAvg = quantitativeMetrics.reduce((a, b) => a + b, 0) / quantitativeMetrics.length;
        
        const overallScore = (qualitativeAvg * qualitativeWeight + quantitativeAvg * quantitativeWeight);
        return Math.round(overallScore * 10) / 10;
      }

      // Generate conflict resolution insights
      async function generateConflictInsights(transcript, quantitativeScores, qualitativeScores) {
        try {
          const prompt = `Analyze this conflict resolution conversation and provide detailed feedback in this exact format:

STRENGTHS:
• [List 3-4 specific strengths in handling conflict]

AREAS FOR IMPROVEMENT:
• [List 3-4 specific areas to improve in conflict resolution]

RECOMMENDATIONS:
• [List 3-4 actionable recommendations for better conflict management]

Transcript: "${transcript}"

Focus on de-escalation techniques, emotional regulation, empathy, and constructive problem-solving.`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          return data.candidates[0].content.parts[0].text;
        } catch (error) {
          console.error("Error generating insights:", error);
          return `STRENGTHS:
• Attempted to address the conflict directly
• Engaged in the conversation process
• Showed willingness to resolve the issue
• Demonstrated basic communication skills

AREAS FOR IMPROVEMENT:
• Focus on emotional regulation and calm responses
• Practice active listening and validation
• Develop more solution-focused language
• Improve empathy and perspective-taking

RECOMMENDATIONS:
• Practice de-escalation techniques regularly
• Focus on understanding the other person's perspective
• Use "I" statements to express feelings without blame
• Develop a repertoire of conflict resolution strategies`;
        }
      }

      // Display results functions
      function displayResults(results) {
        console.log("🎨 Displaying conflict resolution results:", results);
        
        if (results.transcript) {
          document.getElementById('transcriptContent').innerHTML = `
            <div class="transcript-text">
              ${results.transcript}
            </div>
          `;
        }

        displayDetailedInsights(results.insights, results.overallScore);
        displayQuantitativeMetrics(results.quantitativeScores);
        displayQualitativeMetrics(results.qualitativeScores);
        displayConflictRoadmap(results.insights, results.overallScore);
      }

      function displayDetailedInsights(insights, overallScore) {
        const insightsElement = document.getElementById('detailedAnalysisContent');
        if (!insightsElement || !insights) return;

        const sections = ['STRENGTHS:', 'AREAS FOR IMPROVEMENT:', 'RECOMMENDATIONS:'];
        let insightsHtml = '';

        // Overall Performance Assessment
        let performanceHtml = '';
        let performanceColor = '';
        let performanceIcon = '';
        
        if (overallScore >= 8) {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Strong Conflict Resolution Skills
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              You demonstrate excellent control and awareness during difficult conversations. Your ability to maintain composure while finding solutions sets you apart.
            </p>
            <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(16, 185, 129, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Key Strengths Observed:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Emotional regulation • Active listening • Solution-focused approach • Clear communication under pressure
              </p>
            </div>
          `;
          performanceColor = 'excellent';
          performanceIcon = 'check-circle';
        } else if (overallScore >= 6.5) {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Developing Skills with Clear Potential
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              You show good instincts in conflict situations. With targeted practice in specific areas, you can significantly enhance your effectiveness.
            </p>
            <div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(245, 158, 11, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Focus Areas:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Emotional regulation • Empathy development • Active listening • Solution-oriented thinking
              </p>
            </div>
          `;
          performanceColor = 'good';
          performanceIcon = 'trending-up';
        } else {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Important Growth Opportunity
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              Conflict resolution is a learnable skill. Your current score shows significant room for growth, which means significant potential for improvement.
            </p>
            <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Starting Points:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Breathing techniques • "I" statements • Active listening basics • De-escalation phrases
              </p>
            </div>
          `;
          performanceColor = 'needs-improvement';
          performanceIcon = 'alert-circle';
        }

        insightsHtml += `
          <div class="insight-card-modern performance">
            <div class="insight-header-modern">
              <div class="insight-icon-modern ${performanceColor}">
                <i data-lucide="${performanceIcon}"></i>
              </div>
              <h4 class="insight-title-modern">Overall Assessment</h4>
            </div>
            <div class="insight-content-modern">
              ${performanceHtml}
            </div>
          </div>
        `;

        sections.forEach(section => {
          const match = insights.match(new RegExp(`${section}([\\s\\S]*?)(?=${sections.find(s => s !== section) || '$'})`, 'i'));
          if (match) {
            const content = match[1].trim();
            const title = section.replace(':', '');
            let color = 'var(--primary)';
            let icon = 'lightbulb';
            
            if (section.includes('STRENGTHS')) {
              color = 'var(--success)';
              icon = 'check-circle';
            } else if (section.includes('IMPROVEMENT')) {
              color = 'var(--warning)';
              icon = 'alert-triangle';
            } else if (section.includes('RECOMMENDATIONS')) {
              color = 'var(--primary)';
              icon = 'compass';
            }
            
            insightsHtml += `
              <div class="insight-card-modern">
                <div class="insight-header-modern">
                  <div class="insight-icon-modern" style="background: ${color};">
                    <i data-lucide="${icon}"></i>
                  </div>
                  <h4 class="insight-title-modern">${title}</h4>
                </div>
                <div class="insight-content-modern">
                  ${content.replace(/•/g, '&bull;')}
                </div>
              </div>
            `;
          }
        });

        insightsElement.innerHTML = insightsHtml;
      }

      function displayQuantitativeMetrics(scores) {
        const quantitativeElement = document.getElementById('quantitativeContent');
        if (!quantitativeElement || !scores) return;

        let html = '<div class="metrics-grid">';
        
        Object.entries(scores).forEach(([metric, value]) => {
          const config = conflictMetrics.quantitative[metric] || { optimal: { min: 0, max: 100 } };
          const optimal = config.optimal;
          
          let score;
          if (value >= optimal.min && value <= optimal.max) {
            score = 100;
          } else if (value < optimal.min) {
            score = Math.max(0, 100 - (optimal.min - value) * 2);
          } else {
            score = Math.max(0, 100 - (value - optimal.max) * 2);
          }
          
          score = Math.min(100, Math.max(0, score));
          const scoreColor = score >= 80 ? '#10b981' : score >= 60 ? '#f59e0b' : score >= 40 ? '#ef4444' : '#dc2626';
          
          html += `
            <div class="metric-card">
              <div class="metric-header">
                <span class="metric-name">${metric}</span>
                <span class="metric-score" style="color: ${scoreColor};">${Math.round(score)}/100</span>
              </div>
              <div class="metric-details">
                <div style="font-weight: 500;">Measured: ${value}${getMetricUnit(metric)}</div>
                <div style="color: var(--gray-500);">Optimal: ${optimal.min}-${optimal.max}${getMetricUnit(metric)}</div>
              </div>
              <div class="metric-bar">
                <div class="metric-fill" style="width: ${score}%; background-color: ${scoreColor};"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        quantitativeElement.innerHTML = html;
      }

      function displayQualitativeMetrics(scores) {
        const qualitativeElement = document.getElementById('qualitativeContent');
        if (!qualitativeElement || !scores) return;

        let html = '<div class="categories-grid">';
        
        Object.entries(scores).forEach(([metric, score]) => {
          const config = conflictMetrics.qualitative[metric] || { factors: [] };
          const normalizedScore = (score / 10) * 100;
          const scoreColor = normalizedScore >= 80 ? '#10b981' : normalizedScore >= 60 ? '#f59e0b' : normalizedScore >= 40 ? '#ef4444' : '#dc2626';
          
          html += `
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">${metric}</span>
                <span class="category-score" style="color: ${scoreColor};">${score}/10</span>
              </div>
              <div class="category-factors">
                ${config.factors.map(factor => `<span class="factor-tag">${factor}</span>`).join('')}
              </div>
              <div class="category-bar">
                <div class="category-fill" style="width: ${normalizedScore}%; background-color: ${scoreColor};"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        qualitativeElement.innerHTML = html;
      }

      // Toggle pricing section
      function togglePricingSection() {
        const content = document.getElementById('pricingContent');
        const icon = document.getElementById('pricingToggleIcon');
        const subtitle = document.getElementById('pricingSubtitle');
        const button = document.getElementById('pricingToggleBtn');
        
        if (content.style.display === 'none' || content.style.display === '') {
          // Show content
          content.style.display = 'block';
          setTimeout(() => {
            content.style.opacity = '1';
            content.style.transform = 'translateY(0)';
          }, 10);
          icon.style.transform = 'rotate(180deg)';
          subtitle.textContent = 'Click to collapse pricing options';
          button.style.background = 'var(--voice-primary)';
          button.style.borderColor = 'var(--voice-primary)';
          icon.style.color = 'white';
        } else {
          // Hide content
          content.style.opacity = '0';
          content.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            content.style.display = 'none';
          }, 400);
          icon.style.transform = 'rotate(0deg)';
          subtitle.textContent = 'View Our Improvement Plans';
          button.style.background = 'rgba(255, 255, 255, 0.8)';
          button.style.borderColor = 'rgba(0, 0, 0, 0.1)';
          icon.style.color = 'var(--voice-text-primary)';
        }
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      // Roadmap function no longer needed - replaced with static "Your Next Steps" content
      function displayConflictRoadmap(insights, overallScore) {
        // Function kept for compatibility but no longer used
        return;

        // Parse recommendations from insights
        const recommendationMatch = insights.match(/RECOMMENDATIONS:\s*([\s\S]*?)(?=\n\n|\n[A-Z]|$)/i);
        const recommendationItems = recommendationMatch ? 
          recommendationMatch[1].split('\n').filter(line => line.trim().startsWith('•')).map(line => line.trim()) : [];

        let roadmapHtml = '';

        if (recommendationItems.length >= 3) {
          const top5Recommendations = recommendationItems.slice(0, 5).map(item => 
            item.replace(/^[•\-]\s*/, '').trim()
          );
          
          roadmapHtml = `
            <div style="margin-bottom: 1rem;"><strong>90-Day Conflict Resolution Mastery Plan</strong></div>
            <p>Transform your conflict resolution skills into a superpower with this structured development plan focused on de-escalation, empathy, and solution-building:</p>
            
            <div class="roadmap-phase phase-foundation">
              <div class="phase-title">
                🚀 <strong>Phase 1: Foundation Building (Weeks 1-4)</strong>
              </div>
              <div class="phase-focus">Primary Focus: ${top5Recommendations[0]}</div>
              <div class="phase-actions">
                <strong>Specific Actions:</strong>
                <ul>
                  <li>Practice calm breathing and emotional regulation techniques daily (10 minutes)</li>
                  <li>Identify 2-3 low-stakes conflicts weekly to practice your skills</li>
                  <li>Record yourself practicing difficult conversations and review for improvement</li>
                  <li>Create a personal conflict resolution toolkit with key phrases and strategies</li>
                </ul>
              </div>
              <div class="success-metric"><strong>Success Metric:</strong> Maintain emotional control in 80% of practice conflicts.</div>
            </div>
            
            <div class="roadmap-phase phase-integration">
              <div class="phase-title">
                🎯 <strong>Phase 2: Skill Integration (Weeks 5-8)</strong>
              </div>
              <div class="phase-focus">Primary Focus: ${top5Recommendations[1] || 'Develop active listening and empathy skills'}</div>
              <div class="phase-actions">
                <strong>Specific Actions:</strong>
                <ul>
                  <li>Practice perspective-taking exercises before difficult conversations</li>
                  <li>Use "I" statements and validation techniques in all conflicts</li>
                  <li>Seek feedback from trusted friends or mentors on your conflict approach</li>
                  <li>Join conflict resolution workshops or online training programs</li>
                </ul>
              </div>
              <div class="success-metric"><strong>Success Metric:</strong> Successfully de-escalate 70% of tense situations.</div>
            </div>
            
            <div class="roadmap-phase phase-mastery">
              <div class="phase-title">
                🏆 <strong>Phase 3: Advanced Mastery (Weeks 9-12)</strong>
              </div>
              <div class="phase-focus">Primary Focus: ${top5Recommendations[2] || 'Master solution-focused communication'}</div>
              <div class="phase-actions">
                <strong>Specific Actions:</strong>
                <ul>
                  <li>Tackle increasingly challenging conflicts with confidence</li>
                  <li>Develop your unique conflict resolution style and approach</li>
                  <li>Mentor others in conflict resolution techniques</li>
                  <li>Create a personal conflict resolution case study library</li>
                </ul>
              </div>
              <div class="success-metric"><strong>Success Metric:</strong> Transform 90% of conflicts into collaborative solutions.</div>
            </div>
            
            <div style="background: var(--conflict-light); padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid var(--primary);">
              <div style="font-weight: 600; margin-bottom: 0.5rem;">🔑 Key Success Factors:</div>
              <ul style="margin: 0; padding-left: 1.5rem;">
                <li><strong>Daily Practice:</strong> 15 minutes of focused conflict resolution skill building</li>
                <li><strong>Real-World Application:</strong> Apply techniques in actual conflicts, not just practice</li>
                <li><strong>Reflection & Adjustment:</strong> Weekly review of what worked and what didn't</li>
                <li><strong>Gradual Progression:</strong> Start with easier conflicts and build up to more challenging ones</li>
              </ul>
            </div>
            
            <div style="margin-top: 1rem;"><strong>Implementation Key:</strong> Conflict resolution is a skill that improves with practice. Start with small, manageable conflicts and gradually work up to more challenging situations. Your ability to turn tension into collaboration will develop steadily over the 90-day period.</div>
          `;
        } else {
          roadmapHtml = `
            <p style="color: var(--gray-600); font-style: italic; text-align: center;">
              Your personalized conflict resolution roadmap will appear here based on your analysis results.
            </p>
          `;
        }

        roadmapElement.innerHTML = roadmapHtml;
      }

      function getMetricUnit(metric) {
        const units = {
          'Speech Rate': ' wpm',
          'Talk/Listen Ratio': '%',
          'Filler Words': '',
          'Questions Asked': '',
          'Response Time': 's',
          'Solution Words': '',
          'Conversation Length': 's'
        };
        return units[metric] || '';
      }

      // Copy functions
      function copyAnalysis() {
        const analysisContent = document.getElementById('detailedAnalysisContent');
        if (analysisContent) {
          const textContent = analysisContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'var(--gray-100)';
            btn.style.color = 'var(--gray-600)';
          }, 2000);
        }
      }

      function copyQuantitative() {
        const quantContent = document.getElementById('quantitativeContent');
        if (quantContent) {
          const textContent = quantContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'var(--gray-100)';
            btn.style.color = 'var(--gray-600)';
          }, 2000);
        }
      }

      function copyQualitative() {
        const qualContent = document.getElementById('qualitativeContent');
        if (qualContent) {
          const textContent = qualContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'var(--gray-100)';
            btn.style.color = 'var(--gray-600)';
          }, 2000);
        }
      }

      // Process audio for transcription
      async function processAudioForTranscription(audioDataString) {
        try {
          console.log("🎤 Processing conflict resolution audio for transcription");

          const audioData = JSON.parse(audioDataString);
          console.log("📊 Audio data:", audioData);

          const response = await fetch(audioData.base64);
          const blob = await response.blob();
          const audioFile = new File([blob], audioData.name, { type: audioData.type });

          const transcript = await transcribeAudioWithGemini(audioFile);
          const analysisResults = await analyzeConflictResolution(transcript);

          console.log("✅ Conflict resolution analysis complete:", analysisResults);
          displayResults(analysisResults);

        } catch (error) {
          console.error("❌ Audio processing failed:", error);
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem; background: #fef2f2; border: 2px solid #fca5a5; border-radius: 12px; color: #dc2626;">
              <h3>⚠️ Analysis Failed</h3>
              <p>Unable to process your conflict resolution conversation. Please try again.</p>
              <p style="font-size: 14px; opacity: 0.8;">Error: ${error.message}</p>
            </div>
          `;
        }
      }

              // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
        initializeUnifiedTabSwitching();

        const audioData = sessionStorage.getItem("audioForAnalysis");
        if (audioData) {
          console.log("🎤 Found audio data for conflict resolution analysis");
          processAudioForTranscription(audioData);
          sessionStorage.removeItem("audioForAnalysis");
        } else {
          console.log("❌ No audio data found");
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem;">
              <h3>No Audio Data</h3>
              <p>Please record a conflict resolution conversation first.</p>
              <a href="conflict-resolution-analysis.html" class="back-btn" style="margin-top: 1rem;">
                Start Recording
              </a>
            </div>
          `;
        }

        // User dropdown functionality
        const userMenuBtn = document.getElementById("userMenuBtn");
        const userDropdown = document.getElementById("userDropdown");

        if (userMenuBtn && userDropdown) {
          userMenuBtn.addEventListener("click", (e) => {
            e.preventDefault();
            userDropdown.classList.toggle("hidden");
          });

          // Close dropdown when clicking outside
          document.addEventListener("click", (e) => {
            if (!userMenuBtn.contains(e.target) && !userDropdown.contains(e.target)) {
              userDropdown.classList.add("hidden");
            }
          });

          // Handle logout
          const logoutBtn = document.getElementById("logoutBtn");
          if (logoutBtn) {
            logoutBtn.addEventListener("click", () => {
              // Clear any stored session data
              localStorage.clear();
              sessionStorage.clear();
              
              // Redirect to login page
              window.location.href = "login.html";
            });
          }
        }
      });
    </script>
  </body>
</html>