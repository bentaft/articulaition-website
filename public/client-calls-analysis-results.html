<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="AI-Powered Client & Partner Calls Analysis Results - Articulaition"
    />
    <title>Client & Partner Calls Analysis Results - Articulaition</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/base.css" />

    <style>
      /* ==========================================================================
         CLIENT & PARTNER CALLS ANALYSIS DESIGN SYSTEM
         ========================================================================== */
      :root {
        /* Communication Color Palette - Professional & Trustworthy */
        --voice-primary: #6366f1;
        --voice-secondary: #8b5cf6;
        --voice-accent: #06b6d4;
        --voice-warm: #f59e0b;
        --voice-success: #10b981;
        --voice-neural: #64748b;
        --voice-dark: #2d3748;
        --voice-light: #f7fafc;
        --voice-bg-primary: #fafbfc;
        --voice-bg-secondary: #f4f6f8;
        --voice-glass: rgba(255, 255, 255, 0.85);
        --voice-glass-border: rgba(255, 255, 255, 0.3);
        --voice-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
        --voice-shadow-lg: 0 35px 60px -12px rgba(0, 0, 0, 0.12);
        --voice-text-primary: #1a202c;
        --voice-text-secondary: #4a5568;
        --voice-text-muted: #718096;
        
        /* Client Calls Specific Colors */
        --client-primary: #0891b2;
        --client-secondary: #06b6d4;
        --client-success: #10b981;
        --client-warning: #f59e0b;
        --client-light: rgba(8, 145, 178, 0.05);
        
        /* Typography */
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        
        /* Spacing */
        --space-1: 0.25rem;
        --space-2: 0.5rem;
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-8: 2rem;
        
        /* Radius */
        --radius: 0.75rem;
        --radius-sm: 0.5rem;
        --radius-lg: 1rem;
        
        /* Glass Morphism Shadows */
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      /* ==========================================================================
         BASE STYLES WITH SOPHISTICATED BACKGROUND
         ========================================================================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: var(--font-sans);
        background: linear-gradient(135deg, #fafbfc 0%, #f4f6f8 25%, #edf2f7 50%, #e2e8f0 75%, #cbd5e0 100%);
        color: var(--voice-text-primary);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Background Effects */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 20% 20%, rgba(8, 145, 178, 0.03) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(6, 182, 212, 0.025) 0%, transparent 50%),
          radial-gradient(circle at 20% 80%, rgba(16, 185, 129, 0.02) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(245, 158, 11, 0.015) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      /* Animation Classes */
      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }

      .slide-up {
        animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(30px);
      }

      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      @keyframes fadeIn {
        to { opacity: 1; }
      }
      @keyframes slideUp {
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes scaleIn {
        to { opacity: 1; transform: scale(1); }
      }

      .delay-100 { animation-delay: 0.1s; }
      .delay-200 { animation-delay: 0.2s; }
      .delay-300 { animation-delay: 0.3s; }
      .delay-400 { animation-delay: 0.4s; }
      .delay-500 { animation-delay: 0.5s; }

      /* ==========================================================================
         TOP NAVIGATION WITH GLASS MORPHISM
         ========================================================================== */
      .top-nav {
        padding: 1.5rem 2.5rem;
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--voice-shadow);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo-section img {
        height: 36px;
        filter: none;
        transition: transform 0.3s ease;
      }

      .logo-section:hover img {
        transform: scale(1.05);
      }

      /* Navigation Branding with Shiny Effect */
      .nav-orange {
          background: linear-gradient(
              145deg,
              #ff934d 0%,
              #ffb366 30%,
              #ff7f50 60%,
              #ff934d 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(255, 147, 77, 0.3));
      }

      .nav-blue {
          background: linear-gradient(
              145deg,
              #4a90e2 0%,
              #6bb6ff 30%,
              #4f94e8 60%,
              #4a90e2 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(74, 144, 226, 0.3));
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-link {
        color: var(--voice-text-secondary);
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link.active {
        color: var(--voice-primary);
        background: transparent;
        border: none;
        border-bottom: 2px solid #4a90e2;
        border-radius: 0;
        padding-bottom: 0.4rem;
      }

      .nav-link:hover:not(.active) {
        color: var(--voice-text-primary);
        background: rgba(0, 0, 0, 0.05);
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--client-primary),
          var(--client-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
        color: white;
        text-decoration: none;
        border-radius: 12px;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }

      .back-btn:hover {
        background: linear-gradient(135deg, var(--client-secondary), var(--client-primary));
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      /* ==========================================================================
         MAIN CONTENT LAYOUT
         ========================================================================== */
      .main-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 3rem 2rem;
        position: relative;
        z-index: 2;
      }

      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 2rem;
        color: var(--voice-text-muted);
        font-size: 0.875rem;
      }

      .breadcrumb a {
        color: var(--voice-text-muted);
        text-decoration: none;
      }

      .breadcrumb a:hover {
        color: var(--voice-text-secondary);
      }

      .breadcrumb .current {
        color: var(--voice-text-primary);
        font-weight: 500;
      }

      .page-title-section {
        text-align: center;
        margin-bottom: 3rem;
      }

      .title-with-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .title-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          var(--client-primary),
          var(--client-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .page-description {
        color: var(--voice-text-secondary);
        font-size: 1.125rem;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
      }

      .analysis-container {
        display: grid;
        grid-template-columns: 1fr 600px;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      /* ==========================================================================
         UNIFIED ANALYSIS PANEL WITH GLASS MORPHISM
         ========================================================================== */
      .unified-analysis-panel {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        overflow: hidden;
        height: fit-content;
        min-height: 600px;
        transition: all 0.3s ease;
        position: relative;
      }

      .unified-analysis-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .unified-analysis-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg), 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      .unified-tab-header {
        display: flex;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(15px);
        position: relative;
        z-index: 2;
      }
      
      .unified-tab-btn {
        flex: 1;
        padding: var(--space-4) var(--space-5);
        background: none;
        border: none;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-2);
        border-radius: 12px 12px 0 0;
      }
      
      .unified-tab-btn:hover:not(.active) {
        background: rgba(8, 145, 178, 0.05);
        color: var(--voice-text-primary);
        transform: translateY(-1px);
      }
      
      .unified-tab-btn.active {
        background: rgba(8, 145, 178, 0.1);
        color: var(--client-primary);
        border-bottom: 3px solid var(--client-primary);
        transform: translateY(-1px);
      }

      .unified-tab-btn.active::before {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
        border-radius: 2px 2px 0 0;
      }

      .unified-tab-content {
        padding: var(--space-6);
        height: 450px;
        overflow-y: auto;
        overflow-x: hidden;
        position: relative;
      }

      .unified-tab-content::-webkit-scrollbar {
        width: 6px;
      }

      .unified-tab-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.3);
      }

      .unified-tab-pane {
        display: none;
      }

      .unified-tab-pane.active {
        display: block;
      }

      .panel-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-6);
      }

      .panel-actions h3 {
        margin: 0;
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-primary);
      }

      .copy-btn {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-3);
        background: rgba(255, 255, 255, 0.6);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: var(--radius);
        font-size: 0.875rem;
        color: var(--voice-text-secondary);
        cursor: pointer;
        transition: all 0.2s;
      }

      .copy-btn:hover {
        background: rgba(255, 255, 255, 0.8);
        color: var(--voice-text-primary);
      }

      /* ==========================================================================
         MISSING UTILITY CLASSES
         ========================================================================== */
      .flex { display: flex; }
      .items-center { align-items: center; }
      .gap-3 { gap: 0.75rem; }
      .gap-4 { gap: 1rem; }
      .relative { position: relative; }
      .group:hover .group-hover\\:scale-105 { transform: scale(1.05); }
      .h-9 { height: 2.25rem; }
      .w-auto { width: auto; }
      .font-semibold { font-weight: 600; }
      .text-lg { font-size: 1.125rem; }
      .tracking-tight { letter-spacing: -0.025em; }
      .transition-transform { transition: transform 0.3s ease; }

      .analysis-info {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.25rem;
      }

      .analysis-badge {
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .user-menu-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .user-menu-btn:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-1px);
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      /* ==========================================================================
         PAGE HEADER
         ========================================================================== */
      .page-header {
        background: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        padding: var(--space-4) var(--space-8);
      }
      
      .header-content h1 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: var(--space-2);
      }

      /* ==========================================================================
         MAIN LAYOUT
         ========================================================================== */
      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-8);
      }
      
      /* Score Section at Top with Glass Morphism */
      .score-section {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        padding: var(--space-6) var(--space-8);
        margin-bottom: var(--space-6);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .score-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.02) 0%, transparent 100%);
        pointer-events: none;
      }
      
      .score-header {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-4);
        position: relative;
        z-index: 2;
      }
      
      .score-display {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-6);
      }
      
      .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--client-primary) 0%, var(--client-secondary) 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.25rem;
        font-weight: 800;
        box-shadow: 0 25px 50px -12px rgba(8, 145, 178, 0.4), 0 15px 25px -8px rgba(8, 145, 178, 0.25);
        flex-shrink: 0;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        border: 4px solid rgba(255, 255, 255, 0.3);
        position: relative;
        z-index: 2;
      }

      .score-circle::before {
        content: '';
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        border-radius: 50%;
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.2) 0%, rgba(6, 182, 212, 0.1) 100%);
        z-index: -1;
        transition: all 0.4s ease;
      }
      
      .score-circle:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 35px 70px -12px rgba(8, 145, 178, 0.5), 0 20px 35px -8px rgba(8, 145, 178, 0.35);
      }

      .score-circle:hover::before {
        transform: scale(1.1);
        opacity: 0.8;
      }
      
      .score-details {
        text-align: left;
        position: relative;
        z-index: 2;
      }
      
      .score-label {
        font-size: 1rem;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-2);
        font-weight: 600;
      }
      
      .score-value {
        font-size: 2.5rem;
        font-weight: 800;
        color: var(--voice-text-primary);
        margin-bottom: var(--space-3);
        line-height: 1;
      }
      
      .score-description {
        font-size: 1rem;
        color: var(--voice-text-secondary);
        font-weight: 500;
        padding: var(--space-2) var(--space-4);
        background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        border-radius: 8px;
        border: 1px solid #e2e8f0;
      }
      
      /* Analysis Panels Layout */
      .analysis-panels {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-6);
        height: calc(100vh - 320px);
      }

      /* ==========================================================================
         TRANSCRIPT PANEL WITH GLASS MORPHISM
         ========================================================================== */
      .transcript-panel {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        transition: all 0.3s ease;
        position: relative;
      }

      .transcript-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .transcript-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg), 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      .transcript-header {
        padding: var(--space-5) var(--space-6);
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(15px);
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .transcript-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .transcript-content {
        flex: 1;
        padding: var(--space-6);
        overflow-y: auto;
        position: relative;
        z-index: 2;
      }

      .transcript-text {
        line-height: 1.8;
        color: var(--voice-text-secondary);
        background: var(--client-light);
        padding: var(--space-6);
        border-radius: var(--radius);
        border-left: 4px solid var(--client-primary);
        font-size: 0.95rem;
      }

      /* ==========================================================================
         LOADING STATES
         ========================================================================== */
      .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--space-8);
        color: var(--voice-text-muted);
      }
      
      .spinner {
        width: 24px;
        height: 24px;
        border: 2px solid rgba(8, 145, 178, 0.2);
        border-top: 2px solid var(--client-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: var(--space-3);
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* ==========================================================================
         INSIGHT CARDS
         ========================================================================== */
      .insight-card-modern {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 16px;
        margin-bottom: var(--space-5);
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
      }

      .insight-card-modern:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .insight-header-modern {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-5);
        background: rgba(255, 255, 255, 0.5);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .insight-icon-modern {
        width: 40px;
        height: 40px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
        color: white;
        flex-shrink: 0;
        box-shadow: 0 2px 8px rgba(8, 145, 178, 0.3);
      }

      .insight-icon-modern.excellent {
        background: linear-gradient(135deg, #10b981, #059669);
        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
      }

      .insight-icon-modern.good {
        background: linear-gradient(135deg, #f59e0b, #d97706);
        box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
      }

      .insight-icon-modern.needs-improvement {
        background: linear-gradient(135deg, #ef4444, #dc2626);
        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
      }

      .insight-title-modern {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .insight-content-modern {
        padding: var(--space-5);
        line-height: 1.7;
        color: var(--voice-text-secondary);
      }

      /* ==========================================================================
         METRIC CARDS
         ========================================================================== */
      .metrics-grid {
        display: grid;
        gap: var(--space-4);
      }

      .metric-card {
        background: var(--client-light);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: var(--radius);
        padding: var(--space-4);
        border-left: 4px solid var(--client-primary);
        transition: all 0.2s ease;
      }

      .metric-card:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }

      .metric-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-3);
      }

      .metric-name {
        font-weight: 600;
        color: var(--voice-text-primary);
        font-size: 0.9rem;
      }

      .metric-score {
        font-weight: 600;
        font-size: 0.875rem;
        padding: var(--space-1) var(--space-2);
        border-radius: var(--radius-sm);
        background: white;
      }

      .metric-details {
        margin: var(--space-2) 0;
        font-size: 0.8rem;
        color: var(--voice-text-secondary);
      }

      .metric-bar {
        height: 6px;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
        overflow: hidden;
        margin-top: var(--space-2);
      }

      .metric-fill {
        height: 100%;
        border-radius: 3px;
        transition: width 0.3s ease;
      }

      /* ==========================================================================
         QUALITATIVE CATEGORIES
         ========================================================================== */
      .categories-grid {
        display: grid;
        gap: var(--space-4);
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }

      .category-card {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 12px;
        padding: var(--space-5);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .category-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(135deg, var(--client-primary), var(--client-secondary));
      }

      .category-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.95);
      }

      .category-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-3);
      }

      .category-name {
        font-weight: 600;
        color: var(--voice-text-primary);
        font-size: 0.95rem;
      }

      .category-score {
        font-weight: 700;
        font-size: 1rem;
        padding: var(--space-2) var(--space-3);
        border-radius: 8px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9));
        border: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
      }

      .category-score::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }

      .category-factors {
        margin: var(--space-3) 0;
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-2);
      }

      .factor-tag {
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.08), rgba(6, 182, 212, 0.06));
        color: var(--client-primary);
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid rgba(8, 145, 178, 0.15);
        transition: all 0.2s ease;
        text-transform: capitalize;
        letter-spacing: 0.025em;
      }

      .factor-tag:hover {
        background: linear-gradient(135deg, rgba(8, 145, 178, 0.12), rgba(6, 182, 212, 0.1));
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(8, 145, 178, 0.2);
      }

      .category-bar {
        height: 8px;
        background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        border-radius: 12px;
        overflow: hidden;
        margin-top: var(--space-3);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .category-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
        animation: barShimmer 3s ease-in-out infinite;
      }

      @keyframes barShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      .category-fill {
        height: 100%;
        border-radius: 12px;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        background: linear-gradient(135deg, var(--client-primary) 0%, var(--client-secondary) 50%, var(--voice-success) 100%);
        box-shadow: 0 2px 4px rgba(8, 145, 178, 0.3);
        position: relative;
        overflow: hidden;
      }

      .category-fill::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
        animation: fillShimmer 2s ease-in-out infinite;
      }

      @keyframes fillShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      /* ==========================================================================
         NEXT STEPS SECTION
         ========================================================================== */
      .next-steps-section {
        grid-column: 1 / -1;
        margin-top: var(--space-8);
      }

      .next-steps {
        border-left-color: var(--voice-success) !important;
      }

      .next-steps .insight-icon-modern {
        background: var(--voice-success);
      }

      /* ==========================================================================
         RESPONSIVE DESIGN
         ========================================================================== */
      @media (max-width: 1024px) {
        .analysis-container {
          grid-template-columns: 1fr;
          gap: var(--space-6);
        }
        
        .transcript-panel,
        .unified-analysis-panel {
          height: auto;
          min-height: 400px;
        }
        
        .top-nav {
          padding: var(--space-4) var(--space-5);
        }
        
        .logo-text {
          font-size: 1.25rem;
        }
      }

      @media (max-width: 768px) {
        .analysis-container {
          padding: var(--space-4);
        }
        
        .unified-tab-btn {
          font-size: 0.8rem;
          padding: var(--space-3) var(--space-4);
        }
        
        .unified-tab-btn span {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <!-- Top Navigation -->
    <nav class="top-nav fade-in delay-100">
      <div class="logo-section">
        <a href="index.html" class="flex items-center gap-3 group">
          <img src="images/tree-logo.svg" alt="Tree Logo" class="h-9 w-auto group-hover:scale-105 transition-transform">
          <span class="font-semibold text-lg tracking-tight nav-brand-text">
              <span class="nav-orange">articul</span><span class="nav-blue">ai</span><span class="nav-orange">tion</span><span class="nav-orange">.com</span>
          </span>
        </a>
        <div class="nav-links">
          <a href="dashboard.html" class="nav-link">Home</a>
          <a href="professional-communication.html" class="nav-link active">Professional Communication</a>
          <a href="personal-communication.html" class="nav-link">Personal Communication</a>
          <a href="improvement-hub.html" class="nav-link">Improvement Hub</a>
          <a href="pricing.html" class="nav-link">Pricing</a>
        </div>
      </div>

      <div class="flex items-center gap-4">
        <!-- Analysis Results Info -->
        <div class="analysis-info">
          <span class="analysis-badge" id="analysisTypeBadge">Client Calls Analysis</span>
        </div>
        
        <!-- User Menu -->
        <div class="relative">
          <button class="user-menu-btn" id="userMenuBtn">
            <div class="user-avatar">
              <span id="userInitial">U</span>
            </div>
            <span id="headerUsername">User</span>
            <i data-lucide="chevron-down"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header slide-up delay-200">
      <div class="header-content">
        <h1 id="resultsTitle">Client & Partner Calls Analysis Results</h1>
      </div>
    </header>

    <main class="main-container">
      <!-- Score Section at Top -->
      <div class="score-section scale-in delay-300">
        <div class="score-header">Client Communication Effectiveness Score</div>
        <div class="score-display">
          <div class="score-circle" id="scoreCircle">--</div>
          <div class="score-details">
            <div class="score-label">Client Relationship Mastery</div>
            <div class="score-value" id="scoreText">Analyzing...</div>
            <div class="score-description" id="scoreDescription">
              Evaluating your client communication and relationship building skills...
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Panels Layout -->
      <div class="analysis-panels">
        <!-- Left Panel: Transcript -->
        <div class="transcript-panel slide-up delay-400">
        <div class="transcript-header">
          <i data-lucide="phone" style="color: var(--client-primary);"></i>
          <h2 class="transcript-title">Your Client Call</h2>
        </div>
        <div class="transcript-content">
          <div id="transcriptContent">
            <div class="loading-state">
              <div class="spinner"></div>
              <p>Transcribing your client conversation...</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Right Panel: Unified Analysis with 3 Tabs -->
      <div class="unified-analysis-panel slide-up delay-500">
        <!-- Tab Navigation -->
        <div class="unified-tab-header">
          <button class="unified-tab-btn active" data-tab="insights">
            <i data-lucide="lightbulb"></i>
            <span>Insights</span>
          </button>
          <button class="unified-tab-btn" data-tab="quantitative">
            <i data-lucide="bar-chart-2"></i>
            <span>Quantitative</span>
          </button>
          <button class="unified-tab-btn" data-tab="qualitative">
            <i data-lucide="pie-chart"></i>
            <span>Qualitative</span>
          </button>
          <button class="unified-tab-btn" data-tab="copy-feedback">
            <i data-lucide="copy"></i>
            <span>Copy Feedback</span>
          </button>
        </div>
        
        <!-- Tab Content -->
        <div class="unified-tab-content">
          <!-- Insights Tab -->
          <div class="unified-tab-pane active" id="insights-pane">
            <div class="panel-actions">
              <h3>Client Communication Insights</h3>
              <button class="copy-btn" onclick="copyAnalysis()">
                <i data-lucide="copy"></i>
                Copy Feedback
              </button>
            </div>
            <div id="detailedAnalysisContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Analyzing your client communication patterns...</p>
              </div>
            </div>
          </div>
          
          <!-- Quantitative Tab -->
          <div class="unified-tab-pane" id="quantitative-pane">
            <div class="panel-actions">
              <h3>Client Communication Metrics</h3>
              <button class="copy-btn" onclick="copyQuantitative()">
                <i data-lucide="copy"></i>
                Copy Data
              </button>
            </div>
            <div id="quantitativeContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Measuring client engagement and rapport...</p>
              </div>
            </div>
          </div>
          
          <!-- Qualitative Tab -->
          <div class="unified-tab-pane" id="qualitative-pane">
            <div class="panel-actions">
              <h3>Client Relationship Skills</h3>
              <button class="copy-btn" onclick="copyQualitative()">
                <i data-lucide="copy"></i>
                Copy Analysis
              </button>
            </div>
            <div id="qualitativeContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Evaluating empathy and partnership building...</p>
              </div>
            </div>
          </div>
          
          <!-- Copy Feedback Tab -->
          <div class="unified-tab-pane" id="copy-feedback-pane">
            <div class="panel-actions">
              <h3>Copy Feedback</h3>
              <button class="copy-btn" onclick="copyAllFeedback()">
                <i data-lucide="copy"></i>
                Copy All Feedback
              </button>
            </div>
            <div id="copyFeedbackContent">
              <div class="loading-state">
                <div class="spinner"></div>
                <p>Compiling comprehensive feedback...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Enhanced Next Steps Section -->
      <div class="next-steps-section">
        <div class="insight-card-modern next-steps" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);">
          <div class="insight-header-modern">
            <div class="insight-icon-modern" style="background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); animation: pulse 2s infinite;">
              <i data-lucide="target"></i>
            </div>
            <h3 class="insight-title-modern" style="font-size: 1.5rem; color: var(--voice-text-primary); font-weight: 700;">Your Next Steps</h3>
          </div>
          <div class="insight-content-modern">
            <!-- Hero Message -->
            <div style="margin-bottom: 3rem; text-align: center; padding: 2.5rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
              <div style="max-width: 600px; margin: 0 auto;">
                <h4 style="font-size: 2.25rem; font-weight: 800; background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0 0 1rem 0; line-height: 1.2;">
                  Transform Your Communication
                </h4>
                <p style="color: var(--voice-text-secondary); line-height: 1.8; margin: 0; font-size: 1.125rem; font-weight: 400;">
                  You've unlocked professional insights that transform how you communicate. Choose your growth path and turn these discoveries into <strong style="color: var(--client-primary);">exponential progress</strong>.
                </p>
              </div>
            </div>
            
            
            <!-- Premium Pricing Section -->
            <div style="background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.98)); padding: 2rem; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.8); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.06); backdrop-filter: blur(10px); margin-bottom: 2rem; position: relative; overflow: hidden;">
              
              <!-- Collapsible Header -->
              <div style="position: relative; z-index: 1; cursor: pointer;" onclick="togglePricingSection()">
                <div style="display: flex; align-items: center; justify-content: space-between;">
                  <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255, 255, 255, 0.8); padding: 0.5rem 1rem; border-radius: 50px; border: 1px solid rgba(0, 0, 0, 0.1);">
                      <i data-lucide="rocket" style="width: 16px; height: 16px; color: var(--client-primary);"></i>
                      <span style="font-size: 0.875rem; font-weight: 600; color: var(--client-primary);">Choose Your Growth Path</span>
                    </div>
                    <div>
                      <h4 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0; line-height: 1.2;">Plans Built for Every Stage</h4>
                      <p style="font-size: 0.875rem; color: var(--voice-text-secondary); margin: 0.25rem 0 0 0; font-weight: 400;" id="pricingSubtitle">View Our Improvement Plans</p>
                    </div>
                  </div>
                  <button style="background: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease;" id="pricingToggleBtn" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.boxShadow='none'">
                    <i data-lucide="chevron-down" style="width: 20px; height: 20px; transition: transform 0.3s ease;" id="pricingToggleIcon"></i>
                  </button>
                </div>
              </div>
              
              <!-- Collapsible Content -->
              <div id="pricingContent" style="display: none; opacity: 0; transition: all 0.4s ease; margin-top: 2rem;">
                <p style="font-size: 1rem; color: var(--voice-text-secondary); margin: 0.5rem auto 2rem; font-weight: 400; text-align: center; max-width: 500px;">From first insights to complete mastery—grow at your pace with tools designed for real results.</p>
              
              <!-- Premium Pricing Grid -->
              <div style="position: relative; z-index: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1400px; margin: 0 auto;">
                
                <!-- Essential Plan -->
                <div style="background: white; border: 2px solid rgba(0, 0, 0, 0.06); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(99, 102, 241, 0.15)'; this.style.borderColor='rgba(99, 102, 241, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(0, 0, 0, 0.06)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(99, 102, 241, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="play" style="width: 14px; height: 14px; color: var(--client-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--client-primary); text-transform: uppercase; letter-spacing: 0.5px;">Essential</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Start Your Growth</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Perfect for building steady confidence in how you express yourself.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$9.99</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);">/month</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What's included:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--success-color);"></i>
                        </div>
                        <span>10 detailed audio analyses per month</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--success-color);"></i>
                        </div>
                        <span>Monthly improvement catalog with drills</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="check" style="width: 12px; height: 12px; color: var(--success-color);"></i>
                        </div>
                        <span>Email support</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--client-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);" onmouseover="this.style.background='#5145db'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.35)'" onmouseout="this.style.background='var(--client-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(99, 102, 241, 0.25)'">Get Started</button>
                </div>
                
                <!-- Max Growth Plan -->
                <div style="background: linear-gradient(135deg, white, #fafbff); border: 3px solid var(--client-primary); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; transform: scale(1.05); box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15);" onmouseover="this.style.transform='translateY(-12px) scale(1.08)'; this.style.boxShadow='0 30px 60px rgba(99, 102, 241, 0.25)'" onmouseout="this.style.transform='translateY(0) scale(1.05)'; this.style.boxShadow='0 20px 40px rgba(99, 102, 241, 0.15)'">
                  <!-- Popular Badge -->
                  <div style="position: absolute; top: -1px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.625rem; font-weight: 600; box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3); text-transform: uppercase; letter-spacing: 0.5px;">
                    <i data-lucide="star" style="width: 10px; height: 10px; margin-right: 0.2rem;"></i>Popular
                  </div>
                  
                  <div style="margin-bottom: 2rem; margin-top: 1rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05)); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="zap" style="width: 14px; height: 14px; color: var(--client-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--client-primary); text-transform: uppercase; letter-spacing: 0.5px;">Max Growth</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Complete Transformation</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">For serious communicators ready to unlock their full potential with unlimited practice and expert guidance.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$15.99</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);">/month</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Everything in Essential, plus:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="infinity" style="width: 12px; height: 12px; color: var(--client-primary);"></i>
                        </div>
                        <span><strong>Unlimited</strong> audio analysis</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="users" style="width: 12px; height: 12px; color: var(--client-primary);"></i>
                        </div>
                        <span>Weekly expert review sessions</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="sparkles" style="width: 12px; height: 12px; color: var(--client-primary);"></i>
                        </div>
                        <span>Full access to Improvement Hub</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="clock" style="width: 12px; height: 12px; color: var(--client-primary);"></i>
                        </div>
                        <span>Early access to new tools</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 30px rgba(99, 102, 241, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(99, 102, 241, 0.4)'">Start Free Trial</button>
                </div>
                
                <!-- Enterprise Plan -->
                <div style="background: white; border: 2px solid rgba(107, 114, 128, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(107, 114, 128, 0.15)'; this.style.borderColor='rgba(107, 114, 128, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(107, 114, 128, 0.15)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(107, 114, 128, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="building" style="width: 14px; height: 14px; color: var(--voice-text-primary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--voice-text-primary); text-transform: uppercase; letter-spacing: 0.5px;">Enterprise</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Scale Your Team</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Custom solutions for teams, coaches, and organizations building communication excellence.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">Custom</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);"> pricing</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Enterprise features:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="chart-line" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Custom team dashboards & analytics</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="users-2" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Group metrics & shared insights</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="headphones" style="width: 12px; height: 12px; color: var(--voice-text-primary);"></i>
                        </div>
                        <span>Dedicated support & onboarding</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--voice-text-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(107, 114, 128, 0.25);" onmouseover="this.style.background='#1f2937'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(107, 114, 128, 0.35)'" onmouseout="this.style.background='var(--voice-text-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(107, 114, 128, 0.25)'">Contact Sales</button>
                </div>
                
                <!-- One-Time Plan -->
                <div style="background: white; border: 2px solid rgba(139, 92, 246, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(139, 92, 246, 0.15)'; this.style.borderColor='rgba(139, 92, 246, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(139, 92, 246, 0.15)'">
                  <div style="margin-bottom: 2rem;">
                    <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(139, 92, 246, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                      <i data-lucide="file-text" style="width: 14px; height: 14px; color: var(--client-secondary);"></i>
                      <span style="font-size: 0.75rem; font-weight: 600; color: var(--client-secondary); text-transform: uppercase; letter-spacing: 0.5px;">One-Time</span>
                    </div>
                    <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--voice-text-primary); margin: 0 0 0.5rem 0;">Personal Blueprint</h5>
                    <p style="color: var(--voice-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">A comprehensive communication analysis and personalized improvement plan delivered as a PDF.</p>
                    <div style="margin-bottom: 2rem;">
                      <span style="font-size: 3rem; font-weight: 900; color: var(--voice-text-primary); line-height: 1;">$30</span>
                      <span style="font-size: 1rem; font-weight: 500; color: var(--voice-text-secondary);"> one-time</span>
                    </div>
                  </div>
                  
                  <div style="margin-bottom: 2rem;">
                    <div style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What you get:</div>
                    <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="search" style="width: 12px; height: 12px; color: var(--client-secondary);"></i>
                        </div>
                        <span>Deep analysis of vocal patterns & delivery</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="target" style="width: 12px; height: 12px; color: var(--client-secondary);"></i>
                        </div>
                        <span>Targeted breakdown of specific issues</span>
                      </li>
                      <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--voice-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                        <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                          <i data-lucide="download" style="width: 12px; height: 12px; color: var(--client-secondary);"></i>
                        </div>
                        <span>Lifetime PDF access—yours forever</span>
                      </li>
                    </ul>
                  </div>
                  
                  <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--client-secondary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);" onmouseover="this.style.background='#7c3aed'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(139, 92, 246, 0.35)'" onmouseout="this.style.background='var(--client-secondary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.25)'">Get My Report</button>
                </div>
                
              </div>
              
              </div>
            </div>
            
            <!-- Enhanced Action Section -->
            <div style="margin-top: 3rem; text-align: center; padding: 3rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
              <div style="max-width: 600px; margin: 0 auto 2rem;">
                <h4 style="font-size: 1.5rem; font-weight: 700; color: var(--voice-text-primary); margin: 0 0 0.75rem 0;">Ready to Continue Your Growth?</h4>
                <p style="color: var(--voice-text-secondary); line-height: 1.6; margin: 0; font-size: 1rem;">Keep building on these insights or explore more tools to accelerate your communication mastery.</p>
              </div>
              
              <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; max-width: 500px; margin: 0 auto;">
                <button onclick="window.location.href='client-calls-analysis.html'" 
                  style="background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); flex: 1; min-width: 200px;"
                  onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.4)'"
                  onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)'">
                  <i data-lucide="mic" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                  Practice Again
                </button>
                <button onclick="window.location.href='improvement-hub.html'" 
                  style="background: white; color: var(--client-primary); border: 2px solid var(--client-primary); padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; flex: 1; min-width: 200px;"
                  onmouseover="this.style.background='var(--client-primary)'; this.style.color='white'; this.style.transform='translateY(-2px)'"
                  onmouseout="this.style.background='white'; this.style.color='var(--client-primary)'; this.style.transform='translateY(0)'">
                  <i data-lucide="sparkles" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                  Explore Improvement Hub
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      // CRITICAL: Set up Gemini API key for transcription
      window.GEMINI_API_KEY = "AIzaSyBGvwarFw2FbxgxOMnFchyji6G-zYkrgV8";
      console.log("🔑 Gemini API key configured for client calls analysis");

      // Toggle pricing section
      function togglePricingSection() {
        const content = document.getElementById('pricingContent');
        const icon = document.getElementById('pricingToggleIcon');
        const subtitle = document.getElementById('pricingSubtitle');
        const button = document.getElementById('pricingToggleBtn');
        
        if (content.style.display === 'none' || content.style.display === '') {
          // Show content
          content.style.display = 'block';
          setTimeout(() => {
            content.style.opacity = '1';
            content.style.transform = 'translateY(0)';
          }, 10);
          icon.style.transform = 'rotate(180deg)';
          subtitle.textContent = 'Click to collapse pricing options';
          button.style.background = 'var(--client-primary)';
          button.style.borderColor = 'var(--client-primary)';
          icon.style.color = 'white';
        } else {
          // Hide content
          content.style.opacity = '0';
          content.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            content.style.display = 'none';
          }, 400);
          icon.style.transform = 'rotate(0deg)';
          subtitle.textContent = 'View Our Improvement Plans';
          button.style.background = 'rgba(255, 255, 255, 0.8)';
          button.style.borderColor = 'rgba(0, 0, 0, 0.1)';
          icon.style.color = 'var(--voice-text-primary)';
        }
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      // Client & Partner Calls Analysis Metrics Configuration
      const clientCallsMetrics = {
        quantitative: {
          'Empathy Phrase Density': { 
            weight: 0.25, 
            optimal: { min: 10, max: 15 }, 
            description: '% of phrases like "That makes sense" or "I hear you." Ideal: ≥10%',
            unit: '%'
          },
          'Open-Ended Prompt Usage': { 
            weight: 0.2, 
            optimal: { min: 50, max: 70 }, 
            description: '% of questions beginning with "How," "What," "Why." Ideal: ≥50%',
            unit: '%'
          },
          'Clarity Phrase Count': { 
            weight: 0.15, 
            optimal: { min: 1, max: 2 }, 
            description: 'Phrases like "To clarify," "Let me break that down." Ideal: ≥1 every 60s',
            unit: ' per minute'
          },
          'Professional Tone Score': { 
            weight: 0.2, 
            optimal: { min: 0.75, max: 1.0 }, 
            description: 'AI-acoustic model: Confidence + warmth balance. Ideal: Score ≥ 0.75/1.0',
            unit: ''
          },
          'Engagement Framing Presence': { 
            weight: 0.2, 
            optimal: { min: 3, max: 6 }, 
            description: 'Presence of "Would you agree?" or "I\'d love your thoughts."',
            unit: ' occurrences'
          }
        },
        qualitative: {
          'Empathy & Rapport-Building': { 
            weight: 0.25, 
            factors: ['active listening', 'emotional validation', 'shared understanding', 'trust establishment'] 
          },
          'Consultative Presence': { 
            weight: 0.25, 
            factors: ['strategic thinking', 'advisory positioning', 'value articulation', 'partnership mindset'] 
          },
          'Listening & Engagement Signals': { 
            weight: 0.2, 
            factors: ['reflective responses', 'thoughtful pauses', 'understanding checks', 'engagement prompts'] 
          },
          'Clarity of Insight or Recommendation': { 
            weight: 0.15, 
            factors: ['clear recommendations', 'structured thinking', 'actionable insights', 'priority alignment'] 
          },
          'Tone Adaptability': { 
            weight: 0.15, 
            factors: ['situational awareness', 'client style matching', 'emotional intelligence', 'relationship sensitivity'] 
          }
        }
      };

      // Unified tab switching functionality
      function initializeUnifiedTabSwitching() {
        const tabButtons = document.querySelectorAll('.unified-tab-btn');
        const tabPanes = document.querySelectorAll('.unified-tab-pane');
        
        tabButtons.forEach(button => {
          button.addEventListener('click', () => {
            const targetTab = button.dataset.tab;
            
            // Update active tab button
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Update active tab pane
            tabPanes.forEach(pane => pane.classList.remove('active'));
            document.getElementById(targetTab + '-pane').classList.add('active');
          });
        });
      }

      // Transcribe audio using Gemini AI
      async function transcribeAudioWithGemini(audioFile) {
        try {
          console.log("🎤 Transcribing client call audio with Gemini...");
          
          // Get API key from config
          const apiKey = window.API_CONFIG?.gemini || window.GEMINI_API_KEY;
          if (!apiKey || apiKey === 'YOUR_GEMINI_API_KEY_HERE') {
            throw new Error("Gemini API key not configured");
          }
          
          const arrayBuffer = await audioFile.arrayBuffer();
          const base64Audio = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [
                  {
                    text: "Please transcribe this client call audio file accurately. Return only the transcribed text without any additional commentary."
                  },
                  {
                    inline_data: {
                      mime_type: audioFile.type,
                      data: base64Audio
                    }
                  }
                ]
              }],
              generationConfig: {
                temperature: 0.1,
                maxOutputTokens: 8000,
                topP: 0.8,
                topK: 40
              }
            })
          });

          // Check for HTTP errors
          if (!response.ok) {
            const errorText = await response.text();
            console.error(`❌ Gemini API error: ${response.status} - ${response.statusText}`, errorText);
            
            // Handle specific error cases with better messaging
            if (response.status === 503) {
              console.log("🔄 Gemini service temporarily unavailable, using fallback demo transcript");
              return getDemoTranscript();
            } else if (response.status === 429) {
              throw new Error("Rate limit exceeded. Please try again in a few minutes.");
            } else if (response.status === 401 || response.status === 403) {
              throw new Error("API authentication error. Please check your Gemini API configuration.");
            } else if (response.status === 400) {
              throw new Error("Invalid request format. Please check your audio file.");
            } else {
              console.log(`🔄 Gemini API error (${response.status}), using fallback demo transcript`);
              return getDemoTranscript();
            }
          }

          const data = await response.json();
          
          if (data.candidates && data.candidates[0] && data.candidates[0].content) {
            const transcript = data.candidates[0].content.parts[0].text;
            console.log("✅ Client call transcription successful");
            return transcript;
          } else {
            console.error("❌ Invalid Gemini API response structure:", data);
            throw new Error("No transcription received from Gemini");
          }
        } catch (error) {
          console.error("❌ Transcription error:", error);
          
          // Provide fallback demo transcript for development/testing
          if (error.message.includes("503") || error.message.includes("service unavailable")) {
            console.log("🔄 Providing fallback demo transcript due to service unavailability");
            return getDemoTranscript();
          }
          
          throw new Error(`Transcription failed: ${error.message}`);
        }
      }

      // Fallback demo transcript for client calls
      function getDemoTranscript() {
        return `Hi Sarah, thank you so much for taking the time to meet with me today. I know how busy your schedule is, especially with the product launch approaching, so I really appreciate you making this a priority.

I wanted to start by understanding where things stand with the marketing campaign we discussed last month. How are you feeling about the current strategy, and what's been on your mind as we move forward?

That's really insightful, Sarah. I can hear the excitement in your voice about the potential, and I also understand your concerns about the timeline. Let me make sure I'm understanding this correctly - you're feeling confident about the creative direction, but you're worried about whether we can execute everything at the quality level you need within the compressed timeframe. Is that accurate?

Absolutely, that makes complete sense. Quality is non-negotiable, especially for a launch of this magnitude. I've actually been thinking about this exact challenge since our last conversation, and I have a few ideas that might help us maintain the quality while working within your timeline constraints.

What if we approached this in phases? Instead of trying to launch everything simultaneously, we could prioritize the highest-impact elements for the initial launch and then roll out the additional components over the following weeks. This would allow us to focus our resources and attention on getting the core campaign absolutely perfect.

I'm glad that resonates with you. Here's what I'm thinking specifically: We could focus on your digital advertising and email campaigns for the launch week, since those have the highest conversion potential based on your past campaigns. Then we could follow up with the content marketing and social media expansion in weeks two and three.

This approach would also give us the flexibility to incorporate feedback from the initial launch, which could actually make the later components even more effective. What are your thoughts on that strategy?

That's exactly right. And honestly, this kind of phased approach often performs better than trying to do everything at once. It allows your audience to digest the messaging and creates multiple touchpoints for engagement.

I also want to address your concern about budget allocation. With this phased approach, we can actually optimize spending based on real performance data from the first phase, which typically leads to better overall ROI.

Would it be helpful if I put together a detailed timeline showing exactly how this would work? I could have that to you by tomorrow afternoon, along with some budget scenarios that show how we could reallocate resources for maximum impact.

Perfect. I'll get that analysis to you by 2 PM tomorrow. And Sarah, I want you to know that I'm completely committed to making this launch a success. Your vision for this product is compelling, and I believe we can absolutely achieve your goals with the right strategic approach.

Is there anything else on your mind about the campaign that we should discuss today? I want to make sure we're addressing all your concerns and that you feel completely confident moving forward.

Excellent. I'll include that competitive analysis in tomorrow's report as well. Thank you again for your trust in this partnership, Sarah. I'll talk to you tomorrow afternoon after you've had a chance to review everything.`;
      }

      // Analyze client calls using specific metrics
      async function analyzeClientCall(transcript) {
        try {
          console.log("🧠 Analyzing client call...");
          
          const quantitativeScores = await calculateQuantitativeMetrics(transcript, clientCallsMetrics.quantitative);
          const qualitativeScores = await calculateQualitativeMetrics(transcript, clientCallsMetrics.qualitative);
          const overallScore = calculateOverallScore(quantitativeScores, qualitativeScores);
          const insights = await generateClientCallInsights(transcript, quantitativeScores, qualitativeScores);
          
          return {
            transcript: transcript,
            analysisType: "client_calls",
            quantitativeScores: quantitativeScores,
            qualitativeScores: qualitativeScores,
            overallScore: overallScore,
            insights: insights
          };
        } catch (error) {
          console.error("❌ Client call analysis error:", error);
          throw new Error(`Analysis failed: ${error.message}`);
        }
      }

      // Calculate quantitative metrics for client calls
      async function calculateQuantitativeMetrics(transcript, quantitativeConfig) {
        if (!transcript || typeof transcript !== 'string') {
          console.error('Invalid transcript provided to calculateQuantitativeMetrics');
          return {};
        }
        
        const words = transcript.split(/\s+/).filter(word => word.length > 0);
        const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
        const totalPhrases = sentences.length; // Count each sentence as a potential phrase
        
        // Estimate duration in minutes (average speaking rate ~150-180 words/minute)
        const estimatedMinutes = words.length / 165;
        
        // Extract all questions from transcript
        const questions = transcript.match(/[^.!?]*\?/g) || [];
        
        const metrics = {};
        
        // Empathy Phrase Density (% of total phrases)
        const empathyPhrases = [
          'that makes sense', 'i hear you', 'i understand', 'i appreciate', 
          'i can see', 'i get it', 'absolutely', 'of course', 'i hear what you\'re saying',
          'that must be', 'i can imagine', 'thank you for sharing', 'i value'
        ];
        const empathyCount = empathyPhrases.reduce((count, phrase) => {
          return count + (transcript.toLowerCase().match(new RegExp(phrase, 'g')) || []).length;
        }, 0);
        metrics['Empathy Phrase Density'] = totalPhrases > 0 ? Math.round((empathyCount / totalPhrases) * 100 * 10) / 10 : 0;
        
        // Open-Ended Prompt Usage (% of questions that are open-ended)
        const openEndedStarters = ['how', 'what', 'why', 'could you', 'would you', 'can you tell', 'help me understand'];
        const openEndedQuestions = questions.filter(q => {
          const lowerQ = q.toLowerCase().trim();
          return openEndedStarters.some(starter => lowerQ.startsWith(starter));
        }).length;
        metrics['Open-Ended Prompt Usage'] = questions.length > 0 ? Math.round((openEndedQuestions / questions.length) * 100) : 0;
        
        // Clarity Phrase Count (per minute)
        const clarityPhrases = [
          'to clarify', 'let me break that down', 'let me make sure', 'so what i\'m hearing',
          'in other words', 'to summarize', 'the key point is', 'if i understand correctly',
          'let me explain', 'to put it simply'
        ];
        const clarityCount = clarityPhrases.reduce((count, phrase) => {
          return count + (transcript.toLowerCase().match(new RegExp(phrase, 'g')) || []).length;
        }, 0);
        metrics['Clarity Phrase Count'] = estimatedMinutes > 0 ? Math.round((clarityCount / estimatedMinutes) * 10) / 10 : 0;
        
        // Professional Tone Score (0-1 scale based on acoustic model simulation)
        // Simulate based on professional language, structure, and confidence markers
        const professionalMarkers = {
          confidence: ['certainly', 'definitely', 'absolutely', 'i recommend', 'based on my experience', 'the data shows'],
          warmth: ['happy to', 'pleased to', 'delighted', 'appreciate', 'thank you', 'great question'],
          structure: ['first', 'second', 'finally', 'in summary', 'to begin with', 'moving forward']
        };
        
        let confidenceScore = 0;
        let warmthScore = 0;
        
        professionalMarkers.confidence.forEach(marker => {
          confidenceScore += (transcript.toLowerCase().match(new RegExp(marker, 'g')) || []).length;
        });
        professionalMarkers.warmth.forEach(marker => {
          warmthScore += (transcript.toLowerCase().match(new RegExp(marker, 'g')) || []).length;
        });
        
        // Normalize scores and balance them
        const normalizedConfidence = Math.min(1, confidenceScore / (sentences.length * 0.1));
        const normalizedWarmth = Math.min(1, warmthScore / (sentences.length * 0.1));
        metrics['Professional Tone Score'] = Math.round(((normalizedConfidence + normalizedWarmth) / 2) * 100) / 100;
        
        // Engagement Framing Presence (count of collaborative phrases)
        const engagementFrames = [
          'would you agree', 'i\'d love your thoughts', 'what do you think', 'does that resonate',
          'how does that sound', 'from your perspective', 'in your experience', 'what\'s your take'
        ];
        metrics['Engagement Framing Presence'] = engagementFrames.reduce((count, frame) => {
          return count + (transcript.toLowerCase().match(new RegExp(frame, 'g')) || []).length;
        }, 0);
        
        return metrics;
      }

      // Calculate qualitative metrics using AI analysis
      async function calculateQualitativeMetrics(transcript, qualitativeConfig) {
        if (!transcript || typeof transcript !== 'string') {
          console.error('Invalid transcript provided to calculateQualitativeMetrics');
          return {};
        }
        
        if (!qualitativeConfig || typeof qualitativeConfig !== 'object') {
          console.error('Invalid qualitativeConfig provided');
          return {};
        }
        
        try {
          // Detect the call scenario to provide contextual analysis
          const callType = detectCallScenario(transcript);
          
          const prompt = `You are an expert client relationship consultant analyzing a professional client call transcript. Focus on relationship building mastery, consultative approach excellence, listening skills, and professional service delivery.

Analyze this client call transcript for professional client relationship skills. This appears to be a ${callType} call. Rate each factor from 1-10:

Empathy & Rapport-Building: Evaluate active listening mastery, emotional validation techniques, shared understanding creation, trust establishment strategies, and authentic connection building
Consultative Presence: Evaluate strategic thinking demonstration, advisory positioning effectiveness, value articulation clarity, partnership mindset cultivation, and expert credibility establishment
Listening & Engagement Signals: Evaluate reflective response quality, thoughtful pause utilization, understanding verification techniques, engagement prompts effectiveness, and client-centered communication
Clarity of Insight or Recommendation: Evaluate recommendation clarity, structured thinking presentation, actionable insight delivery, priority alignment demonstration, and solution-oriented guidance
Tone Adaptability: Evaluate situational awareness, client communication style matching, emotional intelligence application, relationship sensitivity, and professional adaptability

Consider the ${callType} context and adjust expectations accordingly:
- Discovery calls should demonstrate exceptional questioning techniques, deep listening skills, and information gathering mastery
- Advisory calls should showcase expertise demonstration, strategic thinking, and value-driven consultation
- Escalation calls require empathy excellence, problem-solving capabilities, and relationship recovery skills
- Renewal/Expansion calls need relationship depth demonstration, value reinforcement, and strategic partnership building

Transcript: "${transcript}"

Evaluate against professional client service standards and consultative communication excellence benchmarks.

Provide scores in this exact format:
Empathy & Rapport-Building: [score 1-10]
Consultative Presence: [score 1-10]
Listening & Engagement Signals: [score 1-10]
Clarity of Insight or Recommendation: [score 1-10]
Tone Adaptability: [score 1-10]`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          
          if (!data.candidates || !data.candidates[0] || !data.candidates[0].content || !data.candidates[0].content.parts || !data.candidates[0].content.parts[0]) {
            console.error('Invalid response structure from Gemini API:', data);
            throw new Error('Invalid API response structure');
          }
          
          const analysisText = data.candidates[0].content.parts[0].text;
          
          const scores = {};
          Object.keys(qualitativeConfig).forEach(metric => {
            const match = analysisText.match(new RegExp(`${metric}:\\s*(\\d+)`, 'i'));
            scores[metric] = match ? parseInt(match[1]) : 7; // Default client calls score of 7/10
          });
          
          return scores;
        } catch (error) {
          console.error("Error calculating qualitative metrics:", error);
          
          // Provide client calls-specific default scores
          const defaultScores = {
            'Empathy & Rapport-Building': 7,
            'Consultative Presence': 6,
            'Listening & Engagement Signals': 7,
            'Clarity of Insight or Recommendation': 6,
            'Tone Adaptability': 7
          };
          
          console.log("🔄 Using default client calls scores due to API error");
          return defaultScores;
        }
      }
      
      // Detect the type of client call scenario
      function detectCallScenario(transcript) {
        const lowerTranscript = transcript.toLowerCase();
        
        // Discovery indicators
        const discoveryKeywords = ['tell me about', 'help me understand', 'current situation', 'challenges', 'goals', 'exploring'];
        const discoveryScore = discoveryKeywords.reduce((score, keyword) => {
          return score + (lowerTranscript.includes(keyword) ? 1 : 0);
        }, 0);
        
        // Advisory indicators
        const advisoryKeywords = ['recommend', 'strategy', 'approach', 'solution', 'best practice', 'based on my experience'];
        const advisoryScore = advisoryKeywords.reduce((score, keyword) => {
          return score + (lowerTranscript.includes(keyword) ? 1 : 0);
        }, 0);
        
        // Escalation indicators
        const escalationKeywords = ['issue', 'problem', 'concern', 'frustrated', 'disappointed', 'resolution'];
        const escalationScore = escalationKeywords.reduce((score, keyword) => {
          return score + (lowerTranscript.includes(keyword) ? 1 : 0);
        }, 0);
        
        // Renewal/Expansion indicators
        const renewalKeywords = ['renewal', 'expand', 'additional', 'continue', 'partnership', 'relationship'];
        const renewalScore = renewalKeywords.reduce((score, keyword) => {
          return score + (lowerTranscript.includes(keyword) ? 1 : 0);
        }, 0);
        
        // Strategic indicators
        const strategicKeywords = ['strategic', 'long-term', 'vision', 'roadmap', 'planning', 'future'];
        const strategicScore = strategicKeywords.reduce((score, keyword) => {
          return score + (lowerTranscript.includes(keyword) ? 1 : 0);
        }, 0);
        
        // Determine the most likely scenario
        const scores = {
          'Discovery': discoveryScore,
          'Advisory': advisoryScore,
          'Escalation': escalationScore,
          'Renewal': renewalScore,
          'Strategic': strategicScore
        };
        
        const maxScore = Math.max(...Object.values(scores));
        const scenario = Object.keys(scores).find(key => scores[key] === maxScore);
        
        return scenario || 'General Client';
      }

      // Calculate overall score
      function calculateOverallScore(quantitativeScores, qualitativeScores) {
        if (!quantitativeScores || !qualitativeScores) {
          console.error('Invalid scores provided to calculateOverallScore');
          return 7; // Default client calls score
        }
        
        const qualitativeWeight = 0.7; // Higher weight on qualitative for client relationships
        const quantitativeWeight = 0.3;
        
        const qualitativeValues = Object.values(qualitativeScores);
        if (qualitativeValues.length === 0) {
          console.error('No qualitative scores available');
          return 7;
        }
        
        const qualitativeAvg = qualitativeValues.reduce((a, b) => a + b, 0) / qualitativeValues.length;
        
        // Calculate quantitative average from actual metrics
        const quantitativeMetrics = Object.entries(quantitativeScores).map(([metric, value]) => {
          const config = clientCallsMetrics.quantitative && clientCallsMetrics.quantitative[metric];
          if (!config) return 7; // Default score
          
          const { optimal } = config;
          // Score based on how close to optimal range
          if (value >= optimal.min && value <= optimal.max) {
            return 9; // Excellent score for client calls
          } else if (value < optimal.min) {
            return Math.max(4, 9 - ((optimal.min - value) / optimal.min) * 5);
          } else {
            return Math.max(4, 9 - ((value - optimal.max) / optimal.max) * 5);
          }
        });
        
        const quantitativeAvg = quantitativeMetrics.length > 0 ? quantitativeMetrics.reduce((a, b) => a + b, 0) / quantitativeMetrics.length : 7;
        
        const overallScore = (qualitativeAvg * qualitativeWeight + quantitativeAvg * quantitativeWeight);
        return Math.round(overallScore * 10) / 10;
      }

      // Generate client call insights
      async function generateClientCallInsights(transcript, quantitativeScores, qualitativeScores) {
        if (!transcript || typeof transcript !== 'string') {
          console.error('Invalid transcript provided to generateClientCallInsights');
          return 'Unable to generate insights - invalid transcript data';
        }
        
        try {
          const callType = detectCallScenario(transcript);
          
          const scenarioContext = {
            'Discovery': 'Focus on questioning techniques, active listening, and understanding client needs.',
            'Advisory': 'Emphasize strategic thinking, expertise positioning, and value articulation.',
            'Escalation': 'Prioritize empathy, problem-solving, and relationship repair.',
            'Renewal': 'Highlight relationship depth, value demonstration, and partnership growth.',
            'Strategic': 'Focus on long-term thinking, vision alignment, and strategic partnership.',
            'General Client': 'Focus on overall relationship building and professional communication.'
          };
          
          const prompt = `You are an expert client relationship consultant providing detailed feedback on this ${callType} client call transcript. Focus on relationship building excellence, consultative approach mastery, and professional service delivery.

Analyze this ${callType} client call and provide detailed feedback in this exact format:

STRENGTHS:
• [List 3-4 specific strengths in client relationship building, consultative communication, listening skills, or professional service delivery]

AREAS FOR IMPROVEMENT:
• [List 3-4 specific areas to improve for enhanced client relationships, better consultative presence, or more effective service delivery]

RECOMMENDATIONS:
• [List 3-4 actionable recommendations for elevated client communication, stronger relationships, and improved consultative effectiveness]

COMMUNICATION INSIGHTS:
• [List 2-3 specific insights about communication patterns and relationship dynamics]

Transcript: "${transcript}"

${scenarioContext[callType]} Focus on empathy mastery, active listening excellence, consultative approach sophistication, trust building strategies, and professional client relationship management. Consider rapport building techniques, value demonstration effectiveness, and strategic partnership development specific to ${callType} scenarios.

Provide insights specifically relevant to client relationship building, consultative communication, and professional service delivery excellence.`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          
          if (!data.candidates || !data.candidates[0] || !data.candidates[0].content || !data.candidates[0].content.parts || !data.candidates[0].content.parts[0]) {
            console.error('Invalid response structure from Gemini API:', data);
            throw new Error('Invalid API response structure');
          }
          
          return data.candidates[0].content.parts[0].text;
        } catch (error) {
          console.error("Error generating insights:", error);
          console.log("🔄 Using default client call insights due to API error");
          return `STRENGTHS:
• Demonstrated professional approach to client communication
• Maintained respectful and courteous tone throughout conversation
• Showed willingness to engage with client needs and concerns
• Displayed basic understanding of client relationship principles

AREAS FOR IMPROVEMENT:
• Enhance empathy and emotional connection with clients
• Develop stronger active listening and reflection techniques
• Improve consultative presence and advisory positioning
• Strengthen ability to provide clear, actionable insights

RECOMMENDATIONS:
• Practice empathetic language and validation techniques like "That makes sense" and "I hear you"
• Work on asking more open-ended questions beginning with "How," "What," "Why"
• Focus on summarizing and clarifying client statements more frequently
• Develop expertise positioning through strategic recommendations and insights

COMMUNICATION INSIGHTS:
• Client relationships thrive on authentic listening and genuine empathy
• Consultative presence requires balancing expertise with collaborative partnership
• Engagement framing helps clients feel heard and valued in the conversation`;
        }
      }

      // Display results functions
      function displayResults(results) {
        console.log("🎨 Displaying client call results:", results);
        
        if (results.transcript) {
          document.getElementById('transcriptContent').innerHTML = `
            <div class="transcript-text">
              ${results.transcript}
            </div>
          `;
        }

        displayDetailedInsights(results.insights, results.overallScore);
        displayQuantitativeMetrics(results.quantitativeScores);
        displayQualitativeMetrics(results.qualitativeScores);
        displayCopyFeedback(results);
      }

      function displayDetailedInsights(insights, overallScore) {
        const insightsElement = document.getElementById('detailedAnalysisContent');
        if (!insightsElement || !insights) return;

        const sections = ['STRENGTHS:', 'AREAS FOR IMPROVEMENT:', 'RECOMMENDATIONS:', 'COMMUNICATION INSIGHTS:'];
        let insightsHtml = '';

        // Overall Performance Assessment
        let performanceHtml = '';
        let performanceColor = '';
        let performanceIcon = '';
        
        if (overallScore >= 8) {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Exceptional Client Relationship Skills
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              You demonstrate outstanding client communication abilities with excellent empathy, active listening, and consultative presence. Your natural ability to build trust and provide value creates strong, lasting partnerships.
            </p>
            <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(16, 185, 129, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Key Strengths Observed:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Deep empathy • Active listening • Consultative approach • Trust building excellence
              </p>
            </div>
          `;
          performanceColor = 'excellent';
          performanceIcon = 'check-circle';
        } else if (overallScore >= 6.5) {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Strong Client Relations Foundation
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              You show solid client communication fundamentals with clear opportunities for enhancement. With focused practice on empathy and consultative skills, you can build truly exceptional client relationships.
            </p>
            <div style="background: rgba(245, 158, 11, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(245, 158, 11, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Focus Areas:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Empathy enhancement • Active listening • Consultative presence • Relationship depth
              </p>
            </div>
          `;
          performanceColor = 'good';
          performanceIcon = 'trending-up';
        } else {
          performanceHtml = `
            <div style="margin-bottom: 1.5rem;">
              <span style="display: inline-block; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 0.5rem 1rem; border-radius: 8px; font-weight: 600; font-size: 0.875rem;">
                Score: ${Math.round(overallScore * 10)}/100
              </span>
            </div>
            <h4 style="font-size: 1.25rem; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
              Strong Foundation for Client Success
            </h4>
            <p style="color: var(--voice-text-secondary); line-height: 1.7; margin-bottom: 1.5rem;">
              Client relationship skills are highly learnable, and you've taken the important first step by seeking feedback. With dedicated practice and the right techniques, you can develop into a trusted client advisor.
            </p>
            <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.2);">
              <p style="font-weight: 600; color: var(--voice-text-primary); margin-bottom: 0.5rem;">Building Blocks:</p>
              <p style="color: var(--voice-text-secondary); margin: 0;">
                Empathy development • Listening skills • Question techniques • Trust building basics
              </p>
            </div>
          `;
          performanceColor = 'needs-improvement';
          performanceIcon = 'alert-circle';
        }

        insightsHtml += `
          <div class="insight-card-modern performance">
            <div class="insight-header-modern">
              <div class="insight-icon-modern ${performanceColor}">
                <i data-lucide="${performanceIcon}"></i>
              </div>
              <h4 class="insight-title-modern">Overall Assessment</h4>
            </div>
            <div class="insight-content-modern">
              ${performanceHtml}
            </div>
          </div>
        `;

        sections.forEach(section => {
          const match = insights.match(new RegExp(`${section}([\\s\\S]*?)(?=${sections.find(s => s !== section) || '$'})`, 'i'));
          if (match) {
            const content = match[1].trim();
            const title = section.replace(':', '');
            let color = 'var(--client-primary)';
            let icon = 'lightbulb';
            
            if (section.includes('STRENGTHS')) {
              color = 'var(--voice-success)';
              icon = 'check-circle';
            } else if (section.includes('IMPROVEMENT')) {
              color = 'var(--voice-warm)';
              icon = 'alert-triangle';
            } else if (section.includes('RECOMMENDATIONS')) {
              color = 'var(--client-primary)';
              icon = 'compass';
            } else if (section.includes('COMMUNICATION INSIGHTS')) {
              color = 'var(--voice-secondary)';
              icon = 'brain';
            }
            
            insightsHtml += `
              <div class="insight-card-modern">
                <div class="insight-header-modern">
                  <div class="insight-icon-modern" style="background: ${color};">
                    <i data-lucide="${icon}"></i>
                  </div>
                  <h4 class="insight-title-modern">${title}</h4>
                </div>
                <div class="insight-content-modern">
                  ${content.replace(/•/g, '&bull;')}
                </div>
              </div>
            `;
          }
        });

        insightsElement.innerHTML = insightsHtml;

        // Update score display
        document.getElementById('scoreCircle').textContent = Math.round(overallScore * 10);
        document.getElementById('scoreText').textContent = `${Math.round(overallScore * 10)}/100`;
        
        if (overallScore >= 8) {
          document.getElementById('scoreDescription').textContent = "Exceptional client relationship skills with outstanding empathy and trust building";
        } else if (overallScore >= 6.5) {
          document.getElementById('scoreDescription').textContent = "Strong foundation with clear opportunities for client relationship enhancement";
        } else {
          document.getElementById('scoreDescription').textContent = "Solid starting point with significant potential for client communication growth";
        }
      }

      function displayQuantitativeMetrics(scores) {
        const quantitativeElement = document.getElementById('quantitativeContent');
        if (!quantitativeElement || !scores) return;

        let html = '<div class="metrics-grid">';
        
        Object.entries(scores).forEach(([metric, value]) => {
          const config = clientCallsMetrics.quantitative[metric] || { optimal: { min: 0, max: 100 } };
          const optimal = config.optimal;
          
          let score;
          if (value >= optimal.min && value <= optimal.max) {
            score = 100;
          } else if (value < optimal.min) {
            score = Math.max(0, 100 - (optimal.min - value) * 2);
          } else {
            score = Math.max(0, 100 - (value - optimal.max) * 2);
          }
          
          score = Math.min(100, Math.max(0, score));
          const scoreColor = score >= 80 ? '#10b981' : score >= 60 ? '#f59e0b' : score >= 40 ? '#ef4444' : '#dc2626';
          
          html += `
            <div class="metric-card">
              <div class="metric-header">
                <span class="metric-name">${metric}</span>
                <span class="metric-score" style="color: ${scoreColor};">${Math.round(score)}/100</span>
              </div>
              <div class="metric-details">
                <div style="font-weight: 500;">Measured: ${value}${getMetricUnit(metric)}</div>
                <div style="color: var(--voice-text-muted);">Optimal: ${optimal.min}-${optimal.max}${getMetricUnit(metric)}</div>
                <div style="font-size: 0.75rem; color: var(--voice-text-muted); margin-top: 0.25rem;">${config.description || ''}</div>
              </div>
              <div class="metric-bar">
                <div class="metric-fill" style="width: ${score}%; background-color: ${scoreColor};"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        quantitativeElement.innerHTML = html;
      }

      function displayQualitativeMetrics(scores) {
        const qualitativeElement = document.getElementById('qualitativeContent');
        if (!qualitativeElement || !scores) return;

        let html = '<div class="categories-grid">';
        
        Object.entries(scores).forEach(([metric, score]) => {
          const config = clientCallsMetrics.qualitative[metric] || { factors: [] };
          const normalizedScore = (score / 10) * 100;
          const scoreColor = normalizedScore >= 80 ? '#10b981' : normalizedScore >= 60 ? '#f59e0b' : normalizedScore >= 40 ? '#ef4444' : '#dc2626';
          
          html += `
            <div class="category-card">
              <div class="category-header">
                <span class="category-name">${metric}</span>
                <span class="category-score" style="color: ${scoreColor};">${score}/10</span>
              </div>
              <div class="category-factors">
                ${config.factors.map(factor => `<span class="factor-tag">${factor}</span>`).join('')}
              </div>
              <div class="category-bar">
                <div class="category-fill" style="width: ${normalizedScore}%; background-color: ${scoreColor};"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        qualitativeElement.innerHTML = html;
      }
      
      function displayCopyFeedback(results) {
        const copyFeedbackElement = document.getElementById('copyFeedbackContent');
        if (!copyFeedbackElement) return;
        
        let feedbackHtml = `
          <div class="insight-card-modern">
            <div class="insight-header-modern">
              <div class="insight-icon-modern" style="background: var(--client-primary);">
                <i data-lucide="clipboard"></i>
              </div>
              <h4 class="insight-title-modern">Complete Client Call Analysis</h4>
            </div>
            <div class="insight-content-modern">
              <p style="margin-bottom: 1rem; color: var(--voice-text-secondary);">
                This comprehensive analysis includes all insights, metrics, and recommendations from your client call.
              </p>
              
              <div style="background: var(--client-light); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                <h5 style="font-weight: 600; margin-bottom: 0.5rem;">Analysis Summary:</h5>
                <ul style="margin: 0; padding-left: 1rem;">
                  <li>Overall Score: ${results.overallScore ? Math.round(results.overallScore * 10) : 'N/A'}/100</li>
                  <li>Quantitative Metrics: ${Object.keys(results.quantitativeScores || {}).length} measurements</li>
                  <li>Qualitative Assessment: ${Object.keys(results.qualitativeScores || {}).length} relationship skills</li>
                  <li>Detailed Insights: Strengths, improvements, and recommendations</li>
                </ul>
              </div>
              
              <div style="text-align: center;">
                <button onclick="copyAllFeedback()" 
                  style="background: linear-gradient(135deg, var(--client-primary), var(--client-secondary)); 
                         color: white; 
                         border: none; 
                         padding: 0.75rem 1.5rem; 
                         border-radius: 8px; 
                         font-weight: 600; 
                         cursor: pointer; 
                         display: inline-flex; 
                         align-items: center; 
                         gap: 0.5rem;">
                  <i data-lucide="copy" style="width: 16px; height: 16px;"></i>
                  Copy Complete Analysis
                </button>
              </div>
            </div>
          </div>
        `;
        
        copyFeedbackElement.innerHTML = feedbackHtml;
      }

      function getMetricUnit(metric) {
        const config = clientCallsMetrics.quantitative[metric];
        return config ? config.unit : '';
      }

      // Copy functions
      function copyAnalysis() {
        const analysisContent = document.getElementById('detailedAnalysisContent');
        if (analysisContent) {
          const textContent = analysisContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--voice-success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'rgba(255, 255, 255, 0.6)';
            btn.style.color = 'var(--voice-text-secondary)';
          }, 2000);
        }
      }

      function copyQuantitative() {
        const quantContent = document.getElementById('quantitativeContent');
        if (quantContent) {
          const textContent = quantContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--voice-success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'rgba(255, 255, 255, 0.6)';
            btn.style.color = 'var(--voice-text-secondary)';
          }, 2000);
        }
      }

      function copyQualitative() {
        const qualContent = document.getElementById('qualitativeContent');
        if (qualContent) {
          const textContent = qualContent.innerText;
          navigator.clipboard.writeText(textContent);
          
          // Show feedback
          const btn = event.target.closest('.copy-btn');
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied!';
          btn.style.background = 'var(--voice-success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'rgba(255, 255, 255, 0.6)';
            btn.style.color = 'var(--voice-text-secondary)';
          }, 2000);
        }
      }
      
      function copyAllFeedback() {
        const analysisContent = document.getElementById('detailedAnalysisContent');
        const quantContent = document.getElementById('quantitativeContent');
        const qualContent = document.getElementById('qualitativeContent');
        
        if (analysisContent && quantContent && qualContent) {
          const scoreText = document.getElementById('scoreText') ? document.getElementById('scoreText').textContent : 'N/A';
          const completeAnalysis = `
CLIENT & PARTNER CALLS ANALYSIS RESULTS
========================================

OVERALL SCORE: ${scoreText}

DETAILED INSIGHTS:
${analysisContent.innerText}

QUANTITATIVE METRICS:
${quantContent.innerText}

QUALITATIVE ASSESSMENT:
${qualContent.innerText}

Generated by Articulaition.com - AI-Powered Communication Analysis
          `.trim();
          
          navigator.clipboard.writeText(completeAnalysis);
          
          // Show feedback
          const btn = event.target.closest('button') || event.target;
          const originalText = btn.innerHTML;
          btn.innerHTML = '<i data-lucide="check"></i> Copied Complete Analysis!';
          btn.style.background = 'var(--voice-success)';
          btn.style.color = 'white';
          
          setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.background = 'linear-gradient(135deg, var(--client-primary), var(--client-secondary))';
            btn.style.color = 'white';
          }, 2000);
        }
      }

      // Process audio for transcription
      async function processAudioForTranscription(audioDataString) {
        try {
          console.log("🎤 Processing client call audio for transcription");

          const audioData = JSON.parse(audioDataString);
          console.log("📊 Audio data:", audioData);

          const response = await fetch(audioData.base64);
          const blob = await response.blob();
          const audioFile = new File([blob], audioData.name, { type: audioData.type });

          const transcript = await transcribeAudioWithGemini(audioFile);
          const analysisResults = await analyzeClientCall(transcript);

          console.log("✅ Client call analysis complete:", analysisResults);
          displayResults(analysisResults);

        } catch (error) {
          console.error("❌ Audio processing failed:", error);
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem; background: #fef2f2; border: 2px solid #fca5a5; border-radius: 12px; color: #dc2626;">
              <h3>⚠️ Analysis Failed</h3>
              <p>Unable to process your client call. Please try again.</p>
              <p style="font-size: 14px; opacity: 0.8;">Error: ${error.message}</p>
            </div>
          `;
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
        initializeUnifiedTabSwitching();

        const audioData = sessionStorage.getItem("audioForAnalysis");
        if (audioData) {
          console.log("🎤 Found audio data for client call analysis");
          processAudioForTranscription(audioData);
          sessionStorage.removeItem("audioForAnalysis");
        } else {
          console.log("❌ No audio data found");
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem;">
              <h3>No Audio Data</h3>
              <p>Please record a client call first.</p>
              <a href="dashboard.html" class="back-btn" style="margin-top: 1rem;">
                Go to Dashboard
              </a>
            </div>
          `;
        }
      });
    </script>
  </body>
</html>