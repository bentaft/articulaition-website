<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Articulaition Dashboard - Your personal communication coaching platform"
    />
    <title>Dashboard - Articulaition</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/base.css" />

    <!-- Advanced Dashboard Styles -->
    <style>
      :root {
        --voice-primary: #6366f1;
        --voice-secondary: #8b5cf6;
        --voice-accent: #06b6d4;
        --voice-warm: #f59e0b;
        --voice-success: #10b981;
        --voice-neural: #64748b;
        --voice-dark: #2d3748;
        --voice-light: #f7fafc;
        --voice-bg-primary: #fafbfc;
        --voice-bg-secondary: #f4f6f8;
        --voice-glass: rgba(255, 255, 255, 0.8);
        --voice-glass-border: rgba(255, 255, 255, 0.3);
        --voice-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
        --voice-shadow-lg: 0 35px 60px -12px rgba(0, 0, 0, 0.12);
        --voice-text-primary: #1a202c;
        --voice-text-secondary: #4a5568;
        --voice-text-muted: #718096;
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(
          135deg,
          #fafbfc 0%,
          #f4f6f8 25%,
          #edf2f7 50%,
          #e2e8f0 75%,
          #cbd5e0 100%
        );
        min-height: 100vh;
        overflow-x: hidden;
      }

      .dashboard-container {
        background: linear-gradient(135deg, #fafbfc 0%, #f4f6f8 100%);
        position: relative;
        min-height: 100vh;
      }

      .dashboard-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            circle at 20% 20%,
            rgba(99, 102, 241, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(139, 92, 246, 0.025) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 20% 80%,
            rgba(6, 182, 212, 0.02) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 80%,
            rgba(245, 158, 11, 0.015) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: 1;
      }

      .dashboard-content {
        position: relative;
        z-index: 2;
        display: flex;
        min-h: screen;
        padding-top: 80px;
      }

      /* Advanced Animations */
      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }
      .slide-up {
        animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(30px);
      }
      .slide-right {
        animation: slideRight 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateX(-30px);
      }
      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }
      @keyframes slideUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideRight {
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @keyframes scaleIn {
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .delay-100 {
        animation-delay: 0.1s;
      }
      .delay-200 {
        animation-delay: 0.2s;
      }
      .delay-300 {
        animation-delay: 0.3s;
      }
      .delay-400 {
        animation-delay: 0.4s;
      }
      .delay-500 {
        animation-delay: 0.5s;
      }
      .delay-600 {
        animation-delay: 0.6s;
      }
      .delay-700 {
        animation-delay: 0.7s;
      }
      .delay-800 {
        animation-delay: 0.8s;
      }

      /* Voice Pulse Animation */
      .voice-pulse {
        animation: voicePulse 2s ease-in-out infinite;
      }
      @keyframes voicePulse {
        0%,
        100% {
          background: linear-gradient(135deg, #10b981, #059669);
          box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }
        50% {
          background: linear-gradient(135deg, #059669, #047857);
          box-shadow: 0 0 30px rgba(16, 185, 129, 0.6);
        }
      }

      /* Sound Wave Animation */
      .sound-wave {
        display: flex;
        align-items: center;
        gap: 2px;
        height: 20px;
      }

      .wave-bar {
        width: 3px;
        background: linear-gradient(
          to top,
          var(--voice-primary),
          var(--voice-accent)
        );
        border-radius: 2px;
        animation: soundWave 1.5s ease-in-out infinite;
      }

      .wave-bar:nth-child(1) {
        animation-delay: 0s;
        height: 60%;
      }
      .wave-bar:nth-child(2) {
        animation-delay: 0.1s;
        height: 100%;
      }
      .wave-bar:nth-child(3) {
        animation-delay: 0.2s;
        height: 40%;
      }
      .wave-bar:nth-child(4) {
        animation-delay: 0.3s;
        height: 80%;
      }
      .wave-bar:nth-child(5) {
        animation-delay: 0.4s;
        height: 60%;
      }
      .wave-bar:nth-child(6) {
        animation-delay: 0.5s;
        height: 90%;
      }
      .wave-bar:nth-child(7) {
        animation-delay: 0.6s;
        height: 70%;
      }

      @keyframes soundWave {
        0%,
        100% {
          transform: scaleY(1);
          opacity: 0.7;
        }
        50% {
          transform: scaleY(1.8);
          opacity: 1;
        }
      }

      /* Shiny Orange Effect */
      .shiny-orange {
        background: linear-gradient(
          145deg,
          #ff934d 0%,
          #ffb366 30%,
          #ff7f50 60%,
          #ff934d 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        filter: drop-shadow(0 2px 4px rgba(255, 147, 77, 0.3));
      }

      /* Professional Communication Focus Heading */
      .premium-heading {
        font-family: 'Inter', sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        line-height: 1.2;
        letter-spacing: -0.01em;
        text-align: center;
        margin: 0 auto 2rem;
        padding: 1rem 0;
        max-width: 90%;
        color: #1f2937;
        position: relative;
      }

      /* Subtle underline accent */
      .premium-heading::after {
        content: '';
        position: absolute;
        bottom: 0.5rem;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background: linear-gradient(90deg, #4a90e2, #3b82f6);
        border-radius: 2px;
      }

      /* Mobile responsive adjustments */
      @media (max-width: 768px) {
        .premium-heading {
          font-size: 2rem;
        }
      }

      @media (max-width: 480px) {
        .premium-heading {
          font-size: 1.75rem;
        }
      }


      /* Navigation Branding with Shiny Effect */
      .nav-orange {
          background: linear-gradient(
              145deg,
              #ff934d 0%,
              #ffb366 30%,
              #ff7f50 60%,
              #ff934d 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(255, 147, 77, 0.3));
      }

      .nav-blue {
          background: linear-gradient(
              145deg,
              #4a90e2 0%,
              #6bb6ff 30%,
              #4f94e8 60%,
              #4a90e2 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(74, 144, 226, 0.3));
      }

      /* Glass Morphism */
      .glass {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: var(--voice-shadow);
      }

      .glass-intense {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: var(--voice-shadow-lg);
      }

      /* Sidebar Styling */
      .voice-sidebar {
        width: 380px;
        min-height: 100vh;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(25px);
        border-right: 1px solid rgba(0, 0, 0, 0.08);
        box-shadow: 25px 0 50px rgba(0, 0, 0, 0.08);
        position: relative;
        overflow-y: auto;
      }

      .voice-sidebar::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          180deg,
          rgba(99, 102, 241, 0.02) 0%,
          transparent 100%
        );
        pointer-events: none;
      }

      /* Profile Section */
      .profile-section {
        padding: 2rem;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        position: relative;
      }

      .profile-avatar {
        width: 72px;
        height: 72px;
        background: linear-gradient(
          135deg,
          #6366f1 0%,
          #8b5cf6 50%,
          #06b6d4 100%
        );
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-family: "Inter", sans-serif;
        font-size: 28px;
        font-weight: 700;
        position: relative;
        box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
      }

      .profile-avatar::after {
        content: "";
        position: absolute;
        bottom: -3px;
        right: -3px;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 3px solid rgba(255, 255, 255, 0.9);
      }

      .profile-name {
        font-family: "Inter", sans-serif;
        font-size: 22px;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: 6px;
      }

      .profile-subtitle {
        color: var(--voice-text-secondary);
        font-size: 15px;
        font-weight: 500;
        line-height: 1.4;
      }

      /* Enhanced Voice Metrics */
      .voice-metric {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(20px);
        box-shadow: 
          0 8px 32px rgba(0, 0, 0, 0.1),
          0 1px 0 rgba(255, 255, 255, 0.8) inset,
          0 -1px 0 rgba(0, 0, 0, 0.05) inset;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      }

      .voice-metric:hover {
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-4px) scale(1.02);
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.15),
          0 8px 32px rgba(99, 102, 241, 0.1),
          0 1px 0 rgba(255, 255, 255, 0.9) inset;
      }

      .voice-metric::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--voice-primary) 0%,
          var(--voice-secondary) 50%,
          var(--voice-accent) 100%
        );
        border-radius: 20px 20px 0 0;
      }

      .voice-metric::after {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent 0deg,
          rgba(99, 102, 241, 0.05) 45deg,
          transparent 90deg,
          rgba(139, 92, 246, 0.05) 135deg,
          transparent 180deg,
          rgba(6, 182, 212, 0.05) 225deg,
          transparent 270deg,
          rgba(99, 102, 241, 0.05) 315deg,
          transparent 360deg
        );
        animation: rotate 20s linear infinite;
        z-index: -1;
        opacity: 0;
        transition: opacity 0.4s ease;
      }

      .voice-metric:hover::after {
        opacity: 1;
      }

      @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }

      .metric-value {
        font-family: "Inter", sans-serif;
        font-size: 42px;
        font-weight: 800;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        line-height: 1;
        margin-bottom: 8px;
        position: relative;
        z-index: 2;
      }

      .metric-label {
        color: var(--voice-text-secondary);
        font-size: 13px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        position: relative;
        z-index: 2;
      }

      .progress-ring {
        width: 80px;
        height: 80px;
        position: relative;
      }

      .progress-ring svg {
        transform: rotate(-90deg);
      }

      .progress-ring-bg {
        fill: none;
        stroke: rgba(0, 0, 0, 0.1);
        stroke-width: 8;
      }

      .progress-ring-fill {
        fill: none;
        stroke: url(#voiceGradient);
        stroke-width: 8;
        stroke-linecap: round;
        transition: stroke-dasharray 1s ease;
      }

      /* Main Content Area */
      .main-content {
        flex: 1;
        padding: 0;
        position: relative;
      }

      /* Top Navigation */
      .top-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        padding: 1.5rem 2.5rem;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-right: 3rem;
      }

      .logo-section img {
        height: 36px;
        filter: none;
      }

      .nav-links {
        display: flex;
        gap: 0;
      }

      .nav-link {
        color: var(--voice-text-secondary);
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .nav-link.active {
        color: var(--voice-primary);
        background: transparent;
        border: none;
        border-bottom: 2px solid #4a90e2;
        border-radius: 0;
        padding-bottom: 0.4rem;
      }

      .nav-link:hover:not(.active) {
        color: var(--voice-text-primary);
        background: rgba(0, 0, 0, 0.05);
      }

      /* Communication Focus Cards */
      .communication-grid {
        padding: 3rem 2.5rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        max-width: 1400px;
      }

      .communication-card {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        padding: 2.5rem;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        overflow: hidden;
        aspect-ratio: 1 / 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .communication-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(99, 102, 241, 0.05) 0%,
          transparent 100%
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }

      .communication-card:hover::before {
        opacity: 1;
      }

      .communication-card:hover {
        transform: translateY(-8px);
        background: rgba(255, 255, 255, 0.95);
        border-color: rgba(0, 0, 0, 0.12);
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.15);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .card-icon {
        width: 64px;
        height: 64px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 28px;
        position: relative;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      }

      .professional-card .card-icon {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      }

      .personal-card .card-icon {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
      }

      .card-title {
        font-family: "Inter", sans-serif;
        font-size: 24px;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: 8px;
      }

      .card-subtitle {
        color: var(--voice-text-secondary);
        font-size: 14px;
        font-weight: 500;
        line-height: 1.4;
      }

      .card-description {
        color: var(--voice-text-secondary);
        font-size: 16px;
        line-height: 1.6;
        font-weight: 400;
        margin-bottom: 2rem;
      }

      .card-cta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.25rem 1.5rem;
        background: rgba(0, 0, 0, 0.03);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 16px;
        margin-top: auto;
        transition: all 0.3s ease;
      }

      .communication-card:hover .card-cta {
        background: rgba(0, 0, 0, 0.05);
        border-color: rgba(0, 0, 0, 0.12);
      }

      .cta-text {
        font-weight: 600;
        color: var(--voice-text-primary);
        font-size: 16px;
      }

      .professional-card .cta-text {
        color: #60a5fa;
      }

      .personal-card .cta-text {
        color: #a78bfa;
      }

      .cta-arrow {
        width: 20px;
        height: 20px;
        transition: transform 0.3s ease;
      }

      .communication-card:hover .cta-arrow {
        transform: translateX(4px);
      }

      /* Quick Stats */
      .stats-grid {
        padding: 0 2.5rem 3rem;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 20px;
        padding: 1.5rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .stat-card:hover {
        background: rgba(255, 255, 255, 0.95);
        transform: translateY(-2px);
      }

      .stat-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1rem;
        color: white;
      }

      .stat-value {
        font-family: "Inter", sans-serif;
        font-size: 28px;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: 4px;
      }

      .stat-label {
        color: var(--voice-text-secondary);
        font-size: 13px;
        font-weight: 500;
      }

      /* Process Steps */
      .process-container {
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: 20px;
        margin: 1.5rem 0;
      }

      .process-step {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.75rem 0;
        color: var(--voice-text-secondary);
        font-size: 14px;
        font-weight: 400;
      }

      .step-number {
        width: 28px;
        height: 28px;
        background: linear-gradient(
          135deg,
          var(--voice-primary),
          var(--voice-secondary)
        );
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 700;
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
      }

      /* Navigation Menu */
      .nav-menu {
        padding: 1.5rem;
      }

      .nav-menu-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        color: var(--voice-text-secondary);
        text-decoration: none;
        border-radius: 12px;
        margin-bottom: 0.5rem;
        transition: all 0.3s ease;
        font-weight: 400;
        font-size: 14px;
      }

      .nav-menu-item:hover,
      .nav-menu-item.active {
        background: rgba(99, 102, 241, 0.1);
        color: var(--voice-primary);
        border: 1px solid rgba(99, 102, 241, 0.2);
      }

      .nav-menu-item.active {
        background: rgba(99, 102, 241, 0.15);
        border-color: rgba(99, 102, 241, 0.3);
        color: var(--voice-primary);
      }

      /* Quick Action Button */
      .quick-action {
        position: absolute;
        bottom: 2rem;
        left: 2rem;
        right: 2rem;
      }

      .action-btn {
        width: 100%;
        background: linear-gradient(
          135deg,
          #6366f1 0%,
          #8b5cf6 50%,
          #06b6d4 100%
        );
        color: white;
        border: none;
        padding: 1rem 1.5rem;
        border-radius: 16px;
        font-weight: 700;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 40px rgba(99, 102, 241, 0.5);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .communication-grid {
          grid-template-columns: 1fr;
          gap: 1.5rem;
        }

        .voice-sidebar {
          width: 320px;
        }
      }

      @media (max-width: 768px) {
        .voice-sidebar {
          width: 100%;
          position: fixed;
          top: 0;
          left: -100%;
          z-index: 50;
          transition: left 0.3s ease;
        }

        .voice-sidebar.open {
          left: 0;
        }

        .main-content {
          width: 100%;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard-container">
      <div class="dashboard-content">
        <!-- Advanced Sidebar -->
        <aside class="voice-sidebar fade-in">
          <!-- Profile Section -->
          <div class="profile-section slide-right delay-100">
            <div class="flex items-center gap-4 mb-6" style="margin-top: 36px;">
              <div>
                <div class="profile-name shiny-orange" id="sidebarUsername">
                  Welcome back, Ben.taft2005!
                </div>
                <div class="profile-subtitle">
                  Ready to elevate your communication skills?
                </div>
              </div>
            </div>

          </div>

          <!-- Achievements Section -->
          <div class="px-8 slide-right delay-200">
            <div class="achievements-widget">
              <div class="achievements-header">
                <h3 style="color: var(--voice-text-primary); font-size: 18px; font-weight: 600; margin-bottom: 0.5rem;">Your Accomplishments</h3>
                <div class="achievement-score" style="color: var(--voice-text-secondary); font-size: 14px;">
                  <span class="score-number" style="color: var(--voice-primary); font-weight: 600;">0</span>
                  <span class="score-label"> of 4 unlocked</span>
                </div>
              </div>
              
              <div class="achievements-list" style="margin-top: 1rem;">
                <!-- First Analysis Achievement -->
                <div class="achievement-item locked" style="display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0, 0, 0, 0.02); border-radius: 12px; margin-bottom: 8px; border-left: 3px solid #e5e7eb;">
                  <div class="achievement-icon" style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #e5e7eb; border-radius: 8px;">
                    <i data-lucide="play-circle" style="width: 18px; height: 18px; color: #9ca3af;"></i>
                  </div>
                  <div class="achievement-content">
                    <h4 style="font-size: 14px; font-weight: 600; color: var(--voice-text-primary); margin: 0;">First Steps</h4>
                    <p style="font-size: 12px; color: var(--voice-text-secondary); margin: 0;">Complete your first analysis</p>
                  </div>
                </div>
                
                <!-- 65% on 5 Different Methods -->
                <div class="achievement-item locked" data-achievement="versatile-communicator" style="display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0, 0, 0, 0.02); border-radius: 12px; margin-bottom: 8px; border-left: 3px solid #e5e7eb;">
                  <div class="achievement-icon" style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #e5e7eb; border-radius: 8px;">
                    <i data-lucide="target" style="width: 18px; height: 18px; color: #9ca3af;"></i>
                  </div>
                  <div class="achievement-content" style="flex: 1;">
                    <h4 style="font-size: 14px; font-weight: 600; color: var(--voice-text-primary); margin: 0;">Versatile Communicator</h4>
                    <p style="font-size: 12px; color: var(--voice-text-secondary); margin: 0 0 4px 0;">Score 65%+ on 3 different analysis types</p>
                    <div class="achievement-progress">
                      <span class="progress-text" style="font-size: 11px; color: var(--voice-text-secondary);">0/3 completed</span>
                      <div class="mini-progress-bar" style="width: 100%; height: 4px; background: #f3f4f6; border-radius: 2px; margin-top: 2px;">
                        <div class="mini-progress-fill" style="width: 0%; height: 100%; background: var(--voice-primary); border-radius: 2px;"></div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- 80% on All 10 Types -->
                <div class="achievement-item locked" data-achievement="communication-master" style="display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0, 0, 0, 0.02); border-radius: 12px; margin-bottom: 8px; border-left: 3px solid #e5e7eb;">
                  <div class="achievement-icon" style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #e5e7eb; border-radius: 8px;">
                    <i data-lucide="crown" style="width: 18px; height: 18px; color: #9ca3af;"></i>
                  </div>
                  <div class="achievement-content" style="flex: 1;">
                    <h4 style="font-size: 14px; font-weight: 600; color: var(--voice-text-primary); margin: 0;">Communication Master</h4>
                    <p style="font-size: 12px; color: var(--voice-text-secondary); margin: 0 0 4px 0;">Score 80%+ on any analysis type</p>
                    <div class="achievement-progress">
                      <span class="progress-text" style="font-size: 11px; color: var(--voice-text-secondary);">0/1 completed</span>
                      <div class="mini-progress-bar" style="width: 100%; height: 4px; background: #f3f4f6; border-radius: 2px; margin-top: 2px;">
                        <div class="mini-progress-fill" style="width: 0%; height: 100%; background: var(--voice-primary); border-radius: 2px;"></div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Streak Achievement -->
                <div class="achievement-item locked" data-achievement="consistent-improver" style="display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0, 0, 0, 0.02); border-radius: 12px; margin-bottom: 8px; border-left: 3px solid #e5e7eb;">
                  <div class="achievement-icon" style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: #e5e7eb; border-radius: 8px;">
                    <i data-lucide="flame" style="width: 18px; height: 18px; color: #9ca3af;"></i>
                  </div>
                  <div class="achievement-content" style="flex: 1;">
                    <h4 style="font-size: 14px; font-weight: 600; color: var(--voice-text-primary); margin: 0;">Consistent Improver</h4>
                    <p style="font-size: 12px; color: var(--voice-text-secondary); margin: 0 0 4px 0;">Complete 3 analyses in 3 days</p>
                    <div class="achievement-progress">
                      <span class="progress-text" style="font-size: 11px; color: var(--voice-text-secondary);">0/3 days</span>
                      <div class="mini-progress-bar" style="width: 100%; height: 4px; background: #f3f4f6; border-radius: 2px; margin-top: 2px;">
                        <div class="mini-progress-fill" style="width: 0%; height: 100%; background: var(--voice-primary); border-radius: 2px;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
            </div>
          </div>

          <!-- Process Steps -->
          <div class="px-8 slide-right delay-300">
            <div class="process-container">
              <div class="process-step">
                <div class="step-number">1</div>
                <span>Pick a general topic (Business, Personal)</span>
              </div>
              <div class="process-step">
                <div class="step-number">2</div>
                <span>Choose your focus area</span>
              </div>
              <div class="process-step">
                <div class="step-number">3</div>
                <span>Upload or record a sample</span>
              </div>
              <div class="process-step">
                <div class="step-number">4</div>
                <span>See what's working, and what's not</span>
              </div>
              <div class="process-step">
                <div class="step-number">5</div>
                <span>Get a personalized plan</span>
              </div>
            </div>

            <div
              style="
                color: var(--voice-text-primary);
                font-size: 15px;
                font-weight: 400;
                text-align: center;
                margin-top: 1.5rem;
              "
            >
              Let's make you the best communicator, one conversation at a time.
            </div>
          </div>

          <!-- Navigation Menu -->
          <div class="nav-menu slide-right delay-400">
            <a href="dashboard.html" class="nav-menu-item active">
              <i data-lucide="home" style="width: 18px; height: 18px"></i>
              <span>Dashboard</span>
            </a>
            <a href="professional-communication.html" class="nav-menu-item">
              <i data-lucide="briefcase" style="width: 18px; height: 18px"></i>
              <span>Professional Communication</span>
            </a>
            <a href="personal-communication.html" class="nav-menu-item">
              <i data-lucide="users" style="width: 18px; height: 18px"></i>
              <span>Personal Communication</span>
            </a>
            <a href="#" class="nav-menu-item">
              <i
                data-lucide="trending-up"
                style="width: 18px; height: 18px"
              ></i>
              <span>Progress & Analytics</span>
            </a>
          </div>

          <!-- Quick Action -->
          <div class="quick-action slide-right delay-500">
            <button class="action-btn">
              <i data-lucide="mic" style="width: 20px; height: 20px"></i>
              <span>Start Voice Analysis</span>
            </button>
          </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
          <!-- Top Navigation -->
          <nav class="top-nav slide-up delay-200">
            <div class="logo-section">
              <a href="index.html" class="flex items-center gap-3 group">
                <img src="images/tree-logo.svg" alt="Tree Logo" class="h-9 w-auto group-hover:scale-105 transition-transform">
                <span class="font-semibold text-lg tracking-tight nav-brand-text" style="margin-left: 0.25rem;">
                    <span class="nav-orange">articul</span><span class="nav-blue">ai</span><span class="nav-orange">tion</span><span class="nav-orange">.com</span>
                </span>
              </a>
              <div class="nav-links">
                <a href="dashboard.html" class="nav-link active">Home</a>
                <a href="professional-communication.html" class="nav-link"
                  >Professional Communication</a
                >
                <a href="personal-communication.html" class="nav-link"
                  >Personal Communication</a
                >
                <a href="improvement-hub.html" class="nav-link"
                  >Improvement Hub</a
                >
                <a href="pricing.html" class="nav-link"
                  >Pricing</a
                >
              </div>
            </div>

            <div class="flex items-center gap-4">
              <!-- User Dropdown -->
              <div class="relative">
                <button
                  class="flex items-center gap-3 px-4 py-2 rounded-xl bg-white bg-opacity-10 hover:bg-opacity-15 transition-all"
                  id="userMenuBtn"
                >
                  <div
                    id="userAvatar"
                    style="
                      width: 32px;
                      height: 32px;
                      background: linear-gradient(135deg, #6366f1, #8b5cf6);
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: white;
                      font-weight: 700;
                      font-size: 14px;
                    "
                  >
                    U
                  </div>
                  <div style="display: flex; flex-direction: column; flex: 1; margin-left: 8px;">
                    <span
                      id="userName"
                      style="
                        color: var(--voice-text-primary);
                        font-weight: 500;
                        font-size: 14px;
                        line-height: 1.2;
                      "
                      >Account</span
                    >
                    <span
                      id="userPlan"
                      style="
                        background: linear-gradient(135deg, #10b981, #06b6d4);
                        color: white;
                        padding: 2px 8px;
                        border-radius: 12px;
                        font-size: 10px;
                        font-weight: 600;
                        width: fit-content;
                        margin-top: 2px;
                      "
                      >Free Plan</span
                    >
                  </div>
                  <i
                    data-lucide="chevron-down"
                    style="
                      width: 16px;
                      height: 16px;
                      color: var(--voice-text-secondary);
                    "
                  ></i>
                </button>
                <div
                  class="absolute right-0 top-full mt-2 w-48 glass-intense rounded-xl shadow-2xl border border-black border-opacity-10 hidden"
                  id="userDropdown"
                >
                  <a
                    href="#"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10 rounded-t-xl"
                    style="color: var(--voice-text-primary); font-weight: 400"
                  >
                    <i data-lucide="user" style="width: 16px; height: 16px"></i>
                    <span style="font-size: 14px">Profile Settings</span>
                  </a>
                  <a
                    href="#"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10"
                    style="color: var(--voice-text-primary); font-weight: 400"
                  >
                    <i
                      data-lucide="credit-card"
                      style="width: 16px; height: 16px"
                    ></i>
                    <span style="font-size: 14px">Billing & Plans</span>
                  </a>
                  <a
                    href="#"
                    class="flex items-center gap-3 px-4 py-3 hover:bg-black hover:bg-opacity-10"
                    style="color: var(--voice-text-primary); font-weight: 400"
                  >
                    <i
                      data-lucide="settings"
                      style="width: 16px; height: 16px"
                    ></i>
                    <span style="font-size: 14px">Preferences</span>
                  </a>
                  <hr style="border-color: rgba(0, 0, 0, 0.1); margin: 8px 0" />
                  <button
                    class="flex items-center gap-3 px-4 py-3 hover:bg-red-500 hover:bg-opacity-20 w-full text-left text-red-400 rounded-b-xl"
                    id="logoutBtn"
                    style="font-weight: 400"
                  >
                    <i
                      data-lucide="log-out"
                      style="width: 16px; height: 16px"
                    ></i>
                    <span style="font-size: 14px">Sign Out</span>
                  </button>
                </div>
              </div>
            </div>
          </nav>

          <!-- Page Header -->
          <div
            style="text-align: center; padding: 3rem 2.5rem 2rem"
            class="slide-up delay-300"
          >
            <h1 class="premium-heading">
              Choose Your Communication Focus
            </h1>
            <p
              style="
                color: var(--voice-text-secondary);
                font-size: 18px;
                font-weight: 400;
              "
            >
              Select the area where you'd like to improve your skills
            </p>
          </div>

          <!-- Communication Focus Cards -->
          <div class="communication-grid">
            <!-- Professional Communication Card -->
            <div
              class="communication-card professional-card scale-in delay-400"
              onclick="window.location.href='professional-communication.html'"
            >
              <div class="card-header">
                <div class="card-icon">
                  <i data-lucide="briefcase"></i>
                </div>
                <div>
                  <div class="card-title">Professional Communication</div>
                  <div class="card-subtitle">
                    Master presentations, sales calls, leadership conversations,
                    and professional networking
                  </div>
                </div>
              </div>

              <div class="card-description">
                Our Professional Communication section focuses on the core
                skills that shape your career‚Äîwhether you're leading meetings,
                handling client calls, closing deals, or writing with precision.
                Record your voice and we'll analyze your communication using AI
                to give you actionable insights for improving your confidence,
                clarity, and executive presence.
              </div>

              <div class="card-cta">
                <span class="cta-text">Start Recording & Analysis</span>
                <i data-lucide="arrow-right" class="cta-arrow"></i>
              </div>
            </div>

            <!-- Personal Communication Card -->
            <div
              class="communication-card personal-card scale-in delay-500"
              onclick="window.location.href='personal-communication.html'"
            >
              <div class="card-header">
                <div class="card-icon">
                  <i data-lucide="users"></i>
                </div>
                <div>
                  <div class="card-title">Personal Communication</div>
                  <div class="card-subtitle">
                    Build confidence in casual social interactions,
                    storytelling, and creating meaningful connections
                  </div>
                </div>
              </div>

              <div class="card-description">
                This section helps you improve the personal side of
                communication‚Äîthe way you connect, express yourself, and
                navigate social moments. From casual conversation to conflict
                resolution and dating, record your voice and we'll analyze it to
                help you sound more authentic, relaxed, and impactful in
                everyday life.
              </div>

              <div class="card-cta">
                <span class="cta-text">Start Recording & Analysis</span>
                <i data-lucide="arrow-right" class="cta-arrow"></i>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="stats-grid">
            <div class="stat-card scale-in delay-600">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #10b981, #059669)"
              >
                <i data-lucide="target" style="width: 24px; height: 24px"></i>
              </div>
              <div class="stat-value">Ready</div>
              <div class="stat-label">Voice Analysis Status</div>
            </div>

            <div class="stat-card scale-in delay-700">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #3b82f6, #1d4ed8)"
              >
                <i data-lucide="folder" style="width: 24px; height: 24px"></i>
              </div>
              <div class="stat-value">2</div>
              <div class="stat-label">Focus Areas Available</div>
            </div>

            <div class="stat-card scale-in delay-800">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #8b5cf6, #7c3aed)"
              >
                <i data-lucide="clock" style="width: 24px; height: 24px"></i>
              </div>
              <div class="stat-value">0h</div>
              <div class="stat-label">Practice Time</div>
            </div>

            <div class="stat-card scale-in delay-800">
              <div
                class="stat-icon"
                style="background: linear-gradient(135deg, #f59e0b, #d97706)"
              >
                <i
                  data-lucide="check-circle-2"
                  style="width: 24px; height: 24px"
                ></i>
              </div>
              <div class="stat-value">0</div>
              <div class="stat-label">Sessions Completed</div>
            </div>
          </div>

          <!-- Not Sure Where to Start Section -->
          <div style="padding: 3rem 2.5rem; text-align: center; border-top: 1px solid rgba(0, 0, 0, 0.08);" class="slide-up delay-900">
            <div style="max-width: 600px; margin: 0 auto;">
              <h3 style="font-size: 28px; font-weight: 700; color: var(--voice-text-primary); margin-bottom: 1rem;">
                Not Sure Where to Start?
              </h3>
              <p style="color: var(--voice-text-secondary); font-size: 16px; line-height: 1.6; margin-bottom: 2rem;">
                Let us guide you to the perfect starting point based on your goals and current communication challenges.
              </p>
              <button 
                class="action-btn" 
                id="startGuideBtn"
                style="max-width: 300px; margin: 0 auto;"
              >
                <i data-lucide="help-circle" style="width: 20px; height: 20px"></i>
                <span>Get Personalized Guidance</span>
              </button>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Guidance Modal (Hidden) -->
    <div
      class="modal-overlay"
      id="guidanceModal"
      style="display: none !important; visibility: hidden; opacity: 0"
    >
      <div class="modal-content guidance-modal">
        <div class="modal-header">
          <button class="modal-close" id="closeGuidanceModal">&times;</button>
        </div>

        <!-- Slide 1: Welcome -->
        <div class="guidance-slide active" id="slide1">
          <div class="slide-content">
            <h3 class="slide-title">Let's Get You Started</h3>
            <div class="slide-body">
              <p>
                Not sure where to begin? If you've made it this far, you're
                already on the right track.
              </p>
              <p>
                Scroll through the next few slides to explore different
                communication focus areas‚Äîor enter your situation at the end,
                and we'll recommend the best place to begin.
              </p>
            </div>
            <div class="slide-footer">
              <button class="next-btn" data-next="slide2">Next ‚Üí</button>
            </div>
          </div>
        </div>

        <!-- Slide 2: Communication Topics -->
        <div class="guidance-slide" id="slide2">
          <div class="slide-content">
            <h3 class="slide-title">Explore What You Can Improve</h3>
            <div class="slide-body">
              <p>
                We support both personal and professional growth. Here are a few
                areas you can explore:
              </p>

              <div class="topics-section">
                <div class="topic-category">
                  <h4>üßë‚Äçüíº Professional Communication:</h4>
                  <ul>
                    <li>üó£Ô∏è Presentations & Pitches</li>
                    <li>üìû Client & Partner Calls</li>
                    <li>üíº Sales Objection Handling & Closing</li>
                    <li>üë• Leadership & Feedback</li>
                    <li>‚úâÔ∏è Written & Async Communication</li>
                  </ul>
                </div>

                <div class="topic-category">
                  <h4>üí¨ Personal Communication:</h4>
                  <ul>
                    <li>üí¨ Casual & Social Conversations</li>
                    <li>ü§ù Deep & Meaningful Conversations</li>
                    <li>üìñ Storytelling & Sharing</li>
                    <li>üïäÔ∏è Conflict & Boundaries</li>
                    <li>üíï Dating & Romantic Conversations</li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="slide-footer">
              <button class="prev-btn" data-prev="slide1">‚Üê Back</button>
              <button class="next-btn" data-next="slide3">Next ‚Üí</button>
            </div>
          </div>
        </div>

        <!-- Slide 3: Text Input -->
        <div class="guidance-slide" id="slide3">
          <div class="slide-content">
            <h3 class="slide-title">Tell Us About Your Goal</h3>
            <div class="slide-body">
              <p>What are you hoping to improve most?</p>
              <p>
                Type a few sentences about your situation, and we'll guide you
                to the section that best fits your goal.
              </p>

              <div class="input-section">
                <textarea
                  id="userGoalInput"
                  class="goal-textarea"
                  placeholder="I want to feel less nervous in social settings..."
                  maxlength="300"
                  rows="4"
                ></textarea>
                <div class="char-count">
                  <span id="charCount">0</span> / 300 characters
                </div>
              </div>
            </div>
            <div class="slide-footer">
              <button class="prev-btn" data-prev="slide2">‚Üê Back</button>
              <button class="find-btn" id="findStartingPoint">
                Find My Best Starting Point ‚Üí
              </button>
            </div>
          </div>
        </div>

        <!-- Slide 4: Recommendation -->
        <div class="guidance-slide" id="slide4">
          <div class="slide-content">
            <h3 class="slide-title">
              Start Here ‚Üí <span id="recommendedSection"></span>
            </h3>
            <div class="slide-body">
              <p>Based on what you shared, we recommend starting with:</p>
              <div class="recommendation-card">
                <div class="rec-icon">üí°</div>
                <div class="rec-content">
                  <h4 id="recTitle">Recommended Section</h4>
                  <p id="recDescription">
                    This section is designed to help you build skill and
                    confidence where it matters most.
                  </p>
                </div>
              </div>
            </div>
            <div class="slide-footer">
              <button class="restart-btn" id="restartGuide">
                Restart Guide
              </button>
              <button class="go-btn" id="goToSection">
                Go to This Section ‚Üí
              </button>
            </div>
          </div>
        </div>

        <!-- Loading State -->
        <div class="guidance-slide" id="loadingSlide" style="display: none">
          <div class="slide-content">
            <div class="loading-content">
              <div class="loading-spinner"></div>
              <h3>Analyzing Your Goals...</h3>
              <p>We're finding the best starting point for you.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Scripts -->
    <!-- Global Error Handler (load first) -->
    <script src="js/global-error-handler.js"></script>
    <script src="js/supabase-config.js"></script>
    <!-- Main Dashboard Script -->
    <script src="js/dashboard.js"></script>
    <!-- Sidebar Functionality -->
    <script src="js/sidebar.js"></script>
    <!-- Only load one dashboard enhancement script to avoid conflicts -->
    <script src="js/dashboard-redesign.js"></script>
    <script>
      // Initialize Lucide icons
      lucide.createIcons();
      
      // ========================================
      // USER MANAGEMENT SYSTEM
      // ========================================
      
      class UserManager {
        constructor() {
          this.currentUser = this.loadUserData();
          this.init();
        }
        
        loadUserData() {
          // In production, this would come from your backend/database
          const userData = localStorage.getItem('articulaition_user');
          if (userData) {
            return JSON.parse(userData);
          }
          
          // Default user data
          return {
            firstName: 'User',
            lastName: 'Account',
            email: 'user@example.com',
            plan: 'free', // 'free', 'essential', 'max_growth'
            analysisHistory: [],
            achievements: {
              versatile_communicator: { completed: 1, total: 5, scores: [] },
              communication_master: { completed: 0, total: 10, scores: [] },
              consistent_improver: { completed: 1, total: 7, lastAnalysis: Date.now() }
            },
            joinDate: Date.now()
          };
        }
        
        saveUserData() {
          localStorage.setItem('articulaition_user', JSON.stringify(this.currentUser));
        }
        
        init() {
          this.updateUserInterface();
          this.updateGamificationDisplay();
        }
        
        updateUserInterface() {
          const userAvatar = document.getElementById('userAvatar');
          const userName = document.getElementById('userName');
          const userPlan = document.getElementById('userPlan');
          
          if (userAvatar) {
            const firstLetter = this.currentUser.firstName.charAt(0).toUpperCase();
            userAvatar.textContent = firstLetter;
          }
          
          if (userName) {
            userName.textContent = `${this.currentUser.firstName} ${this.currentUser.lastName}`;
          }
          
          if (userPlan) {
            const planDisplay = this.getPlanDisplay(this.currentUser.plan);
            userPlan.textContent = planDisplay.text;
            userPlan.style.background = planDisplay.gradient;
          }
        }
        
        getPlanDisplay(plan) {
          const plans = {
            free: {
              text: 'Free Plan',
              gradient: 'linear-gradient(135deg, #64748b, #475569)'
            },
            essential: {
              text: 'Essential Analysis Plan',
              gradient: 'linear-gradient(135deg, #10b981, #06b6d4)'
            },
            max_growth: {
              text: 'Max Growth',
              gradient: 'linear-gradient(135deg, #fbbf24, #f59e0b)'
            }
          };
          return plans[plan] || plans.free;
        }
        
        updateGamificationDisplay() {
          this.updateAchievement('versatile-communicator', this.currentUser.achievements.versatile_communicator);
          this.updateAchievement('communication-master', this.currentUser.achievements.communication_master);
          this.updateAchievement('consistent-improver', this.currentUser.achievements.consistent_improver);
        }
        
        updateAchievement(elementId, achievement) {
          const element = document.querySelector(`[data-achievement="${elementId}"]`);
          if (!element) return;
          
          const progressText = element.querySelector('.progress-text');
          const progressFill = element.querySelector('.mini-progress-fill');
          const icon = element.querySelector('.achievement-icon i');
          
          if (progressText) {
            if (elementId === 'consistent-improver') {
              progressText.textContent = `${achievement.completed}/7 days`;
            } else {
              progressText.textContent = `${achievement.completed}/${achievement.total} completed`;
            }
          }
          
          if (progressFill) {
            const percentage = (achievement.completed / achievement.total) * 100;
            progressFill.style.width = `${Math.min(percentage, 100)}%`;
          }
          
          // Update achievement status
          if (achievement.completed >= achievement.total) {
            element.classList.remove('locked');
            element.classList.add('completed');
            element.style.borderLeft = '3px solid #10b981';
            if (icon) {
              icon.style.color = '#10b981';
            }
          }
        }
        
        // Check if user has Max Growth membership
        isMaxGrowthMember() {
          return this.currentUser.plan === 'max_growth';
        }
        
        // Add analysis to user history
        addAnalysis(type, score) {
          const analysis = {
            type,
            score,
            date: Date.now()
          };
          
          this.currentUser.analysisHistory.push(analysis);
          this.updateAchievements(analysis);
          this.saveUserData();
          this.updateGamificationDisplay();
        }
        
        updateAchievements(analysis) {
          // Update Versatile Communicator
          const uniqueTypes = [...new Set(this.currentUser.analysisHistory.map(a => a.type))];
          const highScoreTypes = uniqueTypes.filter(type => {
            const typeAnalyses = this.currentUser.analysisHistory.filter(a => a.type === type);
            const bestScore = Math.max(...typeAnalyses.map(a => a.score));
            return bestScore >= 65;
          });
          this.currentUser.achievements.versatile_communicator.completed = Math.min(highScoreTypes.length, 5);
          
          // Update Communication Master
          const masterTypes = uniqueTypes.filter(type => {
            const typeAnalyses = this.currentUser.analysisHistory.filter(a => a.type === type);
            const bestScore = Math.max(...typeAnalyses.map(a => a.score));
            return bestScore >= 80;
          });
          this.currentUser.achievements.communication_master.completed = Math.min(masterTypes.length, 10);
          
          // Update Consistent Improver
          const sevenDaysAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
          const recentAnalyses = this.currentUser.analysisHistory.filter(a => a.date >= sevenDaysAgo);
          const uniqueDays = [...new Set(recentAnalyses.map(a => new Date(a.date).toDateString()))];
          this.currentUser.achievements.consistent_improver.completed = Math.min(uniqueDays.length, 7);
        }
      }
      
      // ========================================
      // MEMBERSHIP VERIFICATION SYSTEM
      // ========================================
      
      class MembershipManager {
        static checkMaxGrowthAccess() {
          const userManager = window.userManager;
          if (!userManager) {
            console.error('UserManager not initialized');
            return false;
          }
          
          return userManager.isMaxGrowthMember();
        }
        
        static redirectToImprovementHub() {
          if (this.checkMaxGrowthAccess()) {
            window.location.href = 'improvement-hub-dashboard.html';
            return true;
          } else {
            this.showUpgradeModal();
            return false;
          }
        }
        
        static showUpgradeModal() {
          // Create and show upgrade modal
          const modal = document.createElement('div');
          modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
          `;
          
          modal.innerHTML = `
            <div style="
              background: white;
              border-radius: 1.5rem;
              padding: 2.5rem;
              max-width: 500px;
              width: 100%;
              text-align: center;
              box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            ">
              <div style="
                width: 80px;
                height: 80px;
                margin: 0 auto 1.5rem;
                background: linear-gradient(135deg, #fbbf24, #f59e0b);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
              ">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                </svg>
              </div>
              <h3 style="
                font-size: 1.5rem;
                font-weight: 700;
                color: #1a202c;
                margin-bottom: 1rem;
              ">Improvement Hub Access Required</h3>
              <p style="
                color: #4a5568;
                line-height: 1.6;
                margin-bottom: 2rem;
              ">The Improvement Hub is exclusively available for Max Growth members. Upgrade your plan to access elite drills, unlimited analysis, and expert feedback.</p>
              <div style="display: flex; gap: 1rem; justify-content: center;">
                <button onclick="this.closest('div').parentElement.remove()" style="
                  padding: 0.75rem 1.5rem;
                  background: #f7fafc;
                  border: 1px solid #e2e8f0;
                  border-radius: 0.75rem;
                  color: #4a5568;
                  font-weight: 500;
                  cursor: pointer;
                ">Maybe Later</button>
                <a href="pricing.html" style="
                  padding: 0.75rem 1.5rem;
                  background: linear-gradient(135deg, #fbbf24, #f59e0b);
                  color: white;
                  border-radius: 0.75rem;
                  text-decoration: none;
                  font-weight: 600;
                ">Upgrade to Max Growth</a>
              </div>
            </div>
          `;
          
          document.body.appendChild(modal);
          
          // Remove modal when clicking outside
          modal.addEventListener('click', (e) => {
            if (e.target === modal) {
              modal.remove();
            }
          });
        }
      }
      
      // Initialize systems
      window.userManager = new UserManager();
      window.membershipManager = MembershipManager;
      
      // User dropdown functionality
      const userMenuBtn = document.getElementById("userMenuBtn");
      const userDropdown = document.getElementById("userDropdown");

      if (userMenuBtn && userDropdown) {
        userMenuBtn.addEventListener("click", function (e) {
          e.stopPropagation();
          userDropdown.classList.toggle("hidden");
        });

        document.addEventListener("click", function () {
          userDropdown.classList.add("hidden");
        });
      }

      // Gemini API Configuration
      const GEMINI_API_KEY = "AIzaSyBGvwarFw2FbxgxOMnFchyji6G-zYkrgV8";

      // Communication sections mapping
      const COMMUNICATION_SECTIONS = {
        // Business
        presentations: {
          type: "business",
          title: "üó£Ô∏è Presentations & Pitches",
          url: "professional-communication.html",
          keywords: [
            "presentation",
            "pitch",
            "public speaking",
            "stage",
            "audience",
            "slides",
            "demo",
          ],
        },
        "client-calls": {
          type: "business",
          title: "üìû Client & Partner Calls",
          url: "professional-communication.html",
          keywords: [
            "client",
            "partner",
            "call",
            "meeting",
            "business",
            "professional",
            "work",
          ],
        },
        sales: {
          type: "business",
          title: "üíº Sales Objection Handling & Closing",
          url: "professional-communication.html",
          keywords: [
            "sales",
            "objection",
            "closing",
            "deal",
            "negotiate",
            "convince",
            "sell",
          ],
        },
        leadership: {
          type: "business",
          title: "üë• Leadership & Feedback",
          url: "professional-communication.html",
          keywords: [
            "leadership",
            "feedback",
            "manage",
            "team",
            "employee",
            "performance",
            "review",
          ],
        },
        written: {
          type: "business",
          title: "‚úâÔ∏è Written & Async Communication",
          url: "professional-communication.html",
          keywords: [
            "email",
            "written",
            "writing",
            "message",
            "slack",
            "text",
            "async",
          ],
        },
        // Personal
        casual: {
          type: "personal",
          title: "üí¨ Casual & Social Conversations",
          url: "personal-communication.html",
          keywords: [
            "casual",
            "social",
            "friends",
            "party",
            "small talk",
            "nervous",
            "anxiety",
          ],
        },
        deep: {
          type: "personal",
          title: "ü§ù Deep & Meaningful Conversations",
          url: "personal-communication.html",
          keywords: [
            "deep",
            "meaningful",
            "emotional",
            "vulnerable",
            "intimate",
            "serious",
            "important",
          ],
        },
        storytelling: {
          type: "personal",
          title: "üìñ Storytelling & Sharing",
          url: "personal-communication.html",
          keywords: [
            "story",
            "share",
            "experience",
            "tell",
            "narrative",
            "anecdote",
            "interesting",
          ],
        },
        conflict: {
          type: "personal",
          title: "üïäÔ∏è Conflict & Boundaries",
          url: "personal-communication.html",
          keywords: [
            "conflict",
            "boundary",
            "disagree",
            "argument",
            "fight",
            "resolve",
            "difficult",
          ],
        },
        dating: {
          type: "personal",
          title: "üíï Dating & Romantic Conversations",
          url: "personal-communication.html",
          keywords: [
            "dating",
            "romantic",
            "relationship",
            "partner",
            "love",
            "flirt",
            "attraction",
          ],
        },
      };

      // Modal functionality
      document.addEventListener("DOMContentLoaded", function () {
        const startGuideBtn = document.getElementById("startGuideBtn");
        const guidanceModal = document.getElementById("guidanceModal");
        const closeGuidanceModal =
          document.getElementById("closeGuidanceModal");

        // Ensure modal is hidden by default with multiple safeguards
        if (guidanceModal) {
          guidanceModal.style.display = "none";
          guidanceModal.style.visibility = "hidden";
          guidanceModal.style.opacity = "0";
        }

        if (startGuideBtn && guidanceModal && closeGuidanceModal) {
          // Open modal
          startGuideBtn.addEventListener("click", function (e) {
            e.preventDefault();
            e.stopPropagation();
            guidanceModal.style.display = "flex";
            guidanceModal.style.visibility = "visible";
            guidanceModal.style.opacity = "1";
            resetToFirstSlide();
          });

          // Close modal
          closeGuidanceModal.addEventListener("click", function (e) {
            e.preventDefault();
            e.stopPropagation();
            guidanceModal.style.display = "none";
            guidanceModal.style.visibility = "hidden";
            guidanceModal.style.opacity = "0";
          });

          // Close on outside click
          guidanceModal.addEventListener("click", function (e) {
            if (e.target === this) {
              this.style.display = "none";
              this.style.visibility = "hidden";
              this.style.opacity = "0";
            }
          });

          // Slide navigation
          setupSlideNavigation();

          // Character counter
          const userGoalInput = document.getElementById("userGoalInput");
          const charCount = document.getElementById("charCount");
          if (userGoalInput && charCount) {
            userGoalInput.addEventListener("input", function () {
              charCount.textContent = this.value.length;
            });
          }

          // Find starting point button
          const findBtn = document.getElementById("findStartingPoint");
          if (findBtn) {
            findBtn.addEventListener("click", handleFindStartingPoint);
          }

          // Restart guide button
          const restartBtn = document.getElementById("restartGuide");
          if (restartBtn) {
            restartBtn.addEventListener("click", function () {
              resetToFirstSlide();
            });
          }
        }
      });

      function setupSlideNavigation() {
        document.querySelectorAll(".next-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const nextSlide = this.dataset.next;
            if (nextSlide) {
              showSlide(nextSlide);
            }
          });
        });

        document.querySelectorAll(".prev-btn").forEach((btn) => {
          btn.addEventListener("click", function (e) {
            e.preventDefault();
            const prevSlide = this.dataset.prev;
            if (prevSlide) {
              showSlide(prevSlide);
            }
          });
        });
      }

      function showSlide(slideId) {
        document.querySelectorAll(".guidance-slide").forEach((slide) => {
          slide.classList.remove("active");
          slide.style.display = "none";
        });
        const targetSlide = document.getElementById(slideId);
        if (targetSlide) {
          targetSlide.style.display = "block";
          targetSlide.classList.add("active");
        }
      }

      function resetToFirstSlide() {
        showSlide("slide1");
        const userGoalInput = document.getElementById("userGoalInput");
        const charCount = document.getElementById("charCount");
        if (userGoalInput) userGoalInput.value = "";
        if (charCount) charCount.textContent = "0";
      }

      async function handleFindStartingPoint() {
        const userGoalInput = document.getElementById("userGoalInput");
        const userText = userGoalInput.value.trim();

        if (userText.length < 10) {
          alert("Please describe your communication goal in a few sentences.");
          return;
        }

        // Show loading state
        showSlide("loadingSlide");
        document.getElementById("loadingSlide").style.display = "block";

        try {
          const recommendation = await getGeminiRecommendation(userText);
          displayRecommendation(recommendation);
        } catch (error) {
          console.error("Error getting recommendation:", error);
          alert("Sorry, we had trouble analyzing your goal. Please try again.");
          showSlide("slide3");
        }
      }

      async function getGeminiRecommendation(userText) {
        const sections = Object.entries(COMMUNICATION_SECTIONS)
          .map(
            ([key, section]) =>
              `${section.title} (keywords: ${section.keywords.join(", ")})`
          )
          .join("\n");

        const prompt = `You are a communication coach. Based on the user's goal below, recommend ONE of these communication sections that best matches their needs:

${sections}

User's goal: "${userText}"

Respond with ONLY the exact title of the best matching section (including the emoji), nothing else.`;

        const response = await fetch(
          `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${GEMINI_API_KEY}`,
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              contents: [
                {
                  parts: [
                    {
                      text: prompt,
                    },
                  ],
                },
              ],
              generationConfig: {
                temperature: 0.7,
                topK: 1,
                topP: 0.8,
                maxOutputTokens: 100,
              },
            }),
          }
        );

        if (!response.ok) {
          throw new Error("Failed to get recommendation");
        }

        const data = await response.json();
        const recommendedTitle =
          data.candidates[0].content.parts[0].text.trim();

        // Find the matching section
        const matchedSection = Object.entries(COMMUNICATION_SECTIONS).find(
          ([key, section]) => section.title === recommendedTitle
        );

        if (matchedSection) {
          return matchedSection[1];
        }

        // Fallback to casual conversation if no match
        return COMMUNICATION_SECTIONS.casual;
      }

      function displayRecommendation(section) {
        // Update slide 4 with recommendation
        document.getElementById("recommendedSection").textContent =
          section.title;
        document.getElementById("recTitle").textContent = section.title;
        document.getElementById("recDescription").textContent =
          "This section is designed to help you build skill and confidence where it matters most.";

        // Set up the "Go to This Section" button
        const goBtn = document.getElementById("goToSection");
        if (goBtn) {
          goBtn.onclick = function () {
            localStorage.setItem("selected_communication_type", section.type);
            window.location.href = section.url;
          };
        }

        // Show recommendation slide
        showSlide("slide4");
      }
    </script>
    
    <!-- Stripe Integration for Payment Success Handling -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="js/stripe-integration.js"></script>
  </body>
</html>
