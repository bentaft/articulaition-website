<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="AI-Powered Casual Conversation Analysis Results - Articulaition"
    />
    <title>Casual Conversation Analysis Results - Articulaition</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/base.css" />

    <style>
      /* ==========================================================================
         SOPHISTICATED CASUAL COMMUNICATION DESIGN SYSTEM
         ========================================================================== */
      :root {
        /* Casual Communication Color Palette - Friendly & Approachable */
        --voice-primary: #6366f1;
        --voice-secondary: #8b5cf6;
        --voice-accent: #06b6d4;
        --voice-warm: #f59e0b;
        --voice-success: #10b981;
        --voice-neural: #64748b;
        --voice-dark: #2d3748;
        --voice-light: #f7fafc;
        --voice-bg-primary: #fafbfc;
        --voice-bg-secondary: #f4f6f8;
        --voice-glass: rgba(255, 255, 255, 0.85);
        --voice-glass-border: rgba(255, 255, 255, 0.3);
        --voice-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
        --voice-shadow-lg: 0 35px 60px -12px rgba(0, 0, 0, 0.12);
        --voice-text-primary: #1a202c;
        --voice-text-secondary: #4a5568;
        --voice-text-muted: #718096;
        
        /* Casual Accent Colors */
        --casual-primary: #3b82f6;
        --casual-secondary: #60a5fa;
        --casual-success: #10b981;
        --casual-warning: #f59e0b;
        --casual-light: rgba(59, 130, 246, 0.05);
        
        /* Typography */
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        
        /* Spacing */
        --space-1: 0.25rem;
        --space-2: 0.5rem;
        --space-3: 0.75rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-8: 2rem;
        
        /* Radius */
        --radius: 0.75rem;
        --radius-sm: 0.5rem;
        --radius-lg: 1rem;
        
        /* Glass Morphism Shadows */
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }

      /* ==========================================================================
         BASE STYLES WITH SOPHISTICATED BACKGROUND
         ========================================================================== */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      body {
        font-family: var(--font-sans);
        background: linear-gradient(135deg, #fafbfc 0%, #f4f6f8 25%, #edf2f7 50%, #e2e8f0 75%, #cbd5e0 100%);
        color: var(--voice-text-primary);
        line-height: 1.6;
        -webkit-font-smoothing: antialiased;
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
      }

      /* Background Effects */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(circle at 20% 20%, rgba(99, 102, 241, 0.03) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.025) 0%, transparent 50%),
          radial-gradient(circle at 20% 80%, rgba(6, 182, 212, 0.02) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.015) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      /* Animation Classes */
      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }

      .slide-up {
        animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(30px);
      }

      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      @keyframes fadeIn {
        to { opacity: 1; }
      }
      @keyframes slideUp {
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes scaleIn {
        to { opacity: 1; transform: scale(1); }
      }

      .delay-100 { animation-delay: 0.1s; }
      .delay-200 { animation-delay: 0.2s; }
      .delay-300 { animation-delay: 0.3s; }
      .delay-400 { animation-delay: 0.4s; }
      .delay-500 { animation-delay: 0.5s; }

      /* ==========================================================================
         TOP NAVIGATION WITH GLASS MORPHISM
         ========================================================================== */
      .top-nav {
        padding: 1.5rem 2.5rem;
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--voice-shadow);
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo-section img {
        height: 36px;
        filter: none;
        transition: transform 0.3s ease;
      }

      .logo-section:hover img {
        transform: scale(1.05);
      }

      /* Navigation Branding with Shiny Effect */
      .nav-orange {
          background: linear-gradient(
              145deg,
              #ff934d 0%,
              #ffb366 30%,
              #ff7f50 60%,
              #ff934d 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(255, 147, 77, 0.3));
      }

      .nav-blue {
          background: linear-gradient(
              145deg,
              #4a90e2 0%,
              #6bb6ff 30%,
              #4f94e8 60%,
              #4a90e2 100%
          );
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
          filter: drop-shadow(0 2px 4px rgba(74, 144, 226, 0.3));
      }

      .nav-links {
        display: flex;
        gap: 2rem;
      }

      .nav-link {
        color: var(--voice-text-secondary);
        text-decoration: none;
        font-weight: 500;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-link.active {
        color: var(--voice-primary);
        background: transparent;
        border: none;
        border-bottom: 2px solid #4a90e2;
        border-radius: 0;
        padding-bottom: 0.4rem;
      }

      .nav-link:hover:not(.active) {
        color: var(--voice-text-primary);
        background: rgba(0, 0, 0, 0.05);
      }

      .user-menu {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--casual-primary),
          var(--casual-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, var(--casual-primary), var(--casual-secondary));
        color: white;
        text-decoration: none;
        border-radius: 12px;
        font-weight: 500;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }

      .back-btn:hover {
        background: linear-gradient(135deg, var(--casual-secondary), var(--casual-primary));
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      /* ==========================================================================
         MAIN CONTENT LAYOUT
         ========================================================================== */
      .main-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 3rem 2rem;
        position: relative;
        z-index: 2;
      }

      /* Breadcrumb */
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 2rem;
        color: var(--text-muted);
        font-size: 0.875rem;
      }

      .breadcrumb a {
        color: var(--text-muted);
        text-decoration: none;
      }

      .breadcrumb a:hover {
        color: var(--text-secondary);
      }

      .breadcrumb .current {
        color: var(--text-primary);
        font-weight: 500;
      }

      /* Page Title Section */
      .page-title-section {
        text-align: center;
        margin-bottom: 3rem;
      }

      .title-with-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .title-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          var(--casual-primary),
          var(--casual-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary);
        margin: 0;
      }

      .page-description {
        color: var(--text-secondary);
        font-size: 1.125rem;
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.6;
      }

      /* Analysis Grid */
      .analysis-container {
        display: grid;
        grid-template-columns: 1fr 600px;
        gap: 2rem;
        margin-bottom: 2rem;
      }

      /* ==========================================================================
         LEFT PANEL - TRANSCRIPT
         ========================================================================== */
      .transcript-panel {
        background: white;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow);
        border: 1px solid var(--gray-200);
        overflow: hidden;
        height: fit-content;
        min-height: 600px;
      }

      .transcript-header {
        padding: var(--space-5);
        border-bottom: 1px solid var(--gray-200);
        background: var(--gray-50);
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .transcript-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
        margin: 0;
      }

      .transcript-content {
        padding: var(--space-6);
        max-height: 70vh;
        overflow-y: auto;
      }

      .transcript-text {
        line-height: 1.8;
        color: var(--gray-700);
        background: var(--casual-light);
        padding: var(--space-6);
        border-radius: var(--radius);
        border-left: 4px solid var(--casual-primary);
        font-size: 0.95rem;
      }

      /* ==========================================================================
         UNIFIED ANALYSIS PANEL WITH GLASS MORPHISM
         ========================================================================== */
      .unified-analysis-panel {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        overflow: hidden;
        height: fit-content;
        min-height: 600px;
        transition: all 0.3s ease;
        position: relative;
      }

      .unified-analysis-panel::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .unified-analysis-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg), 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      .unified-tab-header {
        display: flex;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        background: rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(15px);
        position: relative;
        z-index: 2;
      }
      
      .unified-tab-btn {
        flex: 1;
        padding: var(--space-4) var(--space-5);
        background: none;
        border: none;
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-2);
        border-radius: 12px 12px 0 0;
      }
      
      .unified-tab-btn:hover:not(.active) {
        background: rgba(99, 102, 241, 0.05);
        color: var(--voice-text-primary);
        transform: translateY(-1px);
      }
      
      .unified-tab-btn.active {
        background: rgba(99, 102, 241, 0.1);
        color: var(--voice-primary);
        border-bottom: 3px solid var(--voice-primary);
        transform: translateY(-1px);
      }

      .unified-tab-btn.active::before {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        border-radius: 2px 2px 0 0;
      }

      .unified-tab-content {
        padding: var(--space-6);
        height: 450px;
        overflow-y: auto;
        overflow-x: hidden;
        position: relative;
      }

      /* Custom scrollbar for unified content */
      .unified-tab-content::-webkit-scrollbar {
        width: 6px;
      }

      .unified-tab-content::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.2);
        border-radius: 3px;
      }

      .unified-tab-content::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 0, 0, 0.3);
      }

      .unified-tab-pane {
        display: none;
      }

      .unified-tab-pane.active {
        display: block;
      }

      .panel-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: var(--space-6);
      }

      .panel-actions h3 {
        margin: 0;
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--gray-900);
      }

      .copy-btn {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        padding: var(--space-2) var(--space-3);
        background: var(--gray-100);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius);
        font-size: 0.875rem;
        color: var(--gray-600);
        cursor: pointer;
        transition: all 0.2s;
      }

      .copy-btn:hover {
        background: var(--gray-200);
        color: var(--gray-900);
      }

      /* ==========================================================================
         MISSING UTILITY CLASSES
         ========================================================================== */
      .flex { display: flex; }
      .items-center { align-items: center; }
      .gap-3 { gap: 0.75rem; }
      .gap-4 { gap: 1rem; }
      .relative { position: relative; }
      .group:hover .group-hover\\:scale-105 { transform: scale(1.05); }
      .h-9 { height: 2.25rem; }
      .w-auto { width: auto; }
      .font-semibold { font-weight: 600; }
      .text-lg { font-size: 1.125rem; }
      .tracking-tight { letter-spacing: -0.025em; }
      .transition-transform { transition: transform 0.3s ease; }

      .analysis-info {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 0.25rem;
      }

      .analysis-badge {
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .user-menu-btn {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem 1rem;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.05);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .user-menu-btn:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateY(-1px);
      }

      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--voice-primary), var(--voice-secondary));
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
      }

      /* ==========================================================================
         PAGE HEADER
         ========================================================================== */
      .page-header {
        background: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        padding: var(--space-4) var(--space-8);
      }
      
      .header-content h1 {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin-bottom: var(--space-2);
      }

      /* ==========================================================================
         MAIN LAYOUT
         ========================================================================== */
      .main-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--space-8);
      }
      
      /* Score Section at Top with Glass Morphism */
      .score-section {
        background: var(--voice-glass);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 24px;
        box-shadow: var(--voice-shadow-lg);
        padding: var(--space-6) var(--space-8);
        margin-bottom: var(--space-6);
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .score-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.02) 0%, transparent 100%);
        pointer-events: none;
      }
      
      .score-header {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-4);
        position: relative;
        z-index: 2;
      }
      
      .score-display {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-6);
      }
      
      .score-circle {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--casual-primary) 0%, var(--casual-secondary) 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.25rem;
        font-weight: 800;
        box-shadow: 0 25px 50px -12px rgba(59, 130, 246, 0.4), 0 15px 25px -8px rgba(59, 130, 246, 0.25);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .score-circle::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        animation: shimmer 3s ease-in-out infinite;
      }

      .score-circle:hover {
        transform: scale(1.05);
        box-shadow: 0 35px 70px -12px rgba(59, 130, 246, 0.5), 0 25px 40px -8px rgba(59, 130, 246, 0.35);
      }
      
      .score-meta {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-2);
        max-width: 300px;
      }
      
      .score-label {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--voice-text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      
      .score-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        line-height: 1.2;
      }
      
      .score-description {
        font-size: 0.875rem;
        color: var(--voice-text-secondary);
        line-height: 1.4;
      }

      /* ==========================================================================
         METRICS AND CATEGORIES WITH SOPHISTICATED STYLING
         ========================================================================== */
      .metrics-grid {
        display: grid;
        gap: var(--space-6);
      }

      .metric-card, .category-card {
        background: var(--voice-glass);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: var(--radius-lg);
        padding: var(--space-6);
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        overflow: hidden;
      }

      .metric-card::before, .category-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .metric-card:hover, .category-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg);
        border-color: rgba(59, 130, 246, 0.1);
      }

      .metric-header, .category-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--space-4);
      }

      .metric-name, .category-name {
        font-size: 1rem;
        font-weight: 600;
        color: var(--voice-text-primary);
      }

      .metric-score, .category-score {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--casual-primary);
      }

      .metric-details, .category-description {
        font-size: 0.875rem;
        color: var(--voice-text-secondary);
        margin-bottom: var(--space-3);
        line-height: 1.5;
      }

      .metric-value {
        font-weight: 600;
        color: var(--voice-text-primary);
      }

      .optimal-range {
        color: var(--voice-text-muted);
      }

      .metric-bar, .category-bar {
        height: 8px;
        background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        border-radius: 12px;
        overflow: hidden;
        margin-top: var(--space-3);
        box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .metric-bar::before, .category-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
        animation: barShimmer 3s ease-in-out infinite;
      }

      .metric-fill, .category-fill {
        height: 100%;
        border-radius: 12px;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        background: linear-gradient(135deg, var(--casual-primary) 0%, var(--casual-secondary) 50%, var(--voice-accent) 100%);
        box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
        position: relative;
        overflow: hidden;
      }

      .metric-fill::before, .category-fill::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.4) 50%, transparent 100%);
        animation: fillShimmer 2s ease-in-out infinite;
      }

      .category-factors {
        margin: var(--space-3) 0;
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-2);
      }

      .factor-tag {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.08), rgba(139, 92, 246, 0.06));
        color: var(--voice-primary);
        padding: 0.375rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid rgba(99, 102, 241, 0.15);
        transition: all 0.2s ease;
        text-transform: capitalize;
        letter-spacing: 0.025em;
      }

      .factor-tag:hover {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.12), rgba(139, 92, 246, 0.1));
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2);
      }

      /* Shimmer Animation Effects */
      .shimmer-card {
        position: relative;
        overflow: hidden;
      }

      .shimmer-card::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }

      @keyframes barShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      @keyframes fillShimmer {
        0%, 100% { transform: translateX(-100%); }
        50% { transform: translateX(100%); }
      }

      /* ==========================================================================
         NEXT STEPS SECTION
         ========================================================================== */
      .next-steps-section {
        grid-column: 1 / -1;
        margin-top: var(--space-8);
      }

      .next-steps {
        border-left-color: var(--success) !important;
      }

      .next-steps .insight-icon-modern {
        background: var(--success);
      }

      .roadmap-phase {
        margin: var(--space-6) 0;
        padding: var(--space-4);
        border-radius: var(--radius);
        border-left: 4px solid;
      }

      .phase-foundation {
        background: #eff6ff;
        border-left-color: #3b82f6;
      }

      .phase-integration {
        background: #f0fdf4;
        border-left-color: #10b981;
      }

      .phase-mastery {
        background: #fef3c7;
        border-left-color: #f59e0b;
      }

      .phase-title {
        font-weight: 600;
        margin-bottom: var(--space-2);
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }

      .phase-focus {
        font-weight: 600;
        margin-bottom: var(--space-2);
      }

      .phase-actions {
        margin: 0;
        padding-left: var(--space-6);
      }

      .phase-actions li {
        margin-bottom: var(--space-1);
        color: var(--voice-text-secondary);
      }

      /* ==========================================================================
         SOPHISTICATED INSIGHT CARDS
         ========================================================================== */
      .insight-card-modern {
        background: var(--voice-glass);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 0, 0, 0.06);
        border-radius: var(--radius-lg);
        padding: var(--space-6);
        margin-bottom: var(--space-6);
        transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        position: relative;
        overflow: hidden;
      }

      .insight-card-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.01) 0%, transparent 100%);
        pointer-events: none;
      }

      .insight-card-modern:hover {
        transform: translateY(-2px);
        box-shadow: var(--voice-shadow-lg);
      }

      .insight-card-modern.priority {
        border-left: 4px solid var(--casual-primary);
      }

      .insight-card-modern.data {
        border-left: 4px solid var(--voice-success);
      }

      .insight-card-modern.application {
        border-left: 4px solid var(--voice-warm);
      }

      .insight-card-modern.roadmap {
        border-left: 4px solid var(--casual-primary);
      }

      .insight-card-modern.action {
        border-left: 4px solid var(--voice-success);
      }

      .insight-card-modern.note {
        border-left: 4px solid var(--voice-neural);
      }

      .insight-header-modern {
        display: flex;
        align-items: center;
        gap: var(--space-4);
        margin-bottom: var(--space-4);
      }

      .insight-icon-modern {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 20px;
        box-shadow: var(--shadow);
        transition: all 0.3s ease;
      }

      .insight-icon-modern:hover {
        transform: scale(1.05);
      }

      .insight-icon-modern.priority {
        background: linear-gradient(135deg, var(--casual-primary), var(--casual-secondary));
      }

      .insight-icon-modern.data {
        background: linear-gradient(135deg, var(--voice-success), #059669);
      }

      .insight-icon-modern.application {
        background: linear-gradient(135deg, var(--voice-warm), #d97706);
      }

      .insight-icon-modern.roadmap {
        background: linear-gradient(135deg, var(--casual-primary), var(--casual-secondary));
      }

      .insight-icon-modern.action {
        background: linear-gradient(135deg, var(--voice-success), #059669);
      }

      .insight-icon-modern.note {
        background: linear-gradient(135deg, var(--voice-neural), #64748b);
      }

      .insight-title-modern {
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--voice-text-primary);
        margin: 0;
      }

      .insight-content-modern {
        color: var(--voice-text-secondary);
        line-height: 1.6;
      }

      .insight-content-modern h4 {
        color: var(--voice-text-primary);
        font-weight: 600;
        margin-bottom: var(--space-2);
      }

      .insight-content-modern ul {
        margin: var(--space-3) 0;
        padding-left: var(--space-6);
      }

      .insight-content-modern li {
        margin-bottom: var(--space-2);
      }

      /* Loading State */
      .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: var(--space-8);
        color: var(--voice-text-muted);
      }

      .spinner {
        width: 32px;
        height: 32px;
        border: 3px solid rgba(0, 0, 0, 0.1);
        border-top: 3px solid var(--casual-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: var(--space-4);
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .analysis-container {
          grid-template-columns: 1fr;
        }
        
        .main-container {
          padding: var(--space-4);
        }
        
        .score-display {
          flex-direction: column;
          text-align: center;
        }
        
        .score-meta {
          align-items: center;
          text-align: center;
        }

        .page-title {
          font-size: 2rem;
        }

        .unified-tab-header {
          flex-direction: column;
        }

        .unified-tab-btn {
          border-radius: 0;
        }
      }
    </style>
  </head>

  <body>
    <!-- Top Navigation -->
    <nav class="top-nav fade-in">
      <div class="flex items-center gap-4">
        <div class="flex items-center gap-3 relative group">
          <img 
            src="images/logo.png" 
            alt="Articulaition" 
            class="h-9 w-auto transition-transform group-hover:scale-105"
          />
          <span class="font-semibold text-lg tracking-tight"><span class="nav-orange">articul</span><span class="nav-blue">ai</span><span class="nav-orange">tion</span><span class="nav-orange">.com</span></span>
        </div>
        <div class="analysis-info">
          <span class="analysis-badge">Casual Conversation Analysis</span>
        </div>
      </div>
      <div class="user-menu">
        <a href="casual-conversation-analysis.html" class="back-btn">
          <i data-lucide="arrow-left" class="w-4 h-4"></i>
          Back to Practice
        </a>
      </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
      <!-- Page Title Section -->
      <div class="page-title-section slide-up delay-100">
        <div class="title-with-icon">
          <div class="title-icon">
            <i data-lucide="messages-square" class="w-6 h-6"></i>
          </div>
          <h1 class="page-title">Casual Conversation Analysis</h1>
        </div>
        <p class="page-description">
          Your personalized feedback for building stronger social connections through natural, engaging conversations
        </p>
      </div>

      <!-- Score Section -->
      <div class="score-section scale-in delay-200">
        <h2 class="score-header">Communication Effectiveness Score</h2>
        <div class="score-display">
          <div class="score-circle" id="scoreCircle">--</div>
          <div class="score-meta">
            <div class="score-label">Overall Social Connection</div>
            <div class="score-title" id="scoreText">Analyzing...</div>
            <div class="score-description">
              Based on conversation flow, engagement level, relatability, and social warmth
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Container -->
      <div class="analysis-container slide-up delay-300">
        <!-- Left Panel: Transcript -->
        <div class="transcript-panel">
          <div class="transcript-header">
            <i data-lucide="file-text" class="w-5 h-5 text-gray-500"></i>
            <h3 class="transcript-title">Conversation Transcript</h3>
            <button class="copy-btn" onclick="copyTranscript()">
              <i data-lucide="copy" class="w-4 h-4"></i>
              Copy
            </button>
          </div>
          <div class="transcript-content" id="transcriptContent">
            <div class="loading-state">
              <div class="spinner"></div>
              <p>Transcribing your casual conversation...</p>
            </div>
          </div>
        </div>

        <!-- Right Panel: Unified Analysis -->
        <div class="unified-analysis-panel">
          <!-- Tab Headers -->
          <div class="unified-tab-header">
            <button class="unified-tab-btn active" data-tab="insights">
              <i data-lucide="lightbulb" class="w-4 h-4"></i>
              Insights
            </button>
            <button class="unified-tab-btn" data-tab="quantitative">
              <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
              Quantitative
            </button>
            <button class="unified-tab-btn" data-tab="qualitative">
              <i data-lucide="pie-chart" class="w-4 h-4"></i>
              Qualitative
            </button>
          </div>

          <!-- Tab Content -->
          <div class="unified-tab-content">
            <!-- Insights Tab -->
            <div class="unified-tab-pane active" id="insights-pane">
              <div class="panel-actions">
                <h3>Social Connection Insights</h3>
                <button class="copy-btn" onclick="copyAnalysis()">
                  <i data-lucide="copy" class="w-4 h-4"></i>
                  Copy
                </button>
              </div>
              <div id="detailedAnalysisContent">
                <div class="loading-state">
                  <div class="spinner"></div>
                  <p>Generating personalized insights...</p>
                </div>
              </div>
            </div>

            <!-- Quantitative Tab -->
            <div class="unified-tab-pane" id="quantitative-pane">
              <div class="panel-actions">
                <h3>Speaking Metrics</h3>
                <button class="copy-btn" onclick="copyQuantitative()">
                  <i data-lucide="copy" class="w-4 h-4"></i>
                  Copy
                </button>
              </div>
              <div id="quantitativeContent">
                <div class="loading-state">
                  <div class="spinner"></div>
                  <p>Analyzing speaking patterns...</p>
                </div>
              </div>
            </div>

            <!-- Qualitative Tab -->
            <div class="unified-tab-pane" id="qualitative-pane">
              <div class="panel-actions">
                <h3>Social Skills Assessment</h3>
                <button class="copy-btn" onclick="copyQualitative()">
                  <i data-lucide="copy" class="w-4 h-4"></i>
                  Copy
                </button>
              </div>
              <div id="qualitativeContent">
                <div class="loading-state">
                  <div class="spinner"></div>
                  <p>Evaluating social connection skills...</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // CRITICAL: Set up Gemini API key for transcription
      window.GEMINI_API_KEY = "AIzaSyBGvwarFw2FbxgxOMnFchyji6G-zYkrgV8";
      console.log("🔑 Gemini API key configured for casual conversation analysis");

      // Casual Communication Metrics Configuration
      const casualMetrics = {
        quantitative: {
          'Speech Rate': { weight: 0.15, optimal: { min: 140, max: 180 } },
          'Talk/Listen Ratio': { weight: 0.20, optimal: { min: 50, max: 70 } },
          'Filler Words': { weight: 0.10, optimal: { min: 0, max: 3 } },
          'Questions Asked': { weight: 0.15, optimal: { min: 3, max: 8 } },
          'Response Time': { weight: 0.10, optimal: { min: 1, max: 3 } },
          'Topic Transitions': { weight: 0.15, optimal: { min: 2, max: 5 } },
          'Conversation Length': { weight: 0.15, optimal: { min: 300, max: 900 } }
        },
        qualitative: {
          'Tone & Warmth': { weight: 0.25, factors: ['friendly tone', 'welcoming language', 'positive energy'] },
          'Engagement Level': { weight: 0.25, factors: ['active listening', 'follow-up questions', 'enthusiasm'] },
          'Relatability': { weight: 0.25, factors: ['shared experiences', 'common ground', 'accessibility'] },
          'Conversation Flow': { weight: 0.25, factors: ['natural transitions', 'comfortable pace', 'mutual participation'] }
        }
      };

      // Initialize unified tab switching
      function initializeUnifiedTabSwitching() {
        const tabButtons = document.querySelectorAll('.unified-tab-btn');
        const tabPanes = document.querySelectorAll('.unified-tab-pane');
        
        tabButtons.forEach(button => {
          button.addEventListener('click', () => {
            const targetTab = button.dataset.tab;
            
            // Update active tab button
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Update active tab pane
            tabPanes.forEach(pane => pane.classList.remove('active'));
            document.getElementById(targetTab + '-pane').classList.add('active');
          });
        });
      }

      // Copy functions
      function copyTranscript() {
        const transcriptContent = document.getElementById('transcriptContent').innerText;
        navigator.clipboard.writeText(transcriptContent).then(() => {
          console.log('Transcript copied to clipboard');
        });
      }

      function copyAnalysis() {
        const analysisContent = document.getElementById('detailedAnalysisContent').innerText;
        navigator.clipboard.writeText(analysisContent).then(() => {
          console.log('Analysis copied to clipboard');
        });
      }

      function copyQuantitative() {
        const quantitativeContent = document.getElementById('quantitativeContent').innerText;
        navigator.clipboard.writeText(quantitativeContent).then(() => {
          console.log('Quantitative data copied to clipboard');
        });
      }

      function copyQualitative() {
        const qualitativeContent = document.getElementById('qualitativeContent').innerText;
        navigator.clipboard.writeText(qualitativeContent).then(() => {
          console.log('Qualitative data copied to clipboard');
        });
      }

      // Transcribe audio using Gemini AI
      async function transcribeAudioWithGemini(audioFile) {
        try {
          console.log("🎤 Transcribing casual conversation audio with Gemini...");
          
          // Get API key from config
          const apiKey = window.API_CONFIG?.gemini || window.GEMINI_API_KEY;
          if (!apiKey || apiKey === 'YOUR_GEMINI_API_KEY_HERE') {
            throw new Error("Gemini API key not configured");
          }
          
          // Convert audio file to base64
          const arrayBuffer = await audioFile.arrayBuffer();
          const base64Audio = btoa(String.fromCharCode(...new Uint8Array(arrayBuffer)));
          
          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [
                  {
                    text: "Please transcribe this casual conversation audio file accurately. Return only the transcribed text without any additional commentary."
                  },
                  {
                    inline_data: {
                      mime_type: audioFile.type,
                      data: base64Audio
                    }
                  }
                ]
              }],
              generationConfig: {
                temperature: 0.1,
                maxOutputTokens: 8000,
                topP: 0.8,
                topK: 40
              }
            })
          });

          // Check for HTTP errors
          if (!response.ok) {
            const errorText = await response.text();
            console.error(`❌ Gemini API error: ${response.status} - ${response.statusText}`, errorText);
            
            // Handle specific error cases
            if (response.status === 503) {
              throw new Error("Gemini service is temporarily unavailable. Please try again in a few moments.");
            } else if (response.status === 429) {
              throw new Error("Rate limit exceeded. Please try again later.");
            } else if (response.status === 401) {
              throw new Error("Invalid API key. Please check your Gemini API configuration.");
            } else {
              throw new Error(`Gemini API error: ${response.status} - ${response.statusText}`);
            }
          }

          const data = await response.json();
          
          if (data.candidates && data.candidates[0] && data.candidates[0].content) {
            const transcript = data.candidates[0].content.parts[0].text;
            console.log("✅ Casual conversation transcription successful");
            return transcript;
          } else {
            console.error("❌ Invalid Gemini API response structure:", data);
            throw new Error("No transcription received from Gemini");
          }
        } catch (error) {
          console.error("❌ Transcription error:", error);
          
          // Provide fallback demo transcript for development/testing
          if (error.message.includes("503") || error.message.includes("service unavailable")) {
            console.log("🔄 Providing fallback demo transcript due to service unavailability");
            return getCasualDemoTranscript();
          }
          
          throw new Error(`Transcription failed: ${error.message}`);
        }
      }

      // Fallback demo transcript for casual conversations
      function getCasualDemoTranscript() {
        return `Hey Sarah! How's it going? I haven't seen you in forever!

Oh my god, hi! I'm doing great, thanks! Yeah, it's been way too long. How have you been?

I've been good, just super busy with work lately. You know how it is. But I'm so glad we finally got a chance to catch up! What have you been up to?

Same here, work has been crazy. But I actually just got back from this amazing vacation in Costa Rica. It was incredible! The beaches were gorgeous and the food was amazing.

No way, that sounds awesome! I've always wanted to go there. Tell me everything! What was your favorite part?

Honestly, the wildlife was unbelievable. We saw sloths, monkeys, and all these colorful birds. And the zip-lining was so much fun, even though I was terrified at first.

That sounds like such an adventure! I'm definitely putting Costa Rica on my bucket list. Speaking of travel, remember that trip we took to Portland last year? That was such a blast.

Oh my god, yes! That food tour was amazing. And we laughed so hard at that comedy show. We need to plan another trip soon.

Absolutely! Maybe we could do something for your birthday next month? I know it's coming up.

That would be perfect! I'd love to celebrate with you. You always know how to make things fun.`;
      }

      // Analyze casual conversation using specific metrics
      async function analyzeCasualConversation(transcript) {
        try {
          console.log("🧠 Analyzing casual conversation...");
          
          // Calculate quantitative metrics
          const quantitativeScores = await calculateQuantitativeMetrics(transcript, casualMetrics.quantitative);
          
          // Calculate qualitative metrics
          const qualitativeScores = await calculateQualitativeMetrics(transcript, casualMetrics.qualitative);
          
          // Calculate overall score
          const overallScore = calculateOverallScore(quantitativeScores, qualitativeScores);
          
          // Generate insights and recommendations
          const insights = await generateCasualInsights(transcript, quantitativeScores, qualitativeScores);
          
          return {
            transcript: transcript,
            analysisType: "casual",
            quantitativeScores: quantitativeScores,
            qualitativeScores: qualitativeScores,
            overallScore: overallScore,
            insights: insights
          };
        } catch (error) {
          console.error("❌ Casual conversation analysis error:", error);
          throw new Error(`Analysis failed: ${error.message}`);
        }
      }

      // Calculate quantitative metrics for casual conversation
      async function calculateQuantitativeMetrics(transcript, quantitativeConfig) {
        const words = transcript.split(/\s+/).filter(word => word.length > 0);
        const sentences = transcript.split(/[.!?]+/).filter(s => s.trim().length > 0);
        
        const metrics = {};
        
        // Speech Rate (words per minute - estimated)
        const estimatedDurationMinutes = words.length / 150;
        metrics['Speech Rate'] = Math.round(words.length / estimatedDurationMinutes);
        
        // Talk/Listen Ratio (estimated as percentage of speaking)
        metrics['Talk/Listen Ratio'] = 65;
        
        // Filler Words
        const fillerWords = ['um', 'uh', 'like', 'you know', 'so', 'well'];
        metrics['Filler Words'] = words.filter(word => 
          fillerWords.includes(word.toLowerCase())
        ).length;
        
        // Questions Asked
        metrics['Questions Asked'] = (transcript.match(/\?/g) || []).length;
        
        // Response Time (simulated)
        metrics['Response Time'] = 2;
        
        // Topic Transitions (estimated based on sentence variety)
        metrics['Topic Transitions'] = Math.min(5, Math.max(1, Math.floor(sentences.length / 3)));
        
        // Conversation Length (in seconds, estimated)
        metrics['Conversation Length'] = Math.round(words.length * 0.4);
        
        return metrics;
      }

      // Calculate qualitative metrics using AI analysis
      async function calculateQualitativeMetrics(transcript, qualitativeConfig) {
        try {
          const prompt = `Analyze this casual conversation transcript for social connection skills. Rate each factor from 1-10:

Tone & Warmth: Evaluate based on friendly tone, welcoming language, positive energy
Engagement Level: Evaluate based on active listening, follow-up questions, enthusiasm  
Relatability: Evaluate based on shared experiences, common ground, accessibility
Conversation Flow: Evaluate based on natural transitions, comfortable pace, mutual participation

Transcript: "${transcript}"

Provide scores in this exact format:
Tone & Warmth: [score 1-10]
Engagement Level: [score 1-10]
Relatability: [score 1-10]
Conversation Flow: [score 1-10]`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          const analysisText = data.candidates[0].content.parts[0].text;
          
          // Parse scores from response
          const scores = {};
          Object.keys(qualitativeConfig).forEach(metric => {
            const match = analysisText.match(new RegExp(`${metric}:\\s*(\\d+)`, 'i'));
            scores[metric] = match ? parseInt(match[1]) : 3;
          });
          
          return scores;
        } catch (error) {
          console.error("Error calculating qualitative metrics:", error);
          // Return default scores
          const defaultScores = {};
          Object.keys(qualitativeConfig).forEach(metric => {
            defaultScores[metric] = 3;
          });
          return defaultScores;
        }
      }

      // Calculate overall score
      function calculateOverallScore(quantitativeScores, qualitativeScores) {
        const qualitativeWeight = 0.6;
        const quantitativeWeight = 0.4;
        
        const qualitativeValues = Object.values(qualitativeScores);
        const qualitativeAvg = qualitativeValues.reduce((a, b) => a + b, 0) / qualitativeValues.length;
        const quantitativeAvg = 3; // Realistic default score
        
        const overallScore = (qualitativeAvg * qualitativeWeight + quantitativeAvg * quantitativeWeight);
        return Math.round(overallScore * 10) / 10;
      }

      // Generate casual conversation insights with professional structure
      async function generateCasualInsights(transcript, quantitativeScores, qualitativeScores) {
        try {
          const prompt = `Analyze this casual conversation and provide detailed feedback in this exact format:

STRENGTHS:
• [List 3-4 specific strengths for building social connections]

AREAS FOR IMPROVEMENT:
• [List 3-4 specific areas to improve in casual conversations]

RECOMMENDATIONS:
• [List 5-6 actionable recommendations for better social interactions]

Transcript: "${transcript}"

Focus on casual conversation skills, social connection building, and making people feel comfortable and engaged.`;

          const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${window.GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              contents: [{
                parts: [{
                  text: prompt
                }]
              }]
            })
          });

          const data = await response.json();
          return data.candidates[0].content.parts[0].text;
        } catch (error) {
          console.error("Error generating insights:", error);
          return `STRENGTHS:
• Clear communication attempt
• Engaged with the conversation topic
• Showed interest in social interaction
• Demonstrated basic conversational skills

AREAS FOR IMPROVEMENT:
• Continue practicing active listening
• Work on natural conversation flow
• Develop more engaging questions
• Focus on building rapport and connection

RECOMMENDATIONS:
• Practice casual conversations more regularly
• Focus on finding common ground with others
• Work on reading social cues and responding appropriately
• Develop storytelling skills to make conversations more engaging
• Practice asking open-ended questions
• Work on showing genuine interest in others`;
        }
      }

      // Display results functions with professional structure
      function displayResults(results) {
        console.log("🎨 Displaying casual conversation results:", results);
        
        // Update score
        if (results.overallScore) {
          const scoreCircle = document.getElementById("scoreCircle");
          const scoreText = document.getElementById("scoreText");
          const displayScore = Math.round(results.overallScore * 10);
          
          if (scoreCircle) scoreCircle.textContent = displayScore;
          if (scoreText) scoreText.textContent = `${displayScore}/100 - Social Connection Skills`;
          
          // Update score color
          if (displayScore >= 80) {
            scoreCircle.style.background = 'linear-gradient(135deg, #10b981, #059669)';
          } else if (displayScore >= 60) {
            scoreCircle.style.background = 'linear-gradient(135deg, #3b82f6, #2563eb)';
          } else if (displayScore >= 40) {
            scoreCircle.style.background = 'linear-gradient(135deg, #f59e0b, #d97706)';
          } else {
            scoreCircle.style.background = 'linear-gradient(135deg, #ef4444, #dc2626)';
          }
        }

        // Display transcript
        if (results.transcript) {
          document.getElementById('transcriptContent').innerHTML = `
            <div class="transcript-text">
              <h4 style="margin-bottom: var(--space-4); color: var(--voice-text-primary); font-weight: 600;">Your Conversation</h4>
              <p style="line-height: 1.8; color: var(--voice-text-secondary);">${results.transcript}</p>
            </div>
          `;
        }

        // Display quantitative metrics
        displayQuantitativeMetrics(results.quantitativeScores);
        
        // Display qualitative metrics  
        displayQualitativeMetrics(results.qualitativeScores);
        
        // Display insights with professional structure
        displayInsightsWithStructure(results.insights);
      }

      function displayQuantitativeMetrics(scores) {
        const quantitativeElement = document.getElementById('quantitativeContent');
        if (!quantitativeElement || !scores) return;

        let html = '<div class="metrics-grid">';
        
        Object.entries(scores).forEach(([metric, value]) => {
          const config = casualMetrics.quantitative[metric] || { optimal: { min: 0, max: 100 } };
          const optimal = config.optimal;
          
          // Calculate score based on optimal range
          let score;
          if (value >= optimal.min && value <= optimal.max) {
            score = 100;
          } else if (value < optimal.min) {
            score = Math.max(0, 100 - (optimal.min - value) * 2);
          } else {
            score = Math.max(0, 100 - (value - optimal.max) * 2);
          }
          
          score = Math.min(100, Math.max(0, score));
          const scoreColor = score >= 80 ? '#10b981' : score >= 60 ? '#3b82f6' : score >= 40 ? '#f59e0b' : '#ef4444';
          
          html += `
            <div class="metric-card shimmer-card">
              <div class="metric-header">
                <span class="metric-name">${metric}</span>
                <span class="metric-score" style="color: ${scoreColor}">${Math.round(score)}/100</span>
              </div>
              <div class="metric-details">
                <div class="metric-value">Measured: ${value}${getMetricUnit(metric)}</div>
                <div class="optimal-range">Optimal: ${optimal.min}-${optimal.max}${getMetricUnit(metric)}</div>
              </div>
              <div class="metric-bar">
                <div class="metric-fill" style="width: ${score}%; background-color: ${scoreColor}"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        quantitativeElement.innerHTML = html;
      }

      function displayQualitativeMetrics(scores) {
        const qualitativeElement = document.getElementById('qualitativeContent');
        if (!qualitativeElement || !scores) return;

        let html = '<div class="metrics-grid">';
        
        Object.entries(scores).forEach(([metric, score]) => {
          const config = casualMetrics.qualitative[metric] || { factors: [] };
          const normalizedScore = (score / 10) * 100;
          const scoreColor = normalizedScore >= 80 ? '#10b981' : normalizedScore >= 60 ? '#3b82f6' : normalizedScore >= 40 ? '#f59e0b' : '#ef4444';
          
          html += `
            <div class="category-card shimmer-card">
              <div class="category-header">
                <span class="category-name">${metric}</span>
                <span class="category-score" style="color: ${scoreColor}">${score}/10</span>
              </div>
              <div class="category-factors">
                ${config.factors.map(factor => `<span class="factor-tag">${factor}</span>`).join('')}
              </div>
              <div class="category-bar">
                <div class="category-fill" style="width: ${normalizedScore}%; background-color: ${scoreColor}"></div>
              </div>
            </div>
          `;
        });
        
        html += '</div>';
        qualitativeElement.innerHTML = html;
      }

      function displayInsightsWithStructure(insights) {
        const insightsElement = document.getElementById('detailedAnalysisContent');
        if (!insightsElement || !insights) return;

        let insightsHtml = '';
        
        // Parse insights sections
        const strengthsMatch = insights.match(/STRENGTHS:\s*([\s\S]*?)(?=AREAS FOR IMPROVEMENT:|$)/i);
        const improvementMatch = insights.match(/AREAS FOR IMPROVEMENT:\s*([\s\S]*?)(?=RECOMMENDATIONS:|$)/i);
        const recommendationsMatch = insights.match(/RECOMMENDATIONS:\s*([\s\S]*?)$/i);

        // Communication Enhancement Priority Card
        if (strengthsMatch && improvementMatch) {
          const strengthItems = strengthsMatch[1].split('\n').filter(line => 
            line.trim().startsWith('•') || line.trim().startsWith('-')
          );
          const improvementItems = improvementMatch[1].split('\n').filter(line => 
            line.trim().startsWith('•') || line.trim().startsWith('-')
          );
          
          let priorityContent = '';
          if (strengthItems.length > 0 && improvementItems.length > 0) {
            const topStrength = strengthItems[0].replace(/^[•\-]\s*/, '').trim();
            const topImprovement = improvementItems[0].replace(/^[•\-]\s*/, '').trim();
            
            priorityContent = `
              <div style="margin-bottom: 1rem;"><strong>Communication Enhancement Priority</strong></div>
              <p>Based on your casual conversation analysis, here's your strategic development focus:</p>
              
              <div style="background: #ecfdf5; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #10b981;">
                <div style="font-weight: 600; margin-bottom: 0.5rem; color: #065f46;">🎯 Your Core Social Strength</div>
                <div style="color: #047857; margin-bottom: 0.5rem;">${topStrength}</div>
                <div style="color: #047857; font-size: 0.9rem;">
                  <strong>Leverage This:</strong> Use this strength as your foundation for building stronger connections. Lead with confidence in this area when meeting new people or navigating social situations.
                </div>
              </div>
              
              <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #f59e0b;">
                <div style="font-weight: 600; margin-bottom: 0.5rem; color: #92400e;">⚡ Priority Development Area</div>
                <div style="color: #92400e; margin-bottom: 0.5rem;">${topImprovement}</div>
                <div style="color: #92400e; font-size: 0.9rem;">
                  <strong>Focus Here:</strong> Dedicate 70% of your practice time to this area. Small improvements here will have the biggest impact on your social confidence and connection quality.
                </div>
              </div>
              
              <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">🚀 Quick Win Strategy</div>
                <p style="margin: 0; color: var(--gray-700); font-size: 0.9rem;">
                  Combine your strength with focused improvement on your priority area. This creates a powerful foundation for more engaging and memorable conversations.
                </p>
              </div>
            `;
          }
          
          insightsHtml += `
            <div class="insight-card-modern priority">
              <div class="insight-header-modern">
                <div class="insight-icon-modern priority">
                  <i data-lucide="target"></i>
                </div>
                <h4 class="insight-title-modern">Communication Enhancement Priority</h4>
              </div>
              <div class="insight-content-modern">
                ${priorityContent}
              </div>
            </div>
          `;
        }

        // What Your Data Reveals Card
        if (strengthsMatch) {
          const strengthItems = strengthsMatch[1].split('\n').filter(line => 
            line.trim().startsWith('•') || line.trim().startsWith('-')
          );
          
          let dataInsights = '';
          if (strengthItems.length >= 2) {
            dataInsights = `
              <div style="margin-bottom: 1rem;"><strong>What Your Conversation Data Reveals</strong></div>
              <p>Your casual conversation analysis reveals key patterns in how you connect with others:</p>
              
              <div style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #3b82f6;">
                <div style="font-weight: 600; margin-bottom: 0.5rem; color: #1e40af;">💡 Social Connection Patterns</div>
                <ul style="margin: 0; padding-left: 1.5rem; color: #1e40af;">
                  ${strengthItems.slice(0, 3).map(item => `<li>${item.replace(/^[•\-]\s*/, '').trim()}</li>`).join('')}
                </ul>
              </div>
              
              <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Why This Matters for Social Success:</div>
                <ul style="margin: 0; padding-left: 1.5rem; color: var(--gray-700);">
                  <li>Shows your natural communication style and how others likely perceive you</li>
                  <li>Identifies your authentic strengths that make you memorable in conversations</li>
                  <li>Reveals opportunities to build deeper, more meaningful connections</li>
                  <li>Provides concrete data to track your social skills improvement over time</li>
                </ul>
              </div>
            `;
          }
          
          insightsHtml += `
            <div class="insight-card-modern data">
              <div class="insight-header-modern">
                <div class="insight-icon-modern data">
                  <i data-lucide="bar-chart-3"></i>
                </div>
                <h4 class="insight-title-modern">What Your Data Reveals</h4>
              </div>
              <div class="insight-content-modern">
                ${dataInsights}
              </div>
            </div>
          `;
        }

        // How to Apply This Analysis Card
        if (strengthsMatch && improvementMatch) {
          const strengthItems = strengthsMatch[1].split('\n').filter(line => 
            line.trim().startsWith('•') || line.trim().startsWith('-')
          );
          const improvementItems = improvementMatch[1].split('\n').filter(line => 
            line.trim().startsWith('•') || line.trim().startsWith('-')
          );
          
          let applicationAdvice = '';
          if (strengthItems.length > 0 && improvementItems.length > 0) {
            const topStrength = strengthItems[0].replace(/^[•\-]\s*/, '').trim();
            const topImprovement = improvementItems[0].replace(/^[•\-]\s*/, '').trim();
            
            applicationAdvice = `
              <div style="margin-bottom: 1rem;"><strong>How to Apply This Analysis</strong></div>
              <p>Transform your insights into stronger social connections with this strategic approach:</p>
              
              <div style="background: #ecfdf5; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #10b981;">
                <div style="font-weight: 600; margin-bottom: 0.5rem; color: #065f46;">🎯 Leverage Your Natural Strength</div>
                <div style="color: #047857; margin-bottom: 0.5rem;"><strong>Your Asset:</strong> ${topStrength}</div>
                <div style="color: #047857; font-size: 0.9rem;">
                  <strong>How to Use It:</strong>
                  <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                    <li>Lead conversations with this strength to build immediate rapport</li>
                    <li>Use it as your confidence anchor in challenging social situations</li>
                    <li>Help others feel comfortable by demonstrating this positive quality</li>
                    <li>Build on this strength to create memorable interactions</li>
                  </ul>
                </div>
              </div>
              
              <div style="background: #fef3c7; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #f59e0b;">
                <div style="font-weight: 600; margin-bottom: 0.5rem; color: #92400e;">⚡ Strategic Development Focus</div>
                <div style="color: #92400e; margin-bottom: 0.5rem;"><strong>Priority Area:</strong> ${topImprovement}</div>
                <div style="color: #92400e; font-size: 0.9rem;">
                  <strong>Implementation Strategy:</strong>
                  <ul style="margin: 0.5rem 0 0 0; padding-left: 1.5rem;">
                    <li>Practice this skill in low-pressure social settings first</li>
                    <li>Focus on one conversation at a time to build consistency</li>
                    <li>Ask trusted friends for feedback on your progress</li>
                    <li>Celebrate small wins to maintain motivation</li>
                  </ul>
                </div>
              </div>
              
              <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <div style="font-weight: 600; margin-bottom: 0.5rem;">🔄 Daily Integration Tips</div>
                <ul style="margin: 0; padding-left: 1.5rem; color: var(--gray-700);">
                  <li><strong>Morning:</strong> Set one specific social goal for the day</li>
                  <li><strong>Conversations:</strong> Consciously apply your strength while practicing your improvement area</li>
                  <li><strong>Evening:</strong> Reflect on one successful social moment from the day</li>
                  <li><strong>Weekly:</strong> Review progress and adjust your approach based on results</li>
                </ul>
              </div>
            `;
          }
          
          insightsHtml += `
            <div class="insight-card-modern application">
              <div class="insight-header-modern">
                <div class="insight-icon-modern application">
                  <i data-lucide="lightbulb"></i>
                </div>
                <h4 class="insight-title-modern">How to Apply This Analysis</h4>
              </div>
              <div class="insight-content-modern">
                ${applicationAdvice}
              </div>
            </div>
          `;
        }

        // Enhanced Next Steps Section
        insightsHtml += `
          <div class="next-steps-section">
            <div class="insight-card-modern next-steps" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);">
              <div class="insight-header-modern">
                <div class="insight-icon-modern" style="background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); animation: pulse 2s infinite;">
                  <i data-lucide="target"></i>
                </div>
                <h3 class="insight-title-modern" style="font-size: 1.5rem; color: var(--present-text-primary); font-weight: 700;">Your Next Steps</h3>
              </div>
              <div class="insight-content-modern">
                <!-- Hero Message -->
                <div style="margin-bottom: 3rem; text-align: center; padding: 2.5rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
                  <div style="max-width: 600px; margin: 0 auto;">
                    <h4 style="font-size: 2.25rem; font-weight: 800; background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0 0 1rem 0; line-height: 1.2;">
                      Transform Your Communication
                    </h4>
                    <p style="color: var(--present-text-secondary); line-height: 1.8; margin: 0; font-size: 1.125rem; font-weight: 400;">
                      You've unlocked professional insights that transform how you communicate. Choose your growth path and turn these discoveries into <strong style="color: var(--present-primary);">exponential progress</strong>.
                    </p>
                  </div>
                </div>
                
                
                <!-- Premium Pricing Section -->
                <div style="background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.98)); padding: 2rem; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.8); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.06); backdrop-filter: blur(10px); margin-bottom: 2rem; position: relative; overflow: hidden;">
                  
                  <!-- Collapsible Header -->
                  <div style="position: relative; z-index: 1; cursor: pointer;" onclick="togglePricingSection()">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                      <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255, 255, 255, 0.8); padding: 0.5rem 1rem; border-radius: 50px; border: 1px solid rgba(0, 0, 0, 0.1);">
                          <i data-lucide="rocket" style="width: 16px; height: 16px; color: var(--present-primary);"></i>
                          <span style="font-size: 0.875rem; font-weight: 600; color: var(--present-primary);">Choose Your Growth Path</span>
                        </div>
                        <div>
                          <h4 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0; line-height: 1.2;">Plans Built for Every Stage</h4>
                          <p style="font-size: 0.875rem; color: var(--present-text-secondary); margin: 0.25rem 0 0 0; font-weight: 400;" id="pricingSubtitle">View Our Improvement Plans</p>
                        </div>
                      </div>
                      <button style="background: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease;" id="pricingToggleBtn" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.boxShadow='none'">
                        <i data-lucide="chevron-down" style="width: 20px; height: 20px; transition: transform 0.3s ease;" id="pricingToggleIcon"></i>
                      </button>
                    </div>
                  </div>
                  
                  <!-- Collapsible Content -->
                  <div id="pricingContent" style="display: none; opacity: 0; transition: all 0.4s ease; margin-top: 2rem;">
                    <p style="font-size: 1rem; color: var(--present-text-secondary); margin: 0.5rem auto 2rem; font-weight: 400; text-align: center; max-width: 500px;">From first insights to complete mastery—grow at your pace with tools designed for real results.</p>
                  
                  <!-- Premium Pricing Grid -->
                  <div style="position: relative; z-index: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1400px; margin: 0 auto;">
                    
                    <!-- Essential Plan -->
                    <div style="background: white; border: 2px solid rgba(0, 0, 0, 0.06); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(99, 102, 241, 0.15)'; this.style.borderColor='rgba(99, 102, 241, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(0, 0, 0, 0.06)'">
                      <div style="margin-bottom: 2rem;">
                        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(99, 102, 241, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                          <i data-lucide="play" style="width: 14px; height: 14px; color: var(--present-primary);"></i>
                          <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-primary); text-transform: uppercase; letter-spacing: 0.5px;">Essential</span>
                        </div>
                        <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Start Your Growth</h5>
                        <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Perfect for building steady confidence in how you express yourself.</p>
                        <div style="margin-bottom: 2rem;">
                          <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$9.99</span>
                          <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);">/month</span>
                        </div>
                      </div>
                      
                      <div style="margin-bottom: 2rem;">
                        <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What's included:</div>
                        <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                            </div>
                            <span>10 detailed audio analyses per month</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                            </div>
                            <span>Monthly improvement catalog with drills</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                            </div>
                            <span>Email support</span>
                          </li>
                        </ul>
                      </div>
                      
                      <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);" onmouseover="this.style.background='#5145db'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.35)'" onmouseout="this.style.background='var(--present-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(99, 102, 241, 0.25)'">Get Started</button>
                    </div>
                    
                    <!-- Max Growth Plan -->
                    <div style="background: linear-gradient(135deg, white, #fafbff); border: 3px solid var(--present-primary); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; transform: scale(1.05); box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15);" onmouseover="this.style.transform='translateY(-12px) scale(1.08)'; this.style.boxShadow='0 30px 60px rgba(99, 102, 241, 0.25)'" onmouseout="this.style.transform='translateY(0) scale(1.05)'; this.style.boxShadow='0 20px 40px rgba(99, 102, 241, 0.15)'">
                      <!-- Popular Badge -->
                      <div style="position: absolute; top: -1px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.625rem; font-weight: 600; box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3); text-transform: uppercase; letter-spacing: 0.5px;">
                        <i data-lucide="star" style="width: 10px; height: 10px; margin-right: 0.2rem;"></i>Popular
                      </div>
                      
                      <div style="margin-bottom: 2rem; margin-top: 1rem;">
                        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05)); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                          <i data-lucide="zap" style="width: 14px; height: 14px; color: var(--present-primary);"></i>
                          <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-primary); text-transform: uppercase; letter-spacing: 0.5px;">Max Growth</span>
                        </div>
                        <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Complete Transformation</h5>
                        <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">For serious communicators ready to unlock their full potential with unlimited practice and expert guidance.</p>
                        <div style="margin-bottom: 2rem;">
                          <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$15.99</span>
                          <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);">/month</span>
                        </div>
                      </div>
                      
                      <div style="margin-bottom: 2rem;">
                        <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Everything in Essential, plus:</div>
                        <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="infinity" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                            </div>
                            <span><strong>Unlimited</strong> audio analysis</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="users" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                            </div>
                            <span>Weekly expert review sessions</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="sparkles" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                            </div>
                            <span>Full access to Improvement Hub</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="clock" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                            </div>
                            <span>Early access to new tools</span>
                          </li>
                        </ul>
                      </div>
                      
                      <button onclick="window.location.href='pricing.html'" style="width: 100%; background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 30px rgba(99, 102, 241, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(99, 102, 241, 0.4)'">Start Free Trial</button>
                    </div>
                    
                    <!-- Enterprise Plan -->
                    <div style="background: white; border: 2px solid rgba(107, 114, 128, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(107, 114, 128, 0.15)'; this.style.borderColor='rgba(107, 114, 128, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(107, 114, 128, 0.15)'">
                      <div style="margin-bottom: 2rem;">
                        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(107, 114, 128, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                          <i data-lucide="building" style="width: 14px; height: 14px; color: var(--present-text-primary);"></i>
                          <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-text-primary); text-transform: uppercase; letter-spacing: 0.5px;">Enterprise</span>
                        </div>
                        <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Scale Your Team</h5>
                        <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Custom solutions for teams, coaches, and organizations building communication excellence.</p>
                        <div style="margin-bottom: 2rem;">
                          <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">Custom</span>
                          <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);"> pricing</span>
                        </div>
                      </div>
                      
                      <div style="margin-bottom: 2rem;">
                        <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Enterprise features:</div>
                        <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="chart-line" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                            </div>
                            <span>Custom team dashboards & analytics</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="users-2" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                            </div>
                            <span>Group metrics & shared insights</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="headphones" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                            </div>
                            <span>Dedicated support & onboarding</span>
                          </li>
                        </ul>
                      </div>
                      
                      <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-text-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(107, 114, 128, 0.25);" onmouseover="this.style.background='#1f2937'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(107, 114, 128, 0.35)'" onmouseout="this.style.background='var(--present-text-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(107, 114, 128, 0.25)'">Contact Sales</button>
                    </div>
                    
                    <!-- One-Time Plan -->
                    <div style="background: white; border: 2px solid rgba(139, 92, 246, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(139, 92, 246, 0.15)'; this.style.borderColor='rgba(139, 92, 246, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(139, 92, 246, 0.15)'">
                      <div style="margin-bottom: 2rem;">
                        <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(139, 92, 246, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                          <i data-lucide="file-text" style="width: 14px; height: 14px; color: var(--present-secondary);"></i>
                          <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-secondary); text-transform: uppercase; letter-spacing: 0.5px;">One-Time</span>
                        </div>
                        <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Personal Blueprint</h5>
                        <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">A comprehensive communication analysis and personalized improvement plan delivered as a PDF.</p>
                        <div style="margin-bottom: 2rem;">
                          <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$30</span>
                          <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);"> one-time</span>
                        </div>
                      </div>
                      
                      <div style="margin-bottom: 2rem;">
                        <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What you get:</div>
                        <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="search" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                            </div>
                            <span>Deep analysis of vocal patterns & delivery</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="target" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                            </div>
                            <span>Targeted breakdown of specific issues</span>
                          </li>
                          <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                            <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                              <i data-lucide="download" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                            </div>
                            <span>Lifetime PDF access—yours forever</span>
                          </li>
                        </ul>
                      </div>
                      
                      <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-secondary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);" onmouseover="this.style.background='#7c3aed'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(139, 92, 246, 0.35)'" onmouseout="this.style.background='var(--present-secondary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.25)'">Get My Report</button>
                    </div>
                    
                  </div>
                  
                  </div>
                </div>
                
                <!-- Enhanced Action Section -->
                <div style="margin-top: 3rem; text-align: center; padding: 3rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
                  <div style="max-width: 600px; margin: 0 auto 2rem;">
                    <h4 style="font-size: 1.5rem; font-weight: 700; color: var(--present-text-primary); margin: 0 0 0.75rem 0;">Ready to Continue Your Growth?</h4>
                    <p style="color: var(--present-text-secondary); line-height: 1.6; margin: 0; font-size: 1rem;">Keep building on these insights or explore more tools to accelerate your communication mastery.</p>
                  </div>
                  
                  <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; max-width: 500px; margin: 0 auto;">
                    <button onclick="window.location.href='casual-analysis.html'" 
                      style="background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); flex: 1; min-width: 200px;"
                      onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.4)'"
                      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)'">
                      <i data-lucide="mic" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                      Practice Again
                    </button>
                    <button onclick="window.location.href='improvement-hub.html'" 
                      style="background: white; color: var(--present-primary); border: 2px solid var(--present-primary); padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; flex: 1; min-width: 200px;"
                      onmouseover="this.style.background='var(--present-primary)'; this.style.color='white'; this.style.transform='translateY(-2px)'"
                      onmouseout="this.style.background='white'; this.style.color='var(--present-primary)'; this.style.transform='translateY(0)'">
                      <i data-lucide="sparkles" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                      Explore Improvement Hub
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;

        // A Note from Us
        const noteContent = `
          <div style="margin-bottom: 1rem;"><strong>A Note from Us</strong></div>
          <p>Building stronger social connections is one of the most rewarding skills you can develop. Your willingness to analyze and improve your casual conversation skills shows real commitment to personal growth.</p>
          
          <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: #374151;">💭 Remember:</div>
            <ul style="margin: 0; padding-left: 1.5rem; color: #374151;">
              <li>Every conversation is an opportunity to practice and improve</li>
              <li>Authentic connections come from being genuinely interested in others</li>
              <li>Small improvements in social skills create big changes in relationships</li>
              <li>Your unique personality is your greatest asset in building connections</li>
            </ul>
          </div>
          
          <div style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin: 1rem 0; border-left: 4px solid #3b82f6;">
            <div style="font-weight: 600; margin-bottom: 0.5rem; color: #1e40af;">🚀 Keep Growing</div>
            <p style="margin: 0; color: #1e40af; font-size: 0.9rem;">
              Consider analyzing your conversations monthly to track progress. Each analysis builds on the last, creating a clear path to stronger, more meaningful relationships.
            </p>
          </div>
        `;
        
        insightsHtml += `
          <div class="insight-card-modern note">
            <div class="insight-header-modern">
              <div class="insight-icon-modern note">
                <i data-lucide="heart"></i>
              </div>
              <h4 class="insight-title-modern">A Note from Us</h4>
            </div>
            <div class="insight-content-modern">
              ${noteContent}
            </div>
          </div>
        `;

        insightsElement.innerHTML = insightsHtml;
        
        // Reinitialize icons for the new content
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      function getMetricUnit(metric) {
        const units = {
          'Speech Rate': ' wpm',
          'Talk/Listen Ratio': '%',
          'Filler Words': '',
          'Questions Asked': '',
          'Response Time': 's',
          'Topic Transitions': '',
          'Conversation Length': 's'
        };
        return units[metric] || '';
      }

      // Toggle pricing section
      function togglePricingSection() {
        const content = document.getElementById('pricingContent');
        const icon = document.getElementById('pricingToggleIcon');
        const subtitle = document.getElementById('pricingSubtitle');
        const button = document.getElementById('pricingToggleBtn');
        
        if (content.style.display === 'none' || content.style.display === '') {
          // Show content
          content.style.display = 'block';
          setTimeout(() => {
            content.style.opacity = '1';
            content.style.transform = 'translateY(0)';
          }, 10);
          icon.style.transform = 'rotate(180deg)';
          subtitle.textContent = 'Click to collapse pricing options';
          button.style.background = 'var(--present-primary)';
          button.style.borderColor = 'var(--present-primary)';
          icon.style.color = 'white';
        } else {
          // Hide content
          content.style.opacity = '0';
          content.style.transform = 'translateY(-20px)';
          setTimeout(() => {
            content.style.display = 'none';
          }, 400);
          icon.style.transform = 'rotate(0deg)';
          subtitle.textContent = 'View Our Improvement Plans';
          button.style.background = 'rgba(255, 255, 255, 0.8)';
          button.style.borderColor = 'rgba(0, 0, 0, 0.1)';
          icon.style.color = 'var(--present-text-primary)';
        }
        
        // Re-initialize lucide icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      }

      // Process audio for transcription
      async function processAudioForTranscription(audioDataString) {
        try {
          console.log("🎤 Processing casual conversation audio for transcription");

          const audioData = JSON.parse(audioDataString);
          console.log("📊 Audio data:", audioData);

          // Show loading state
          document.getElementById("transcriptContent").innerHTML = `
            <div class="loading-state">
              <div class="spinner"></div>
              <p>🎤 Transcribing your casual conversation...</p>
            </div>
          `;

          // Convert base64 back to blob
          const response = await fetch(audioData.base64);
          const blob = await response.blob();
          const audioFile = new File([blob], audioData.name, { type: audioData.type });

          // Transcribe and analyze
          const transcript = await transcribeAudioWithGemini(audioFile);
          const analysisResults = await analyzeCasualConversation(transcript);

          console.log("✅ Casual conversation analysis complete:", analysisResults);
          displayResults(analysisResults);

        } catch (error) {
          console.error("❌ Audio processing failed:", error);
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem; background: #fee; border: 2px solid #fcc; border-radius: 12px; color: #c33;">
              <h3>⚠️ Analysis Failed</h3>
              <p>Unable to process your casual conversation. Please try again.</p>
              <p style="font-size: 14px; opacity: 0.8;">Error: ${error.message}</p>
            </div>
          `;
        }
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
        initializeUnifiedTabSwitching();

        const audioData = sessionStorage.getItem("audioForAnalysis");
        if (audioData) {
          console.log("🎤 Found audio data for casual conversation analysis");
          processAudioForTranscription(audioData);
          sessionStorage.removeItem("audioForAnalysis");
        } else {
          console.log("❌ No audio data found");
          document.getElementById("transcriptContent").innerHTML = `
            <div style="text-align: center; padding: 2rem;">
              <h3>No Audio Data</h3>
              <p>Please record a casual conversation first.</p>
              <a href="casual-conversation-analysis.html" class="back-btn" style="margin-top: 1rem;">
                Start Recording
              </a>
            </div>
          `;
        }
      });
    </script>
  </body>
</html>