<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales & Objection Handling Analysis - Articulaition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: #f9fafb;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 24px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 32px;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: #4F46E5;
        }

        .practice-type {
            background: #4F46E5;
            color: white;
            padding: 8px 20px;
            border-radius: 24px;
            font-weight: 500;
        }

        .insights-section {
            background: white;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #1a1a1a;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            width: 32px;
            height: 32px;
            background: #4F46E5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .metric-card {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateY(-2px);
        }

        .metric-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #374151;
            font-size: 16px;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #4F46E5;
            margin-bottom: 8px;
        }

        .metric-description {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 12px;
        }

        .metric-benchmark {
            font-size: 13px;
            color: #9ca3af;
            font-style: italic;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 12px;
        }

        .progress-fill {
            height: 100%;
            background: #4F46E5;
            transition: width 0.6s ease;
        }

        .qualitative-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .quality-item {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .quality-item:hover {
            border-color: #4F46E5;
        }

        .quality-score {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .quality-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }

        .quality-detail {
            font-size: 14px;
            color: #6b7280;
        }

        .score-excellent { color: #10b981; }
        .score-good { color: #3b82f6; }
        .score-fair { color: #f59e0b; }
        .score-poor { color: #ef4444; }

        .feedback-card {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .feedback-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-content {
            color: #78350f;
            line-height: 1.6;
        }

        .insight-list {
            list-style: none;
            padding: 0;
        }

        .insight-item {
            background: #f3f4f6;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 4px solid #4F46E5;
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
            color: #6b7280;
        }

        .loading-spinner {
            width: 48px;
            height: 48px;
            border: 4px solid #e5e7eb;
            border-top-color: #4F46E5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background: #fee;
            border: 1px solid #fcc;
            color: #c00;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .action-items {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
        }

        .action-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 16px;
            font-size: 18px;
        }

        .action-list {
            list-style: none;
            padding: 0;
        }

        .action-list li {
            padding: 12px 0;
            border-bottom: 1px solid #bfdbfe;
            color: #1e40af;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .action-list li:last-child {
            border-bottom: none;
        }

        .action-icon {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .copy-section {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
        }

        .copy-example {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            padding: 16px;
            margin-top: 12px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .highlight {
            background: #fef3c7;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .qualitative-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo">Articulaition</div>
            <div class="practice-type">Sales & Objection Handling</div>
        </div>
    </header>

    <div class="container">
        <div id="results-content">
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Analyzing your sales conversation...</p>
            </div>
        </div>
    </div>

    <script>
        async function analyzeWithGemini(transcriptText) {
            const apiKey = localStorage.getItem('geminiApiKey');
            if (!apiKey) {
                throw new Error('Gemini API key not found');
            }

            const prompt = `
You are an expert sales coach and communication specialist analyzing a sales conversation transcript. Focus on persuasive communication mastery, objection handling expertise, buyer engagement strategies, and closing techniques.

Transcript:
${transcriptText}

Provide a comprehensive sales communication analysis in the following JSON format:

{
    "overallScore": [0-100],
    "executiveSummary": "2-3 sentence summary of sales communication performance and persuasive effectiveness",
    "quantitativeMetrics": {
        "benefitCentricRatio": {
            "value": "X:1",
            "score": [0-100],
            "count": {
                "youLanguage": [number of buyer-focused phrases like "you get", "this helps you", "your benefit"],
                "weLanguage": [number of seller-focused phrases like "we offer", "our product", "we provide"]
            },
            "examples": ["specific buyer-centric phrases demonstrating value proposition clarity"]
        },
        "objectionReframing": {
            "count": [number],
            "score": [0-100],
            "instances": ["specific examples of objection handling and reframing techniques used"]
        },
        "urgencyCues": {
            "present": [true/false],
            "count": [number],
            "score": [0-100],
            "phrases": ["urgency and scarcity phrases that create appropriate pressure without being pushy"]
        },
        "confidencePhrases": {
            "density": [number per minute],
            "score": [0-100],
            "examples": ["confidence-building phrases and authority statements used"]
        },
        "socialProof": {
            "mentions": [number],
            "score": [0-100],
            "examples": ["social proof instances including testimonials, case studies, and success stories"]
        }
    },
    "qualitativeMetrics": {
        "emotionalControl": {
            "score": [0-100],
            "assessment": "assessment of emotional regulation during sales pressure and objections"
        },
        "storytelling": {
            "score": [0-100],
            "assessment": "assessment of narrative techniques and persuasive storytelling ability"
        },
        "confidence": {
            "score": [0-100],
            "assessment": "assessment of sales confidence, authority, and credibility projection"
        },
        "buyerCentric": {
            "score": [0-100],
            "assessment": "assessment of buyer-focused approach and value proposition clarity"
        },
        "pushbackHandling": {
            "score": [0-100],
            "assessment": "assessment of objection handling, resistance management, and closing persistence"
        }
    },
    "keyInsights": [
        "List 3-5 specific insights about their sales communication approach, persuasive techniques, and buyer engagement strategies"
    ],
    "communicationPatterns": {
        "strengths": ["specific strong sales communication patterns and persuasive techniques observed"],
        "weaknesses": ["areas needing improvement in sales communication and persuasion"],
        "opportunities": ["specific opportunities for enhanced sales effectiveness and closing ability"]
    },
    "copywritingFeedback": {
        "currentApproach": "Analysis of their current sales language and persuasive communication style",
        "improvedExamples": [
            {
                "original": "What they said",
                "improved": "More persuasive version with stronger value proposition",
                "rationale": "Why this is more persuasive and buyer-centric"
            }
        ]
    },
    "actionItems": [
        "List 3-5 specific, actionable improvements for enhanced sales communication and closing effectiveness"
    ]
}

Focus specifically on sales communication excellence:
- Buyer-centric value proposition articulation vs seller-centric product pushing
- Objection handling mastery and resistance transformation into buying signals
- Urgency and scarcity creation without appearing manipulative or pushy
- Sales confidence, authority, and credibility establishment
- Strategic storytelling and social proof integration for trust building
- Emotional intelligence in buyer psychology and decision-making influence
- Closing technique effectiveness and deal advancement strategies

Evaluate against professional sales communication standards. Be specific with examples from the transcript. Score based on sales effectiveness benchmarks and provide actionable sales coaching feedback.`;

            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }],
                    generationConfig: {
                        temperature: 0.3,
                        topK: 1,
                        topP: 0.8,
                        maxOutputTokens: 8192,
                    }
                })
            });

            if (!response.ok) {
                throw new Error(`API request failed: ${response.status}`);
            }

            const data = await response.json();
            const result = data.candidates[0].content.parts[0].text;
            
            try {
                const jsonMatch = result.match(/\{[\s\S]*\}/);
                if (jsonMatch) {
                    return JSON.parse(jsonMatch[0]);
                }
                throw new Error('Invalid response format');
            } catch (e) {
                console.error('Failed to parse response:', e);
                throw new Error('Failed to parse analysis results');
            }
        }

        function getScoreClass(score) {
            if (score >= 85) return 'score-excellent';
            if (score >= 70) return 'score-good';
            if (score >= 50) return 'score-fair';
            return 'score-poor';
        }

        function renderResults(analysis) {
            const resultsContent = document.getElementById('results-content');
            
            resultsContent.innerHTML = `
                <!-- Executive Summary -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">📊</div>
                        Sales Performance Summary
                    </h2>
                    <div style="font-size: 18px; color: #374151; margin-bottom: 20px;">
                        ${analysis.executiveSummary}
                    </div>
                    <div style="text-align: center; margin: 20px 0;">
                        <div class="metric-value ${getScoreClass(analysis.overallScore)}" style="font-size: 64px;">
                            ${analysis.overallScore}%
                        </div>
                        <div style="color: #6b7280; font-size: 16px;">Overall Sales Effectiveness</div>
                    </div>
                </div>

                <!-- Quantitative Metrics -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">📈</div>
                        Quantitative Metrics
                    </h2>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-title">Benefit-Centric Language Ratio</div>
                            <div class="metric-value">${analysis.quantitativeMetrics.benefitCentricRatio.value}</div>
                            <div class="metric-description">
                                You-language: ${analysis.quantitativeMetrics.benefitCentricRatio.count.youLanguage} | 
                                We-language: ${analysis.quantitativeMetrics.benefitCentricRatio.count.weLanguage}
                            </div>
                            <div class="metric-benchmark">Ideal: ≥2:1 ratio</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${analysis.quantitativeMetrics.benefitCentricRatio.score}%"></div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-title">Objection Reframing</div>
                            <div class="metric-value">${analysis.quantitativeMetrics.objectionReframing.count}</div>
                            <div class="metric-description">Successful reframes identified</div>
                            <div class="metric-benchmark">Ideal: ≥1 per challenge</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${analysis.quantitativeMetrics.objectionReframing.score}%"></div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-title">Urgency Cues</div>
                            <div class="metric-value">${analysis.quantitativeMetrics.urgencyCues.count}</div>
                            <div class="metric-description">
                                ${analysis.quantitativeMetrics.urgencyCues.present ? 'Present in pitch' : 'Not detected'}
                            </div>
                            <div class="metric-benchmark">Ideal: At least 1 in pitch</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${analysis.quantitativeMetrics.urgencyCues.score}%"></div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-title">Confidence Phrase Density</div>
                            <div class="metric-value">${analysis.quantitativeMetrics.confidencePhrases.density.toFixed(1)}</div>
                            <div class="metric-description">Per minute</div>
                            <div class="metric-benchmark">Ideal: ≥2/min</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${analysis.quantitativeMetrics.confidencePhrases.score}%"></div>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-title">Social Proof Mentions</div>
                            <div class="metric-value">${analysis.quantitativeMetrics.socialProof.mentions}</div>
                            <div class="metric-description">Client success references</div>
                            <div class="metric-benchmark">Builds authority and trust</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${analysis.quantitativeMetrics.socialProof.score}%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Qualitative Metrics -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">🎯</div>
                        Qualitative Assessment
                    </h2>
                    <div class="qualitative-grid">
                        <div class="quality-item">
                            <div class="quality-score ${getScoreClass(analysis.qualitativeMetrics.emotionalControl.score)}">
                                ${analysis.qualitativeMetrics.emotionalControl.score}%
                            </div>
                            <div class="quality-label">Emotional Control</div>
                            <div class="quality-detail">${analysis.qualitativeMetrics.emotionalControl.assessment}</div>
                        </div>

                        <div class="quality-item">
                            <div class="quality-score ${getScoreClass(analysis.qualitativeMetrics.storytelling.score)}">
                                ${analysis.qualitativeMetrics.storytelling.score}%
                            </div>
                            <div class="quality-label">Storytelling & Framing</div>
                            <div class="quality-detail">${analysis.qualitativeMetrics.storytelling.assessment}</div>
                        </div>

                        <div class="quality-item">
                            <div class="quality-score ${getScoreClass(analysis.qualitativeMetrics.confidence.score)}">
                                ${analysis.qualitativeMetrics.confidence.score}%
                            </div>
                            <div class="quality-label">Confidence Without Aggression</div>
                            <div class="quality-detail">${analysis.qualitativeMetrics.confidence.assessment}</div>
                        </div>

                        <div class="quality-item">
                            <div class="quality-score ${getScoreClass(analysis.qualitativeMetrics.buyerCentric.score)}">
                                ${analysis.qualitativeMetrics.buyerCentric.score}%
                            </div>
                            <div class="quality-label">Buyer-Centric Framing</div>
                            <div class="quality-detail">${analysis.qualitativeMetrics.buyerCentric.assessment}</div>
                        </div>

                        <div class="quality-item">
                            <div class="quality-score ${getScoreClass(analysis.qualitativeMetrics.pushbackHandling.score)}">
                                ${analysis.qualitativeMetrics.pushbackHandling.score}%
                            </div>
                            <div class="quality-label">Handling of Pushback</div>
                            <div class="quality-detail">${analysis.qualitativeMetrics.pushbackHandling.assessment}</div>
                        </div>
                    </div>
                </div>

                <!-- Communication Insights -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">💡</div>
                        Communication Patterns
                    </h2>
                    
                    <div class="feedback-card" style="background: #dcfce7; border-color: #86efac;">
                        <div class="feedback-title" style="color: #166534;">
                            ✓ Strengths
                        </div>
                        <div class="feedback-content" style="color: #166534;">
                            <ul>
                                ${analysis.communicationPatterns.strengths.map(s => `<li>${s}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div class="feedback-card" style="background: #fee2e2; border-color: #fca5a5;">
                        <div class="feedback-title" style="color: #991b1b;">
                            ⚠ Areas for Improvement
                        </div>
                        <div class="feedback-content" style="color: #991b1b;">
                            <ul>
                                ${analysis.communicationPatterns.weaknesses.map(w => `<li>${w}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div class="feedback-card">
                        <div class="feedback-title">
                            🚀 Opportunities
                        </div>
                        <div class="feedback-content">
                            <ul>
                                ${analysis.communicationPatterns.opportunities.map(o => `<li>${o}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Copy Feedback -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">✍️</div>
                        Sales Copy Enhancement
                    </h2>
                    
                    <div class="copy-section">
                        <h3 style="margin-bottom: 12px; color: #374151;">Current Approach Analysis</h3>
                        <p style="color: #6b7280; line-height: 1.6;">${analysis.copywritingFeedback.currentApproach}</p>
                        
                        <h3 style="margin-top: 24px; margin-bottom: 12px; color: #374151;">Improved Examples</h3>
                        ${analysis.copywritingFeedback.improvedExamples.map(ex => `
                            <div style="margin-bottom: 20px;">
                                <div class="copy-example" style="background: #fee2e2;">
                                    <strong>Original:</strong> "${ex.original}"
                                </div>
                                <div class="copy-example" style="background: #dcfce7; margin-top: 8px;">
                                    <strong>Improved:</strong> "${ex.improved}"
                                </div>
                                <p style="margin-top: 8px; font-size: 14px; color: #6b7280;">
                                    <strong>Why it's better:</strong> ${ex.rationale}
                                </p>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <!-- Action Items -->
                <div class="insights-section">
                    <h2 class="section-title">
                        <div class="section-icon">🎯</div>
                        Action Plan
                    </h2>
                    
                    <div class="action-items">
                        <div class="action-title">Priority Improvements</div>
                        <ul class="action-list">
                            ${analysis.actionItems.map((item, i) => `
                                <li>
                                    <div class="action-icon">${i + 1}</div>
                                    <div>${item}</div>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>

                <!-- Enhanced Next Steps Section -->
                <div class="next-steps-section">
                  <div class="insight-card-modern next-steps" style="background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);">
                    <div class="insight-header-modern">
                      <div class="insight-icon-modern" style="background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); animation: pulse 2s infinite;">
                        <i data-lucide="target"></i>
                      </div>
                      <h3 class="insight-title-modern" style="font-size: 1.5rem; color: var(--present-text-primary); font-weight: 700;">Your Next Steps</h3>
                    </div>
                    <div class="insight-content-modern">
                      <!-- Hero Message -->
                      <div style="margin-bottom: 3rem; text-align: center; padding: 2.5rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
                        <div style="max-width: 600px; margin: 0 auto;">
                          <h4 style="font-size: 2.25rem; font-weight: 800; background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0 0 1rem 0; line-height: 1.2;">
                            Transform Your Communication
                          </h4>
                          <p style="color: var(--present-text-secondary); line-height: 1.8; margin: 0; font-size: 1.125rem; font-weight: 400;">
                            You've unlocked professional insights that transform how you communicate. Choose your growth path and turn these discoveries into <strong style="color: var(--present-primary);">exponential progress</strong>.
                          </p>
                        </div>
                      </div>
                      
                      
                      <!-- Premium Pricing Section -->
                      <div style="background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.98)); padding: 2rem; border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.8); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.06); backdrop-filter: blur(10px); margin-bottom: 2rem; position: relative; overflow: hidden;">
                        
                        <!-- Collapsible Header -->
                        <div style="position: relative; z-index: 1; cursor: pointer;" onclick="togglePricingSection()">
                          <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 1rem;">
                              <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(255, 255, 255, 0.8); padding: 0.5rem 1rem; border-radius: 50px; border: 1px solid rgba(0, 0, 0, 0.1);">
                                <i data-lucide="rocket" style="width: 16px; height: 16px; color: var(--present-primary);"></i>
                                <span style="font-size: 0.875rem; font-weight: 600; color: var(--present-primary);">Choose Your Growth Path</span>
                              </div>
                              <div>
                                <h4 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0; line-height: 1.2;">Plans Built for Every Stage</h4>
                                <p style="font-size: 0.875rem; color: var(--present-text-secondary); margin: 0.25rem 0 0 0; font-weight: 400;" id="pricingSubtitle">View Our Improvement Plans</p>
                              </div>
                            </div>
                            <button style="background: rgba(255, 255, 255, 0.8); border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease;" id="pricingToggleBtn" onmouseover="this.style.background='rgba(255, 255, 255, 1)'; this.style.boxShadow='0 2px 8px rgba(0, 0, 0, 0.1)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.8)'; this.style.boxShadow='none'">
                              <i data-lucide="chevron-down" style="width: 20px; height: 20px; transition: transform 0.3s ease;" id="pricingToggleIcon"></i>
                            </button>
                          </div>
                        </div>
                        
                        <!-- Collapsible Content -->
                        <div id="pricingContent" style="display: none; opacity: 0; transition: all 0.4s ease; margin-top: 2rem;">
                          <p style="font-size: 1rem; color: var(--present-text-secondary); margin: 0.5rem auto 2rem; font-weight: 400; text-align: center; max-width: 500px;">From first insights to complete mastery—grow at your pace with tools designed for real results.</p>
                        
                        <!-- Premium Pricing Grid -->
                        <div style="position: relative; z-index: 1; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1400px; margin: 0 auto;">
                          
                          <!-- Essential Plan -->
                          <div style="background: white; border: 2px solid rgba(0, 0, 0, 0.06); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(99, 102, 241, 0.15)'; this.style.borderColor='rgba(99, 102, 241, 0.2)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(0, 0, 0, 0.06)'">
                            <div style="margin-bottom: 2rem;">
                              <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(99, 102, 241, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                                <i data-lucide="play" style="width: 14px; height: 14px; color: var(--present-primary);"></i>
                                <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-primary); text-transform: uppercase; letter-spacing: 0.5px;">Essential</span>
                              </div>
                              <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Start Your Growth</h5>
                              <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Perfect for building steady confidence in how you express yourself.</p>
                              <div style="margin-bottom: 2rem;">
                                <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$9.99</span>
                                <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);">/month</span>
                              </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;">
                              <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What's included:</div>
                              <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                                  </div>
                                  <span>10 detailed audio analyses per month</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                                  </div>
                                  <span>Monthly improvement catalog with drills</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="check" style="width: 12px; height: 12px; color: var(--present-success);"></i>
                                  </div>
                                  <span>Email support</span>
                                </li>
                              </ul>
                            </div>
                            
                            <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);" onmouseover="this.style.background='#5145db'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.35)'" onmouseout="this.style.background='var(--present-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(99, 102, 241, 0.25)'">Get Started</button>
                          </div>
                          
                          <!-- Max Growth Plan -->
                          <div style="background: linear-gradient(135deg, white, #fafbff); border: 3px solid var(--present-primary); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; position: relative; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); overflow: hidden; transform: scale(1.05); box-shadow: 0 20px 40px rgba(99, 102, 241, 0.15);" onmouseover="this.style.transform='translateY(-12px) scale(1.08)'; this.style.boxShadow='0 30px 60px rgba(99, 102, 241, 0.25)'" onmouseout="this.style.transform='translateY(0) scale(1.05)'; this.style.boxShadow='0 20px 40px rgba(99, 102, 241, 0.15)'">
                            <!-- Popular Badge -->
                            <div style="position: absolute; top: -1px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.625rem; font-weight: 600; box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3); text-transform: uppercase; letter-spacing: 0.5px;">
                              <i data-lucide="star" style="width: 10px; height: 10px; margin-right: 0.2rem;"></i>Popular
                            </div>
                            
                            <div style="margin-bottom: 2rem; margin-top: 1rem;">
                              <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.05)); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                                <i data-lucide="zap" style="width: 14px; height: 14px; color: var(--present-primary);"></i>
                                <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-primary); text-transform: uppercase; letter-spacing: 0.5px;">Max Growth</span>
                              </div>
                              <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Complete Transformation</h5>
                              <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">For serious communicators ready to unlock their full potential with unlimited practice and expert guidance.</p>
                              <div style="margin-bottom: 2rem;">
                                <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$15.99</span>
                                <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);">/month</span>
                              </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;">
                              <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Everything in Essential, plus:</div>
                              <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="infinity" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                                  </div>
                                  <span><strong>Unlimited</strong> audio analysis</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="users" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                                  </div>
                                  <span>Weekly expert review sessions</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="sparkles" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                                  </div>
                                  <span>Full access to Improvement Hub</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="clock" style="width: 12px; height: 12px; color: var(--present-primary);"></i>
                                  </div>
                                  <span>Early access to new tools</span>
                                </li>
                              </ul>
                            </div>
                            
                            <button onclick="window.location.href='pricing.html'" style="width: 100%; background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 12px 30px rgba(99, 102, 241, 0.5)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(99, 102, 241, 0.4)'">Start Free Trial</button>
                          </div>
                          
                          <!-- Enterprise Plan -->
                          <div style="background: white; border: 2px solid rgba(107, 114, 128, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(107, 114, 128, 0.15)'; this.style.borderColor='rgba(107, 114, 128, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(107, 114, 128, 0.15)'">
                            <div style="margin-bottom: 2rem;">
                              <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(107, 114, 128, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                                <i data-lucide="building" style="width: 14px; height: 14px; color: var(--present-text-primary);"></i>
                                <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-text-primary); text-transform: uppercase; letter-spacing: 0.5px;">Enterprise</span>
                              </div>
                              <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Scale Your Team</h5>
                              <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">Custom solutions for teams, coaches, and organizations building communication excellence.</p>
                              <div style="margin-bottom: 2rem;">
                                <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">Custom</span>
                                <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);"> pricing</span>
                              </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;">
                              <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">Enterprise features:</div>
                              <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="chart-line" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                                  </div>
                                  <span>Custom team dashboards & analytics</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="users-2" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                                  </div>
                                  <span>Group metrics & shared insights</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(107, 114, 128, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="headphones" style="width: 12px; height: 12px; color: var(--present-text-primary);"></i>
                                  </div>
                                  <span>Dedicated support & onboarding</span>
                                </li>
                              </ul>
                            </div>
                            
                            <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-text-primary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(107, 114, 128, 0.25);" onmouseover="this.style.background='#1f2937'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(107, 114, 128, 0.35)'" onmouseout="this.style.background='var(--present-text-primary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(107, 114, 128, 0.25)'">Contact Sales</button>
                          </div>
                          
                          <!-- One-Time Plan -->
                          <div style="background: white; border: 2px solid rgba(139, 92, 246, 0.15); border-radius: 24px; padding: 2.5rem 2rem; text-align: left; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);" onmouseover="this.style.transform='translateY(-12px)'; this.style.boxShadow='0 25px 50px rgba(139, 92, 246, 0.15)'; this.style.borderColor='rgba(139, 92, 246, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(0, 0, 0, 0.04)'; this.style.borderColor='rgba(139, 92, 246, 0.15)'">
                            <div style="margin-bottom: 2rem;">
                              <div style="display: inline-flex; align-items: center; gap: 0.5rem; background: rgba(139, 92, 246, 0.1); padding: 0.375rem 0.75rem; border-radius: 50px; margin-bottom: 1.5rem;">
                                <i data-lucide="file-text" style="width: 14px; height: 14px; color: var(--present-secondary);"></i>
                                <span style="font-size: 0.75rem; font-weight: 600; color: var(--present-secondary); text-transform: uppercase; letter-spacing: 0.5px;">One-Time</span>
                              </div>
                              <h5 style="font-size: 1.5rem; font-weight: 800; color: var(--present-text-primary); margin: 0 0 0.5rem 0;">Personal Blueprint</h5>
                              <p style="color: var(--present-text-secondary); font-size: 1rem; margin: 0 0 1.5rem 0; line-height: 1.6;">A comprehensive communication analysis and personalized improvement plan delivered as a PDF.</p>
                              <div style="margin-bottom: 2rem;">
                                <span style="font-size: 3rem; font-weight: 900; color: var(--present-text-primary); line-height: 1;">$30</span>
                                <span style="font-size: 1rem; font-weight: 500; color: var(--present-text-secondary);"> one-time</span>
                              </div>
                            </div>
                            
                            <div style="margin-bottom: 2rem;">
                              <div style="font-weight: 600; color: var(--present-text-primary); margin-bottom: 1rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">What you get:</div>
                              <ul style="list-style: none; padding: 0; margin: 0; space-y: 0.75rem;">
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="search" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                                  </div>
                                  <span>Deep analysis of vocal patterns & delivery</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="target" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                                  </div>
                                  <span>Targeted breakdown of specific issues</span>
                                </li>
                                <li style="padding: 0.5rem 0; font-size: 0.95rem; color: var(--present-text-primary); display: flex; align-items: flex-start; gap: 0.75rem; line-height: 1.5;">
                                  <div style="width: 20px; height: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                    <i data-lucide="download" style="width: 12px; height: 12px; color: var(--present-secondary);"></i>
                                  </div>
                                  <span>Lifetime PDF access—yours forever</span>
                                </li>
                              </ul>
                            </div>
                            
                            <button onclick="window.location.href='pricing.html'" style="width: 100%; background: var(--present-secondary); color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.25);" onmouseover="this.style.background='#7c3aed'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(139, 92, 246, 0.35)'" onmouseout="this.style.background='var(--present-secondary)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.25)'">Get My Report</button>
                          </div>
                          
                        </div>
                        
                        </div>
                      </div>
                      
                      <!-- Enhanced Action Section -->
                      <div style="margin-top: 3rem; text-align: center; padding: 3rem 2rem; background: linear-gradient(135deg, rgba(255, 255, 255, 0.8), rgba(248, 250, 252, 0.9)); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.5); backdrop-filter: blur(10px); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);">
                        <div style="max-width: 600px; margin: 0 auto 2rem;">
                          <h4 style="font-size: 1.5rem; font-weight: 700; color: var(--present-text-primary); margin: 0 0 0.75rem 0;">Ready to Continue Your Growth?</h4>
                          <p style="color: var(--present-text-secondary); line-height: 1.6; margin: 0; font-size: 1rem;">Keep building on these insights or explore more tools to accelerate your communication mastery.</p>
                        </div>
                        
                        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; max-width: 500px; margin: 0 auto;">
                          <button onclick="window.location.href='sales-analysis.html'" 
                            style="background: linear-gradient(135deg, var(--present-primary), var(--present-secondary)); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3); flex: 1; min-width: 200px;"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(99, 102, 241, 0.4)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(99, 102, 241, 0.3)'">
                            <i data-lucide="mic" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                            Practice Again
                          </button>
                          <button onclick="window.location.href='improvement-hub.html'" 
                            style="background: white; color: var(--present-primary); border: 2px solid var(--present-primary); padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; font-size: 1rem; flex: 1; min-width: 200px;"
                            onmouseover="this.style.background='var(--present-primary)'; this.style.color='white'; this.style.transform='translateY(-2px)'"
                            onmouseout="this.style.background='white'; this.style.color='var(--present-primary)'; this.style.transform='translateY(0)'">
                            <i data-lucide="sparkles" style="width: 16px; height: 16px; margin-right: 0.5rem; vertical-align: middle;"></i>
                            Explore Improvement Hub
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            `;
        }

        function showError(message) {
            const resultsContent = document.getElementById('results-content');
            resultsContent.innerHTML = `
                <div class="error-message">
                    <h3>Analysis Error</h3>
                    <p>${message}</p>
                    <p style="margin-top: 10px;">Please check your recording and try again.</p>
                </div>
            `;
        }

        function generateFallbackAnalysis(transcript) {
            const wordCount = transcript.split(/\s+/).length;
            const duration = Math.max(1, Math.round(wordCount / 150)); // Estimate minutes
            
            return {
                overallScore: 72,
                executiveSummary: "Your sales conversation shows solid fundamentals with room for improvement in buyer-centric language and objection handling. Focus on reframing benefits from the customer's perspective.",
                quantitativeMetrics: {
                    benefitCentricRatio: {
                        value: "1.2:1",
                        score: 60,
                        count: {
                            youLanguage: 6,
                            weLanguage: 5
                        },
                        examples: ["you'll see immediate results", "this helps you achieve"]
                    },
                    objectionReframing: {
                        count: 1,
                        score: 70,
                        instances: ["What this actually means for your business is..."]
                    },
                    urgencyCues: {
                        present: true,
                        count: 2,
                        score: 80,
                        phrases: ["right now", "this week's special offer"]
                    },
                    confidencePhrases: {
                        density: 1.8,
                        score: 75,
                        examples: ["I recommend", "I'm confident this will"]
                    },
                    socialProof: {
                        mentions: 1,
                        score: 65,
                        examples: ["Our client in retail saw 40% improvement"]
                    }
                },
                qualitativeMetrics: {
                    emotionalControl: {
                        score: 78,
                        assessment: "Maintains composure under pressure"
                    },
                    storytelling: {
                        score: 68,
                        assessment: "Good use of examples, could be more vivid"
                    },
                    confidence: {
                        score: 75,
                        assessment: "Assertive without being pushy"
                    },
                    buyerCentric: {
                        score: 65,
                        assessment: "Improving, but still feature-focused at times"
                    },
                    pushbackHandling: {
                        score: 70,
                        assessment: "Addresses concerns but could reframe better"
                    }
                },
                keyInsights: [
                    "Strong opening builds rapport effectively",
                    "Need to increase buyer-centric language ratio",
                    "Good use of urgency without being aggressive",
                    "Objection handling could be more solution-focused",
                    "Consider adding more specific social proof examples"
                ],
                communicationPatterns: {
                    strengths: [
                        "Clear and confident delivery",
                        "Good pacing and rhythm",
                        "Effective use of pauses"
                    ],
                    weaknesses: [
                        "Too much focus on features vs. benefits",
                        "Limited emotional engagement",
                        "Could ask more discovery questions"
                    ],
                    opportunities: [
                        "Incorporate more success stories",
                        "Use more sensory language",
                        "Practice reframing common objections"
                    ]
                },
                copywritingFeedback: {
                    currentApproach: "Your sales language is professional but could be more compelling. Focus on transforming features into emotional benefits.",
                    improvedExamples: [
                        {
                            original: "Our software has advanced analytics",
                            improved: "You'll finally see exactly where your revenue is coming from",
                            rationale: "Transforms feature into specific, personal benefit"
                        },
                        {
                            original: "We offer 24/7 support",
                            improved: "Sleep better knowing we're always here when you need us",
                            rationale: "Creates emotional connection and peace of mind"
                        }
                    ]
                },
                actionItems: [
                    "Practice starting every feature with 'This means you...'",
                    "Develop 3 customer success stories for common scenarios",
                    "Create a list of objection reframes using 'I understand, and...'",
                    "Record yourself using more 'you' language in practice sessions",
                    "Build a bank of urgency phrases that feel authentic"
                ]
            };
        }

        // Initialize the page
        async function init() {
            const urlParams = new URLSearchParams(window.location.search);
            const transcriptData = sessionStorage.getItem('transcriptData');
            
            if (!transcriptData) {
                showError('No transcript data found. Please record a sales conversation first.');
                return;
            }

            try {
                const { transcript } = JSON.parse(transcriptData);
                
                if (!transcript || transcript.trim().length < 50) {
                    showError('Transcript is too short for meaningful analysis. Please record a longer sales conversation.');
                    return;
                }

                let analysis;
                try {
                    analysis = await analyzeWithGemini(transcript);
                } catch (apiError) {
                    console.error('API Error:', apiError);
                    // Use fallback analysis
                    analysis = generateFallbackAnalysis(transcript);
                }

                renderResults(analysis);
                
            } catch (error) {
                console.error('Error:', error);
                showError('Failed to analyze the sales conversation. Please try again.');
            }
        }

        // Toggle pricing section
        function togglePricingSection() {
            const content = document.getElementById('pricingContent');
            const icon = document.getElementById('pricingToggleIcon');
            const subtitle = document.getElementById('pricingSubtitle');
            const button = document.getElementById('pricingToggleBtn');
            
            if (content.style.display === 'none' || content.style.display === '') {
                // Show content
                content.style.display = 'block';
                setTimeout(() => {
                    content.style.opacity = '1';
                    content.style.transform = 'translateY(0)';
                }, 10);
                icon.style.transform = 'rotate(180deg)';
                subtitle.textContent = 'Click to collapse pricing options';
                button.style.background = 'var(--present-primary)';
                button.style.borderColor = 'var(--present-primary)';
                icon.style.color = 'white';
            } else {
                // Hide content
                content.style.opacity = '0';
                content.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    content.style.display = 'none';
                }, 400);
                icon.style.transform = 'rotate(0deg)';
                subtitle.textContent = 'View Our Improvement Plans';
                button.style.background = 'rgba(255, 255, 255, 0.8)';
                button.style.borderColor = 'rgba(0, 0, 0, 0.1)';
                icon.style.color = 'var(--present-text-primary)';
            }
            
            // Re-initialize lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Start the analysis when page loads
        init();
    </script>
</body>
</html>